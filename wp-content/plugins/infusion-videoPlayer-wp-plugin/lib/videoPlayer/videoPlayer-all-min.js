function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(id){mejs.YouTubeApi.flashReady(id)}!function(){"use strict";var minimumFontSize=10,minimumLineHeight=16,fontSizeVerticalPercentage=4.5,lineHeightRatio=1.5,cueBackgroundColour=[0,0,0,.5],objectsCreated=!1,captionator={createDOMException:function(code,message,name){try{document.querySelectorAll("div/[]")}catch(Error){var CustomDOMException=function(code,message,name){this.code=code,this.message=message,this.name=name};return CustomDOMException.prototype=Error,new CustomDOMException(code,message,name)}},compareArray:function(array1,array2){if(!(array1 instanceof Array&&array2 instanceof Array))return!1;if(array1.length!==array2.length)return!1;for(var index in array1)if(array1.hasOwnProperty(index)&&array1[index]!==array2[index])return!1;return!0},generateID:function(stringLength){var idComposite="";for(stringLength=stringLength?stringLength:10;idComposite.length<stringLength;)idComposite+=String.fromCharCode(65+Math.floor(26*Math.random()));return"captionator"+idComposite},captionify:function(element,defaultLanguage,options){var videoElements=[],elementIndex=0;if(options=options instanceof Object?options:{},options.minimumFontSize&&"number"==typeof options.minimumFontSize&&(minimumFontSize=options.minimumFontSize),options.minimumLineHeight&&"number"==typeof options.minimumLineHeight&&(minimumLineHeight=options.minimumLineHeight),options.fontSizeVerticalPercentage&&"number"==typeof options.fontSizeVerticalPercentage&&(fontSizeVerticalPercentage=options.fontSizeVerticalPercentage),options.lineHeightRatio&&"number"!=typeof options.lineHeightRatio&&(lineHeightRatio=options.lineHeightRatio),options.cueBackgroundColour&&options.cueBackgroundColour instanceof Array&&(cueBackgroundColour=options.cueBackgroundColour),!HTMLVideoElement)return!1;if("function"==typeof document.createElement("video").addTextTrack)return!1;if(objectsCreated||(captionator.TextTrack=function(id,kind,label,language,trackSource,isDefault){this.onload=function(){},this.onerror=function(){},this.oncuechange=function(){},this.id=id||"",this.internalMode=this.DISABLED,this.cues=new captionator.TextTrackCueList(this),this.activeCues=new captionator.ActiveTextTrackCueList(this.cues,this),this.kind=kind||"subtitles",this.label=label||"",this.language=language||"",this.src=trackSource||"",this.readyState=captionator.TextTrack.NONE,this.internalDefault=isDefault||!1,this.getMode=function(){return this.internalMode},this.setMode=function(value){var allowedModes=[this.DISABLED,this.HIDDEN,this.SHOWING];if(-1===allowedModes.indexOf(value))throw new Error("Illegal mode value for track: "+value);value!==this.internalMode&&(this.internalMode=value,this.readyState===captionator.TextTrack.NONE&&this.src.length>0&&value!==this.DISABLED&&this.loadTrack(this.src,null),this.videoNode._captionator_dirtyBit=!0,captionator.rebuildCaptions(this.videoNode),value===this.DISABLED&&(this.cues.length=0,this.readyState=captionator.TextTrack.NONE))},this.getDefault=function(){return this.internalDefault},Object.prototype.__defineGetter__?(this.__defineGetter__("mode",this.getMode),this.__defineSetter__("mode",this.setMode),this.__defineGetter__("default",this.getDefault)):Object.defineProperty&&(Object.defineProperty(this,"mode",{get:this.getMode,set:this.setMode}),Object.defineProperty(this,"default",{get:this.getDefault})),this.processCaptions=function(capTxt){var TrackProcessingOptions=this.videoNode._captionatorOptions||{};"metadata"===this.kind&&(TrackProcessingOptions.processCueHTML=!1,TrackProcessingOptions.sanitiseCueHTML=!1);var captionData=captionator.parseCaptions(capTxt,TrackProcessingOptions);this.readyState=captionator.TextTrack.LOADED,this.cues.loadCues(captionData),this.activeCues.refreshCues.apply(this.activeCues),this.videoNode._captionator_dirtyBit=!0,captionator.rebuildCaptions(this.videoNode),this.onload.call(this)};var readDataUrl=function(url){var delim=url.indexOf(","),header=url.substring(0,delim),data=url.substring(delim+1),base64Idx=header.indexOf(";base64"),isBase64=base64Idx>-1,mimeTypeStartIdx=url.indexOf("data:")+5,mimeTypeEndIdx=isBase64?base64Idx:delim;url.substring(mimeTypeStartIdx,mimeTypeEndIdx);return data=isBase64?window.atob(data):decodeURIComponent(data)};this.loadTrack=function(source){var currentTrackElement=this;if("data:"==source.substr(0,5)){var caps=readDataUrl(source);currentTrackElement.processCaptions(caps)}else{var ajaxObject=new XMLHttpRequest;this.src=source,this.readyState=captionator.TextTrack.LOADING,ajaxObject.open("GET",source,!0),ajaxObject.onreadystatechange=function(eventData){4===ajaxObject.readyState&&(200===ajaxObject.status?currentTrackElement.processCaptions(ajaxObject.responseText):(currentTrackElement.readyState=captionator.TextTrack.ERROR,currentTrackElement.onerror()))};try{ajaxObject.send(null)}catch(Error){currentTrackElement.readyState=captionator.TextTrack.ERROR,currentTrackElement.onerror(Error)}}},this.addCue=function(cue){if(!(cue&&cue instanceof captionator.TextTrackCue))throw new Error("The argument is null or not an instance of TextTrackCue.");this.cues.addCue(cue)},this.removeCue=function(){}},captionator.TextTrack.NONE=0,captionator.TextTrack.LOADING=1,captionator.TextTrack.LOADED=2,captionator.TextTrack.ERROR=3,captionator.TextTrack.prototype.DISABLED="disabled",captionator.TextTrack.prototype.HIDDEN="hidden",captionator.TextTrack.prototype.SHOWING="showing",captionator.TextTrackCueList=function(track){this.track=track instanceof captionator.TextTrack?track:null,this.getCueById=function(cueID){return this.filter(function(currentCue){return currentCue.id===cueID})[0]},this.loadCues=function(cueData){for(var cueIndex=0;cueIndex<cueData.length;cueIndex++)cueData[cueIndex].track=this.track,Array.prototype.push.call(this,cueData[cueIndex])},this.addCue=function(cue){if(!(cue&&cue instanceof captionator.TextTrackCue))throw new Error("The argument is null or not an instance of TextTrackCue.");if(cue.track!==this.track&&cue.track)throw new Error("This cue is associated with a different track!");Array.prototype.push.call(this,cue)},this.toString=function(){return"[TextTrackCueList]"}},captionator.TextTrackCueList.prototype=[],captionator.ActiveTextTrackCueList=function(textTrackCueList,textTrack){this.refreshCues=function(){if(textTrackCueList.length){var cueList=this,cueListChanged=!1,oldCueList=[].slice.call(this,0);if(this.length=0,textTrackCueList.forEach(function(cue){cue.active&&(cueList.push(cue),cueList[cueList.length-1]!==oldCueList[cueList.length-1]&&(cueListChanged=!0))}),cueListChanged)try{textTrack.oncuechange()}catch(error){}}},this.toString=function(){return"[ActiveTextTrackCueList]"},this.refreshCues()},captionator.ActiveTextTrackCueList.prototype=new captionator.TextTrackCueList(null),captionator.TextTrackCue=function(id,startTime,endTime,text,settings,pauseOnExit,track){if(this.id=id,this.track=track instanceof captionator.TextTrack?track:null,this.startTime=parseFloat(startTime),this.endTime=parseFloat(endTime),this.text="string"==typeof text||text instanceof captionator.CaptionatorCueStructure?text:"",this.settings="string"==typeof settings?settings:"",this.intSettings={},this.pauseOnExit=!!pauseOnExit,this.wasActive=!1,this.direction="horizontal",this.snapToLines=!0,this.linePosition="auto",this.textPosition=50,this.size=0,this.alignment="middle",this.settings.length){var intSettings=this.intSettings,currentCue=this;settings=settings.split(/\s+/).filter(function(settingItem){return settingItem.length>0}),settings instanceof Array&&settings.forEach(function(cueItem){var settingMap={D:"direction",L:"linePosition",T:"textPosition",A:"alignment",S:"size"};cueItem=cueItem.split(":"),settingMap[cueItem[0]]&&(intSettings[settingMap[cueItem[0]]]=cueItem[1]),settingMap[cueItem[0]]in currentCue&&(currentCue[settingMap[cueItem[0]]]=cueItem[1])})}this.linePosition.match(/\%/)&&(this.snapToLines=!1),this.getCueAsSource=function(){return String(this.text)},this.getCueAsHTML=function(){var DOMFragment=document.createDocumentFragment(),DOMNode=document.createElement("div");return DOMNode.innerHTML=String(this.text),Array.prototype.forEach.call(DOMNode.childNodes,function(child){DOMFragment.appendChild(child.cloneNode(!0))}),DOMFragment},this.isActive=function(){var currentTime=0;if(this.track instanceof captionator.TextTrack&&(this.track.mode===this.track.SHOWING||this.track.mode===this.track.HIDDEN)&&this.track.readyState===captionator.TextTrack.LOADED)try{if(currentTime=this.track.videoNode.currentTime,this.startTime<=currentTime&&this.endTime>=currentTime)return this.wasActive||(this.wasActive=!0,this.onenter()),!0}catch(Error){return!1}return this.wasActive&&(this.wasActive=!1,this.onexit()),!1},Object.prototype.__defineGetter__?this.__defineGetter__("active",this.isActive):Object.defineProperty&&Object.defineProperty(this,"active",{get:this.isActive}),this.toString=function(){return"TextTrackCue:"+this.id+"\n"+String(this.text)},this.onenter=function(){},this.onexit=function(){}},captionator.MediaTrack=function(id,kind,label,language,src,type,isDefault){var getSupportedMediaSource=function(sources){var supportedSource=sources.filter(function(source,index){try{var mediaElement=document.createElement(source.getAttribute("type").split("/").shift());return!(!mediaElement.canPlayType||!mediaElement.canPlayType(source.getAttribute("type")).replace(/no/,""))}catch(Error){return!1}}).shift().getAttribute("src");return supportedSource};this.onload=function(){},this.onerror=function(){},this.id=id||"",this.internalMode=this.DISABLED,this.internalMode=this.DISABLED,this.mediaElement=null,this.kind=kind||"audiodescription",this.label=label||"",this.language=language||"",this.readyState=captionator.TextTrack.NONE,this.type=type||"x/unknown",this.mediaType=null,this.src="","string"==typeof src?this.src=src:src instanceof NodeList&&(this.src=getSupportedMediaSource(src)),this.type.match(/^video\//)?this.mediaType="video":this.type.match(/^audio\//)&&(this.mediaType="audio"),this.getMode=function(){return this.internalMode},this.setMode=function(value){var allowedModes=[this.DISABLED,this.HIDDEN,this.SHOWING];if(-1===allowedModes.indexOf(value))throw new Error("Illegal mode value for track.");value!==this.internalMode&&(this.internalMode=value,value!==this.HIDDEN||this.mediaElement||this.buildMediaElement(),value===this.SHOWING&&this.showMediaElement(),(value===this.DISABLED||value===this.HIDDEN)&&this.hideMediaElement())},Object.prototype.__defineGetter__?(this.__defineGetter__("mode",this.getMode),this.__defineSetter__("mode",this.setMode)):Object.defineProperty&&Object.defineProperty(this,"mode",{get:this.getMode,set:this.setMode}),this.hideMediaElement=function(){this.mediaElement&&(this.mediaElement.paused||this.mediaElement.pause(),this.mediaElement instanceof HTMLVideoElement&&(this.mediaElement.style.display="none"))},this.showMediaElement=function(){this.mediaElement?(this.mediaElement.parentNode||document.body.appendChild(this.mediaElement),this.mediaElement instanceof HTMLVideoElement&&(this.mediaElement.style.display="block")):(this.buildMediaElement(),document.body.appendChild(this.mediaElement))},this.buildMediaElement=function(){try{this.type.match(/^video\//)?(this.mediaElement=document.createElement("video"),this.mediaElement.className="captionator-mediaElement-"+this.kind,captionator.styleNode(this.mediaElement,this.kind,this.videoNode)):this.type.match(/^audio\//)&&(this.mediaElement=new Audio),this.mediaElement.type=this.type,this.mediaElement.src=this.src,this.mediaElement.load(),this.mediaElement.trackObject=this,this.readyState=captionator.TextTrack.LOADING;var mediaElement=this.mediaElement;this.mediaElement.addEventListener("progress",function(eventData){mediaElement.trackObject.readyState=captionator.TextTrack.LOADING},!1),this.mediaElement.addEventListener("canplaythrough",function(eventData){mediaElement.trackObject.readyState=captionator.TextTrack.LOADED,mediaElement.trackObject.onload.call(mediaElement.trackObject)},!1),this.mediaElement.addEventListener("error",function(eventData){mediaElement.trackObject.readyState=captionator.TextTrack.ERROR,mediaElement.trackObject.mode=this.DISABLED,mediaElement.trackObject.mediaElement=null,mediaElement.trackObject.onerror.call(mediaElement.trackObject,eventData)},!1)}catch(Error){this.readyState=captionator.TextTrack.ERROR,this.mode=this.DISABLED,this.mediaElement=null,this.onerror&&this.onerror.apply(this,Error)}}},captionator.CaptionatorCueStructure=function(cueSource,options){var cueStructureObject=this;this.isTimeDependent=!1,this.cueSource=cueSource,this.options=options,this.processedCue=null,this.toString=function(currentTimestamp){if(options.processCueHTML!==!1){var processLayer=function(layerObject,depth){if(null===cueStructureObject.processedCue){var itemIndex,cueChunk,compositeHTML="";for(itemIndex in layerObject)itemIndex.match(/^\d+$/)&&layerObject.hasOwnProperty(itemIndex)&&(cueChunk=layerObject[itemIndex],cueChunk instanceof Object&&cueChunk.children&&cueChunk.children.length?"v"===cueChunk.token?compositeHTML+='<q data-voice="'+cueChunk.voice.replace(/[\"]/g,"")+"\" class='voice speaker-"+cueChunk.voice.replace(/[^a-z0-9]+/gi,"-").toLowerCase()+"' title=\""+cueChunk.voice.replace(/[\"]/g,"")+'">'+processLayer(cueChunk.children,depth+1)+"</q>":"c"===cueChunk.token?compositeHTML+="<span class='webvtt-class-span "+cueChunk.classes.join(" ")+"'>"+processLayer(cueChunk.children,depth+1)+"</span>":cueChunk.timeIn>0?(null===currentTimestamp||void 0===currentTimestamp||currentTimestamp>0&&currentTimestamp>=cueChunk.timeIn)&&(compositeHTML+="<span class='webvtt-timestamp-span' data-timestamp='"+cueChunk.token+"' data-timestamp-seconds='"+cueChunk.timeIn+"'>"+processLayer(cueChunk.children,depth+1)+"</span>"):compositeHTML+=cueChunk.rawToken+processLayer(cueChunk.children,depth+1)+"</"+cueChunk.token+">":(cueChunk instanceof String||"string"==typeof cueChunk||"number"==typeof cueChunk)&&(compositeHTML+=cueChunk));return cueStructureObject.isTimeDependent||0!==depth||(cueStructureObject.processedCue=compositeHTML),compositeHTML}return cueStructureObject.processedCue};return processLayer(this,0)}return cueSource}},captionator.CaptionatorCueStructure.prototype=[],options.exportObjects&&(window.TextTrack=captionator.TextTrack,window.TextTrackCueList=captionator.TextTrackCueList,window.ActiveTextTrackCueList=captionator.ActiveTextTrackCueList,window.TextTrackCue=captionator.TextTrackCue,window.MediaTrack=captionator.MediaTrack),objectsCreated=!0),[].slice.call(document.getElementsByTagName("video"),0).forEach(function(videoElement){videoElement.addTextTrack=function(id,kind,label,language,src,type,isDefault){var newTrack,allowedKinds=["subtitles","captions","descriptions","captions","metadata","chapters","karaoke","lyrics","tickertext","audiodescription","commentary","alternate","signlanguage"],textKinds=allowedKinds.slice(0,7);if(id="string"==typeof id?id:"",label="string"==typeof label?label:"",language="string"==typeof language?language:"",isDefault="boolean"==typeof isDefault?isDefault:!1,!allowedKinds.filter(function(currentKind){return kind===currentKind?!0:!1}).length)throw captionator.createDOMException(12,"DOMException 12: SYNTAX_ERR: You must use a valid kind when creating a TimedTextTrack.","SYNTAX_ERR");return textKinds.filter(function(currentKind){return kind===currentKind?!0:!1}).length?(newTrack=new captionator.TextTrack(id,kind,label,language,src,null),newTrack?(videoElement.textTracks instanceof Array||(videoElement.textTracks=[]),videoElement.textTracks.push(newTrack),newTrack):!1):(newTrack=new captionator.MediaTrack(id,kind,label,language,src,type,isDefault),newTrack?(videoElement.mediaTracks instanceof Array||(videoElement.mediaTracks=[]),videoElement.mediaTracks.push(newTrack),newTrack):!1)}}),element&&element!==!1&&void 0!==element&&null!==element)if(element instanceof Array)for(elementIndex=0;elementIndex<element.length;elementIndex++)"string"==typeof element[elementIndex]?videoElements=videoElements.concat([].slice.call(document.querySelectorAll(element[elementIndex]),0)):element[elementIndex].constructor===HTMLVideoElement&&videoElements.push(element[elementIndex]);else"string"==typeof element?videoElements=[].slice.call(document.querySelectorAll(element),0):element.constructor===HTMLVideoElement&&videoElements.push(element);else videoElements=[].slice.call(document.getElementsByTagName("video"),0);if(videoElements.length){for(elementIndex=0;elementIndex<videoElements.length;elementIndex++)captionator.processVideoElement(videoElements[elementIndex],defaultLanguage,options);return!0}return!1},processVideoElement:function(videoElement,defaultLanguage,options){var trackList=[],language=navigator.language||navigator.userLanguage;defaultLanguage||language.split("-")[0];if(options=options instanceof Object?options:{},!videoElement.captioned){videoElement._captionatorOptions=options,videoElement.className+=(videoElement.className.length?" ":"")+"captioned",videoElement.captioned=!0,0===videoElement.id.length&&(videoElement.id=captionator.generateID());[].slice.call(videoElement.querySelectorAll("track"),0).forEach(function(trackElement){var sources=null;sources=trackElement.querySelectorAll("source").length>0?trackElement.querySelectorAll("source"):trackElement.getAttribute("src");var trackObject=videoElement.addTextTrack(trackElement.getAttribute("id")||captionator.generateID(),trackElement.getAttribute("kind"),trackElement.getAttribute("label"),trackElement.getAttribute("srclang").split("-")[0],sources,trackElement.getAttribute("type"),trackElement.hasAttribute("default"));trackElement.track=trackObject,trackObject.trackNode=trackElement,trackObject.videoNode=videoElement,trackList.push(trackObject);var trackEnabled=!1;"subtitles"!==trackObject.kind&&"captions"!==trackObject.kind||defaultLanguage!==trackObject.language||!options.enableCaptionsByDefault||trackList.filter(function(trackObject){return"captions"!==trackObject.kind&&"subtitles"!==trackObject.kind||defaultLanguage!==trackObject.language||trackObject.mode!==trackObject.SHOWING?!1:!0}).length||(trackEnabled=!0),"chapters"===trackObject.kind&&defaultLanguage===trackObject.language&&(trackList.filter(function(trackObject){return"chapters"===trackObject.kind&&trackObject.mode===trackObject.SHOWING?!0:!1}).length||(trackEnabled=!0)),"descriptions"===trackObject.kind&&options.enableDescriptionsByDefault===!0&&defaultLanguage===trackObject.language&&(trackList.filter(function(trackObject){return"descriptions"===trackObject.kind&&trackObject.mode===trackObject.SHOWING?!0:!1}).length||(trackEnabled=!0)),trackEnabled===!0&&trackList.forEach(function(trackObject){trackObject.trackNode.hasAttribute("default")&&trackObject.mode===trackObject.SHOWING&&(trackObject.mode=trackObject.HIDDEN)}),trackElement.hasAttribute("default")&&(trackList.filter(function(trackObject){return trackObject.trackNode.hasAttribute("default")&&trackObject.trackNode!==trackElement?!0:!1}).length||(trackEnabled=!0,trackObject.internalDefault=!0)),trackEnabled===!0&&(trackObject.mode=trackObject.SHOWING)}),videoElement.addEventListener("timeupdate",function(eventData){var videoElement=eventData.target;try{videoElement.textTracks.forEach(function(track){track.activeCues.refreshCues.apply(track.activeCues)})}catch(error){}options.renderer instanceof Function?options.renderer.call(captionator,videoElement):captionator.rebuildCaptions(videoElement),captionator.synchroniseMediaElements(videoElement)},!1),window.addEventListener("resize",function(eventData){videoElement._captionator_dirtyBit=!0,captionator.rebuildCaptions(videoElement)},!1),videoElement.addEventListener("play",function(eventData){captionator.synchroniseMediaElements(videoElement)},!1),videoElement.addEventListener("pause",function(eventData){captionator.synchroniseMediaElements(videoElement)},!1),options.enableHighResolution===!0&&window.setInterval(function(){try{videoElement.textTracks.forEach(function(track){track.activeCues.refreshCues.apply(track.activeCues)})}catch(error){}options.renderer instanceof Function?options.renderer.call(captionator,videoElement):captionator.rebuildCaptions(videoElement)},20)}return videoElement},rebuildCaptions:function(videoElement){var trackList=videoElement.textTracks||[],currentTime=(videoElement._captionatorOptions instanceof Object?videoElement._captionatorOptions:{},videoElement.currentTime),compositeActiveCues=[],cuesChanged=!1,activeCueIDs=[],cueSortArray=[];trackList.forEach(function(track,trackIndex){track.mode===track.SHOWING&&track.readyState===captionator.TextTrack.LOADED&&(cueSortArray=[].slice.call(track.activeCues,0),cueSortArray=cueSortArray.sort(function(cueA,cueB){return cueA.startTime>cueB.startTime?-1:1}),compositeActiveCues=compositeActiveCues.concat(cueSortArray))}),activeCueIDs=compositeActiveCues.map(function(cue){return cue.track.id+"."+cue.id+":"+cue.text.toString(currentTime).length}),cuesChanged=!captionator.compareArray(activeCueIDs,videoElement._captionator_previousActiveCues),(cuesChanged||videoElement._captionator_dirtyBit)&&(videoElement._captionator_dirtyBit=!1,videoElement._captionator_availableCueArea=null,videoElement._captionator_previousActiveCues=activeCueIDs,captionator.styleCueCanvas(videoElement),videoElement._containerObject.innerHTML="",compositeActiveCues.forEach(function(cue){var cueNode=document.createElement("div");cueNode.id=String(cue.id).length?cue.id:captionator.generateID(),cueNode.className="captionator-cue",cueNode.innerHTML=cue.text.toString(currentTime),videoElement._containerObject.appendChild(cueNode),captionator.styleCue(cueNode,cue,videoElement)}))},synchroniseMediaElements:function(videoElement){var trackList=videoElement.mediaTracks||[],synchronisationThreshold=(videoElement._captionatorOptions instanceof Object?videoElement._captionatorOptions:{},videoElement.currentTime,.5),synchroniseElement=function(slave,master){try{master.seeking&&slave.pause(),(slave.currentTime<master.currentTime-synchronisationThreshold||slave.currentTime>master.currentTime+synchronisationThreshold)&&(slave.currentTime=master.currentTime),slave.paused&&!master.paused?slave.play():!slave.paused&&master.paused&&slave.pause()}catch(Error){}};trackList.forEach(function(track,trackIndex){track.mode===track.SHOWING&&track.readyState>=captionator.TextTrack.LOADING&&synchroniseElement(track.mediaElement,videoElement)}),videoElement.id&&[].slice.call(document.body.querySelectorAll("*[syncMaster="+videoElement.id+"]"),0).forEach(function(mediaElement,index){("video"===mediaElement.tagName.toLowerCase()||"audio"===mediaElement.tagName.toLowerCase())&&synchroniseElement(mediaElement,videoElement)})},getNodeMetrics:function(DOMNode){var nodeComputedStyle=window.getComputedStyle(DOMNode,null),offsetObject=DOMNode,offsetTop=DOMNode.offsetTop,offsetLeft=DOMNode.offsetLeft,width=DOMNode,height=0,controlHeight=0;for(width=parseInt(nodeComputedStyle.getPropertyValue("width"),10),height=parseInt(nodeComputedStyle.getPropertyValue("height"),10);offsetObject=offsetObject.offsetParent;)offsetTop+=offsetObject.offsetTop,offsetLeft+=offsetObject.offsetLeft;if(DOMNode.hasAttribute("controls")){var UA=navigator.userAgent.toLowerCase();-1!==UA.indexOf("chrome")?controlHeight=32:-1!==UA.indexOf("opera")?controlHeight=25:-1!==UA.indexOf("firefox")?controlHeight=28:-1!==UA.indexOf("ie 9")||-1!==UA.indexOf("ipad")?controlHeight=44:-1!==UA.indexOf("safari")&&(controlHeight=25)}else if(DOMNode._captionatorOptions){var tmpCaptionatorOptions=DOMNode._captionatorOptions;tmpCaptionatorOptions.controlHeight&&(controlHeight=parseInt(tmpCaptionatorOptions.controlHeight,10))}return{left:offsetLeft,top:offsetTop,width:width,height:height,controlHeight:controlHeight}},applyStyles:function(StyleNode,styleObject){for(var styleName in styleObject)({}).hasOwnProperty.call(styleObject,styleName)&&(StyleNode.style[styleName]=styleObject[styleName])},checkDirection:function(text){var ltrChars="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",rtlChars="֑-߿יִ-﷽ﹰ-ﻼ",ltrDirCheckRe=new RegExp("^[^"+rtlChars+"]*["+ltrChars+"]"),rtlDirCheckRe=new RegExp("^[^"+ltrChars+"]*["+rtlChars+"]");return rtlDirCheckRe.test(text)?"rtl":ltrDirCheckRe.test(text)?"ltr":""},styleCue:function(DOMNode,cueObject,videoElement){var cueSize,cueAlignment,baseFontSize,basePixelFontSize,baseLineHeight,tmpHeightExclusions,videoHeightInLines,videoWidthInLines,pixelLineHeight,verticalPixelLineHeight,characterX,characterY,videoMetrics,cueX=0,cueY=0,cueWidth=0,cueHeight=0,cuePaddingLR=0,cuePaddingTB=0,charactersPerLine=0,characterCount=0,characters=0,lineCount=0,finalLineCharacterCount=0,finalLineCharacterHeight=0,currentLine=0,characterPosition=0,options=videoElement._captionatorOptions||{},internalTextPosition=50,textBoundingBoxWidth=0,textBoundingBoxPercentage=0,autoSize=!0,spanify=function(DOMNode){var nodeIndex,currentNode,currentNodeValue,replacementFragment,stringHasLength=function(textString){return!!textString.length},spanCode="<span class='captionator-cue-character'>",characterCount=0,styleSpan=function(span){characterCount++,captionator.applyStyles(span,{display:"block",lineHeight:"auto",height:basePixelFontSize+"px",width:verticalPixelLineHeight+"px",textAlign:"center"})};for(nodeIndex in DOMNode.childNodes)DOMNode.childNodes.hasOwnProperty(nodeIndex)&&(currentNode=DOMNode.childNodes[nodeIndex],3===currentNode.nodeType?(replacementFragment=document.createDocumentFragment(),currentNodeValue=currentNode.nodeValue,replacementFragment.appendChild(document.createElement("span")),replacementFragment.childNodes[0].innerHTML=spanCode+currentNodeValue.split(/(.)/).filter(stringHasLength).join("</span>"+spanCode)+"</span>",[].slice.call(replacementFragment.querySelectorAll("span.captionator-cue-character"),0).forEach(styleSpan),currentNode.parentNode.replaceChild(replacementFragment,currentNode)):1===DOMNode.childNodes[nodeIndex].nodeType&&(characterCount+=spanify(DOMNode.childNodes[nodeIndex])));return characterCount};if(videoMetrics=captionator.getNodeMetrics(videoElement),videoElement._captionator_availableCueArea||(videoElement._captionator_availableCueArea={bottom:videoMetrics.height-videoMetrics.controlHeight,right:videoMetrics.width,top:0,left:0,height:videoMetrics.height-videoMetrics.controlHeight,width:videoMetrics.width}),"horizontal"===cueObject.direction&&(captionator.applyStyles(DOMNode,{width:"auto",position:"static",display:"inline-block",padding:"1em"}),textBoundingBoxWidth=parseInt(DOMNode.offsetWidth,10),textBoundingBoxPercentage=Math.floor(textBoundingBoxWidth/videoElement._captionator_availableCueArea.width*100),textBoundingBoxPercentage=100>=textBoundingBoxPercentage?textBoundingBoxPercentage:100),baseFontSize=videoMetrics.height*(fontSizeVerticalPercentage/100)/96*72,baseFontSize=baseFontSize>=minimumFontSize?baseFontSize:minimumFontSize,basePixelFontSize=Math.floor(baseFontSize/72*96),baseLineHeight=Math.floor(baseFontSize*lineHeightRatio),baseLineHeight=baseLineHeight>minimumLineHeight?baseLineHeight:minimumLineHeight,pixelLineHeight=Math.ceil(baseLineHeight/72*96),verticalPixelLineHeight=pixelLineHeight,pixelLineHeight*Math.floor(videoMetrics.height/pixelLineHeight)<videoMetrics.height&&(pixelLineHeight=Math.floor(videoMetrics.height/Math.floor(videoMetrics.height/pixelLineHeight)),baseLineHeight=Math.ceil(pixelLineHeight/96*72)),pixelLineHeight*Math.floor(videoMetrics.width/pixelLineHeight)<videoMetrics.width&&(verticalPixelLineHeight=Math.ceil(videoMetrics.width/Math.floor(videoMetrics.width/pixelLineHeight))),videoHeightInLines=Math.floor(videoElement._captionator_availableCueArea.height/pixelLineHeight),videoWidthInLines=Math.floor(videoElement._captionator_availableCueArea.width/verticalPixelLineHeight),0===parseFloat(String(cueObject.size).replace(/[^\d\.]/gi,""))?options.sizeCuesByTextBoundingBox===!0?cueSize=textBoundingBoxPercentage:(cueSize=100,autoSize=!1):(autoSize=!1,cueSize=parseFloat(String(cueObject.size).replace(/[^\d\.]/gi,"")),cueSize=100>=cueSize?cueSize:100),cuePaddingLR="horizontal"===cueObject.direction?Math.floor(.01*videoMetrics.width):0,cuePaddingTB="horizontal"===cueObject.direction?0:Math.floor(.01*videoMetrics.height),"auto"===cueObject.linePosition?cueObject.linePosition="horizontal"===cueObject.direction?videoHeightInLines:videoWidthInLines:String(cueObject.linePosition).match(/\%/)&&(cueObject.snapToLines=!1,cueObject.linePosition=parseFloat(String(cueObject.linePosition).replace(/\%/gi,""))),"horizontal"===cueObject.direction)cueHeight=pixelLineHeight,"auto"!==cueObject.textPosition&&autoSize&&(internalTextPosition=parseFloat(String(cueObject.textPosition).replace(/[^\d\.]/gi,"")),cueSize-internalTextPosition>textBoundingBoxPercentage?cueSize-=internalTextPosition:cueSize=textBoundingBoxPercentage),cueWidth=cueObject.snapToLines===!0?videoElement._captionator_availableCueArea.width*(cueSize/100):videoMetrics.width*(cueSize/100),"auto"===cueObject.textPosition?cueX=(videoElement._captionator_availableCueArea.right-cueWidth)/2+videoElement._captionator_availableCueArea.left:(internalTextPosition=parseFloat(String(cueObject.textPosition).replace(/[^\d\.]/gi,"")),cueX=(videoElement._captionator_availableCueArea.right-cueWidth)*(internalTextPosition/100)+videoElement._captionator_availableCueArea.left),cueObject.snapToLines===!0?cueY=(videoHeightInLines-1)*pixelLineHeight+videoElement._captionator_availableCueArea.top:(tmpHeightExclusions=videoMetrics.controlHeight+pixelLineHeight+2*cuePaddingTB,cueY=(videoMetrics.height-tmpHeightExclusions)*(cueObject.linePosition/100));else{if(cueY=videoElement._captionator_availableCueArea.top,cueX=videoElement._captionator_availableCueArea.right-verticalPixelLineHeight,cueWidth=verticalPixelLineHeight,cueHeight=videoElement._captionator_availableCueArea.height*(cueSize/100),characterCount=spanify(DOMNode),characters=[].slice.call(DOMNode.querySelectorAll("span.captionator-cue-character"),0),charactersPerLine=Math.floor((cueHeight-2*cuePaddingTB)/basePixelFontSize),cueWidth=Math.ceil(characterCount/charactersPerLine)*verticalPixelLineHeight,lineCount=Math.ceil(characterCount/charactersPerLine),finalLineCharacterCount=characterCount-charactersPerLine*(lineCount-1),finalLineCharacterHeight=finalLineCharacterCount*basePixelFontSize,cueObject.snapToLines===!0)cueX="vertical-lr"===cueObject.direction?videoElement._captionator_availableCueArea.left:videoElement._captionator_availableCueArea.right-cueWidth;else{var temporaryWidthExclusions=cueWidth+2*cuePaddingLR;cueX="vertical-lr"===cueObject.direction?(videoMetrics.width-temporaryWidthExclusions)*(cueObject.linePosition/100):videoMetrics.width-temporaryWidthExclusions-(videoMetrics.width-temporaryWidthExclusions)*(cueObject.linePosition/100)}"auto"===cueObject.textPosition?cueY=(videoElement._captionator_availableCueArea.bottom-cueHeight)/2+videoElement._captionator_availableCueArea.top:(cueObject.textPosition=parseFloat(String(cueObject.textPosition).replace(/[^\d\.]/gi,"")),cueY=(videoElement._captionator_availableCueArea.bottom-cueHeight)*(cueObject.textPosition/100)+videoElement._captionator_availableCueArea.top),currentLine=0,characterPosition=0,characterX=0,characterY=0,characters.forEach(function(characterSpan,characterCount){characterX="vertical-lr"===cueObject.direction?verticalPixelLineHeight*currentLine:cueWidth-verticalPixelLineHeight*(currentLine+1),"start"===cueObject.alignment||"start"!==cueObject.alignment&&lineCount-1>currentLine?characterY=characterPosition*basePixelFontSize+cuePaddingTB:"end"===cueObject.alignment?characterY=characterPosition*basePixelFontSize-basePixelFontSize+(cueHeight+2*cuePaddingTB-finalLineCharacterHeight):"middle"===cueObject.alignment&&(characterY=(cueHeight-2*cuePaddingTB-finalLineCharacterHeight)/2+characterPosition*basePixelFontSize),captionator.applyStyles(characterSpan,{position:"absolute",top:characterY+"px",left:characterX+"px"}),characterPosition>=charactersPerLine-1?(characterPosition=0,
currentLine++):characterPosition++})}if("horizontal"===cueObject.direction&&(cueAlignment="rtl"===captionator.checkDirection(String(cueObject.text))?{start:"right",middle:"center",end:"left"}[cueObject.alignment]:{start:"left",middle:"center",end:"right"}[cueObject.alignment]),captionator.applyStyles(DOMNode,{position:"absolute",overflow:"hidden",width:cueWidth+"px",height:cueHeight+"px",top:cueY+"px",left:cueX+"px",padding:cuePaddingTB+"px "+cuePaddingLR+"px",textAlign:cueAlignment,backgroundColor:"rgba("+cueBackgroundColour.join(",")+")",direction:captionator.checkDirection(String(cueObject.text)),lineHeight:baseLineHeight+"pt",boxSizing:"border-box"}),"vertical"===cueObject.direction||"vertical-lr"===cueObject.direction)cueX-videoElement._captionator_availableCueArea.left-videoElement._captionator_availableCueArea.left>=videoElement._captionator_availableCueArea.right-(cueX+cueWidth)?videoElement._captionator_availableCueArea.right=cueX:videoElement._captionator_availableCueArea.left=cueX+cueWidth,videoElement._captionator_availableCueArea.width=videoElement._captionator_availableCueArea.right-videoElement._captionator_availableCueArea.left;else{if(DOMNode.scrollHeight>1.2*DOMNode.offsetHeight)if(cueObject.snapToLines){for(var upwardAjustmentInLines=0;DOMNode.scrollHeight>1.2*DOMNode.offsetHeight;)cueHeight+=pixelLineHeight,DOMNode.style.height=cueHeight+"px",upwardAjustmentInLines++;cueY-=upwardAjustmentInLines*pixelLineHeight,DOMNode.style.top=cueY+"px"}else{DOMNode.scrollHeight-cueHeight;cueHeight=DOMNode.scrollHeight+cuePaddingTB,tmpHeightExclusions=videoMetrics.controlHeight+cueHeight+2*cuePaddingTB,cueY=(videoMetrics.height-tmpHeightExclusions)*(cueObject.linePosition/100),DOMNode.style.height=cueHeight+"px",DOMNode.style.top=cueY+"px"}cueY-videoElement._captionator_availableCueArea.top-videoElement._captionator_availableCueArea.top>=videoElement._captionator_availableCueArea.bottom-(cueY+cueHeight)&&videoElement._captionator_availableCueArea.bottom>cueY?videoElement._captionator_availableCueArea.bottom=cueY:videoElement._captionator_availableCueArea.top<cueY+cueHeight&&(videoElement._captionator_availableCueArea.top=cueY+cueHeight),videoElement._captionator_availableCueArea.height=videoElement._captionator_availableCueArea.bottom-videoElement._captionator_availableCueArea.top}if(options.debugMode){var debugCanvas,debugContext,generateDebugCanvas=function(){debugCanvas||(videoElement._captionatorDebugCanvas?(debugCanvas=videoElement._captionatorDebugCanvas,debugContext=videoElement._captionatorDebugContext):(debugCanvas=document.createElement("canvas"),debugCanvas.setAttribute("width",videoMetrics.width),debugCanvas.setAttribute("height",videoMetrics.height-videoMetrics.controlHeight),document.body.appendChild(debugCanvas),captionator.applyStyles(debugCanvas,{position:"absolute",top:videoMetrics.top+"px",left:videoMetrics.left+"px",width:videoMetrics.width+"px",height:videoMetrics.height-videoMetrics.controlHeight+"px",zIndex:3e3}),debugContext=debugCanvas.getContext("2d"),videoElement._captionatorDebugCanvas=debugCanvas,videoElement._captionatorDebugContext=debugContext))},clearDebugCanvas=function(){generateDebugCanvas(),debugCanvas.setAttribute("width",videoMetrics.width)},drawLines=function(){var lineIndex;for(generateDebugCanvas(),debugContext.strokeStyle="rgba(255,0,0,0.5)",debugContext.lineWidth=1,debugContext.beginPath(),lineIndex=0;videoHeightInLines>lineIndex;lineIndex++)debugContext.moveTo(.5,lineIndex*pixelLineHeight+.5),debugContext.lineTo(videoMetrics.width,lineIndex*pixelLineHeight+.5);for(debugContext.closePath(),debugContext.stroke(),debugContext.beginPath(),debugContext.strokeStyle="rgba(0,255,0,0.5)",lineIndex=videoWidthInLines;lineIndex>=0;lineIndex--)debugContext.moveTo(videoMetrics.width-lineIndex*verticalPixelLineHeight-.5,-.5),debugContext.lineTo(videoMetrics.width-lineIndex*verticalPixelLineHeight-.5,videoMetrics.height);for(debugContext.closePath(),debugContext.stroke(),debugContext.beginPath(),debugContext.strokeStyle="rgba(255,255,0,0.5)",lineIndex=0;videoWidthInLines>=lineIndex;lineIndex++)debugContext.moveTo(lineIndex*verticalPixelLineHeight+.5,-.5),debugContext.lineTo(lineIndex*verticalPixelLineHeight+.5,videoMetrics.height);debugContext.stroke(),videoElement.linesDrawn=!0},drawAvailableArea=function(){generateDebugCanvas(),debugContext.fillStyle="rgba(100,100,255,0.5)",debugContext.fillRect(videoElement._captionator_availableCueArea.left,videoElement._captionator_availableCueArea.top,videoElement._captionator_availableCueArea.right,videoElement._captionator_availableCueArea.bottom),debugContext.stroke()};clearDebugCanvas(),drawAvailableArea(),drawLines()}},styleCueCanvas:function(videoElement){var baseFontSize,baseLineHeight,containerObject,containerID,options=videoElement._captionatorOptions instanceof Object?videoElement._captionatorOptions:{};if(!(videoElement instanceof HTMLVideoElement))throw new Error("Cannot style a cue canvas for a non-video node!");if(videoElement._containerObject&&(containerObject=videoElement._containerObject,containerID=containerObject.id),containerObject)containerObject.parentNode||document.body.appendChild(containerObject);else{if(containerObject=document.createElement("div"),containerObject.className="captionator-cue-canvas",containerID=captionator.generateID(),containerObject.id=containerID,options.appendCueCanvasTo){var canvasParentNode=null;if(options.appendCueCanvasTo instanceof HTMLElement)canvasParentNode=options.appendCueCanvasTo;else if("string"==typeof options.appendCueCanvasTo)try{var canvasSearchResult=document.querySelectorAll(options.appendCueCanvasTo);if(!(canvasSearchResult.length>0))throw null;canvasParentNode=canvasSearchResult[0]}catch(error){canvasParentNode=document.body,options.appendCueCanvasTo=!1}else canvasParentNode=document.body,options.appendCueCanvasTo=!1;canvasParentNode.appendChild(containerObject)}else document.body.appendChild(containerObject);videoElement._containerObject=containerObject,containerObject.setAttribute("aria-live","polite"),containerObject.setAttribute("aria-atomic","true")}if(-1===String(videoElement.getAttribute("aria-describedby")).indexOf(containerID)){var existingValue=videoElement.hasAttribute("aria-describedby")?videoElement.getAttribute("aria-describedby")+" ":"";videoElement.setAttribute("aria-describedby",existingValue+containerID)}var videoMetrics=captionator.getNodeMetrics(videoElement);baseFontSize=videoMetrics.height*(fontSizeVerticalPercentage/100)/96*72,baseFontSize=baseFontSize>=minimumFontSize?baseFontSize:minimumFontSize,baseLineHeight=Math.floor(baseFontSize*lineHeightRatio),baseLineHeight=baseLineHeight>minimumLineHeight?baseLineHeight:minimumLineHeight,captionator.applyStyles(containerObject,{position:"absolute",overflow:"hidden",zIndex:100,height:videoMetrics.height-videoMetrics.controlHeight+"px",width:videoMetrics.width+"px",top:(options.appendCueCanvasTo?0:videoMetrics.top)+"px",left:(options.appendCueCanvasTo?0:videoMetrics.left)+"px",color:"white",fontFamily:"Verdana, Helvetica, Arial, sans-serif",fontSize:baseFontSize+"pt",lineHeight:baseLineHeight+"pt",boxSizing:"border-box"}),window.navigator.userAgent.toLowerCase().indexOf("chrome/10")>-1&&(containerObject.style.backgroundColor="rgba(0,0,0,0.01"+Math.random().toString().replace(".","")+")")},parseCaptions:function(captionData,options){options=options instanceof Object?options:{};var fileType="",subtitles=[],cueStyles="",cueDefaults=[],SUBTimestampParser=/^(\d{2})?:?(\d{2}):(\d{2})\.(\d+)\,(\d{2})?:?(\d{2}):(\d{2})\.(\d+)\s*(.*)/,SBVTimestampParser=/^(\d+)?:?(\d{2}):(\d{2})\.(\d+)\,(\d+)?:?(\d{2}):(\d{2})\.(\d+)\s*(.*)/,SRTTimestampParser=/^(\d{2})?:?(\d{2}):(\d{2})[\.\,](\d+)\s+\-\-\>\s+(\d{2})?:?(\d{2}):(\d{2})[\.\,](\d+)\s*(.*)/,SRTChunkTimestampParser=/(\d{2})?:?(\d{2}):(\d{2})[\.\,](\d+)/,GoogleTimestampParser=/^([\d\.]+)\s+\+([\d\.]+)\s*(.*)/,LRCTimestampParser=/^\[(\d{2})?:?(\d{2})\:(\d{2})\.(\d{2})\]\s*(.*?)$/i,WebVTTDEFAULTSCueParser=/^(DEFAULTS|DEFAULT)\s+\-\-\>\s+(.*)/g,WebVTTSTYLECueParser=/^(STYLE|STYLES)\s+\-\-\>\s*\n([\s\S]*)/g,WebVTTCOMMENTCueParser=/^(COMMENT|COMMENTS)\s+\-\-\>\s+(.*)/g;if(captionData){var processCaptionHTML=function(inputHTML){var splitIndex,currentToken,currentContext,chunkTimestamp,timeData,cueStructure=new captionator.CaptionatorCueStructure(inputHTML,options),cueSplit=[],stack=[],stackIndex=0,hasRealTextContent=function(textInput){return!!textInput.replace(/[^a-z0-9]+/gi,"").length};cueSplit=inputHTML.split(/(<\/?[^>]+>)/gi).filter(function(cuePortionText){return!!cuePortionText.replace(/\s*/gi,"")}),currentContext=cueStructure;for(splitIndex in cueSplit)if(cueSplit.hasOwnProperty(splitIndex))if(currentToken=cueSplit[splitIndex],"<"===currentToken.substr(0,1)){if("/"===currentToken.substr(1,1)){var TagName=currentToken.substr(2).split(/[\s>]+/g)[0];if(stack.length>0){var stackScanDepth=0;for(stackIndex=stack.length-1;stackIndex>=0;stackIndex--){var parentContext=stack[stackIndex][stack[stackIndex].length-1];if(stackScanDepth=stackIndex,parentContext.token===TagName)break}currentContext=stack[stackScanDepth],stack=stack.slice(0,stackScanDepth)}}else if(currentToken.substr(1).match(SRTChunkTimestampParser)||currentToken.match(/^<v\s+[^>]+>/i)||currentToken.match(/^<c[a-z0-9\-\_\.]+>/)||currentToken.match(/^<(b|i|u|ruby|rt)>/)||options.sanitiseCueHTML!==!1){var tmpObject={token:currentToken.replace(/[<\/>]+/gi,"").split(/[\s\.]+/)[0],rawToken:currentToken,children:[]};"v"===tmpObject.token?tmpObject.voice=currentToken.match(/^<v\s*([^>]+)>/i)[1]:"c"===tmpObject.token?tmpObject.classes=currentToken.replace(/[<\/>\s]+/gi,"").split(/[\.]+/gi).slice(1).filter(hasRealTextContent):(chunkTimestamp=tmpObject.rawToken.match(SRTChunkTimestampParser))&&(cueStructure.isTimeDependent=!0,timeData=chunkTimestamp.slice(1),tmpObject.timeIn=parseInt(60*(timeData[0]||0)*60,10)+parseInt(60*(timeData[1]||0),10)+parseInt(timeData[2]||0,10)+parseFloat("0."+(timeData[3]||0))),currentContext.push(tmpObject),stack.push(currentContext),currentContext=tmpObject.children}}else options.sanitiseCueHTML!==!1&&(currentToken=currentToken.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\&/g,"&amp;"),options.ignoreWhitespace||(currentToken=currentToken.replace(/\n+/g,"<br />"))),currentContext.push(currentToken);return cueStructure},parseCaptionChunk=function(subtitleElement,objectCount){var subtitleParts,timeIn,timeOut,html,timeData,subtitlePartIndex,id,specialCueData,timestampMatch,tmpCue,cueSettings="";if(specialCueData=WebVTTDEFAULTSCueParser.exec(subtitleElement))return cueDefaults=specialCueData.slice(2).join(""),cueDefaults=cueDefaults.split(/\s+/g).filter(function(def){return def&&!!def.length}),null;if(specialCueData=WebVTTSTYLECueParser.exec(subtitleElement))return cueStyles+=specialCueData[specialCueData.length-1],null;if(specialCueData=WebVTTCOMMENTCueParser.exec(subtitleElement))return null;for(subtitleParts="LRC"===fileType?[subtitleElement.substr(0,subtitleElement.indexOf("]")),subtitleElement.substr(subtitleElement.indexOf("]")+1)]:subtitleElement.split(/\n/g);!subtitleParts[0].replace(/\s+/gi,"").length&&subtitleParts.length>0;)subtitleParts.shift();for(id=subtitleParts[0].match(/^\s*[a-z0-9]+\s*$/gi)?String(subtitleParts.shift().replace(/\s*/gi,"")):objectCount,subtitlePartIndex=0;subtitlePartIndex<subtitleParts.length;subtitlePartIndex++){var timestamp=subtitleParts[subtitlePartIndex];(timestampMatch=SRTTimestampParser.exec(timestamp))||(timestampMatch=SUBTimestampParser.exec(timestamp))||(timestampMatch=SBVTimestampParser.exec(timestamp))?(timeData=timestampMatch.slice(1),timeIn=parseInt(60*(timeData[0]||0)*60,10)+parseInt(60*(timeData[1]||0),10)+parseInt(timeData[2]||0,10)+parseFloat("0."+(timeData[3]||0)),timeOut=parseInt(60*(timeData[4]||0)*60,10)+parseInt(60*(timeData[5]||0),10)+parseInt(timeData[6]||0,10)+parseFloat("0."+(timeData[7]||0)),timeData[8]&&(cueSettings=timeData[8])):(timestampMatch=GoogleTimestampParser.exec(timestamp))&&(timeData=timestampMatch.slice(1),timeIn=parseFloat(timeData[0]),timeOut=timeIn+parseFloat(timeData[1]),timeData[2]&&(cueSettings=timeData[2])),subtitleParts=subtitleParts.slice(0,subtitlePartIndex).concat(subtitleParts.slice(subtitlePartIndex+1));break}if(!timeIn&&!timeOut)return null;var compositeCueSettings=cueDefaults.reduce(function(previous,current,index,array){return previous[current.split(":")[0]]=current.split(":")[1],previous},{});compositeCueSettings=cueSettings.split(/\s+/g).filter(function(set){return set&&!!set.length}).reduce(function(previous,current,index,array){return previous[current.split(":")[0]]=current.split(":")[1],previous},compositeCueSettings),cueSettings="";for(var key in compositeCueSettings)compositeCueSettings.hasOwnProperty(key)&&(cueSettings+=cueSettings.length?" ":"",cueSettings+=key+":"+compositeCueSettings[key]);return html=options.processCueHTML===!1?subtitleParts.join("\n"):processCaptionHTML(subtitleParts.join("\n")),tmpCue=new captionator.TextTrackCue(id,timeIn,timeOut,html,cueSettings,!1,null),tmpCue.styleData=cueStyles,tmpCue};return subtitles=captionData.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),LRCTimestampParser.exec(captionData)?(subtitles=subtitles.split(/\n+/g),fileType="LRC"):subtitles=subtitles.split(/\n\n+/g),subtitles=subtitles.filter(function(lineGroup){return lineGroup.match(/^WEBVTT(\s*FILE)?/gi)?(fileType="WebVTT",!1):lineGroup.replace(/\s*/gi,"").length?!0:!1}).map(parseCaptionChunk).filter(function(cue){return null!==cue?!0:!1})}throw new Error("Required parameter captionData not supplied.")}};window.captionator=captionator}(),function(window,undefined){function createFlags(flags){var i,length,object=flagsCache[flags]={};for(flags=flags.split(/\s+/),i=0,length=flags.length;length>i;i++)object[flags[i]]=!0;return object}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:jQuery.isNumeric(data)?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){for(var name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery._data(elem,deferDataKey);!defer||"queue"!==src&&jQuery._data(elem,queueDataKey)||"mark"!==src&&jQuery._data(elem,markDataKey)||setTimeout(function(){jQuery._data(elem,queueDataKey)||jQuery._data(elem,markDataKey)||(jQuery.removeData(elem,deferDataKey,!0),defer.fire())},0)}function returnFalse(){return!1}function returnTrue(){return!0}function isDisconnected(node){return!node||!node.parentNode||11===node.parentNode.nodeType}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep});if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem,i){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function root(elem,cur){return jQuery.nodeName(elem,"table")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function cloneFixAttributes(src,dest){var nodeName;1===dest.nodeType&&(dest.clearAttributes&&dest.clearAttributes(),dest.mergeAttributes&&dest.mergeAttributes(src),nodeName=dest.nodeName.toLowerCase(),"object"===nodeName?dest.outerHTML=src.outerHTML:"input"!==nodeName||"checkbox"!==src.type&&"radio"!==src.type?"option"===nodeName?dest.selected=src.defaultSelected:"input"===nodeName||"textarea"===nodeName?dest.defaultValue=src.defaultValue:"script"===nodeName&&dest.text!==src.text&&(dest.text=src.text):(src.checked&&(dest.defaultChecked=dest.checked=src.checked),dest.value!==src.value&&(dest.value=src.value)),dest.removeAttribute(jQuery.expando),dest.removeAttribute("_submit_attached"),dest.removeAttribute("_change_attached"))}function getAll(elem){return"undefined"!=typeof elem.getElementsByTagName?elem.getElementsByTagName("*"):"undefined"!=typeof elem.querySelectorAll?elem.querySelectorAll("*"):[]}function fixDefaultChecked(elem){("checkbox"===elem.type||"radio"===elem.type)&&(elem.defaultChecked=elem.checked)}function findInputs(elem){var nodeName=(elem.nodeName||"").toLowerCase();"input"===nodeName?fixDefaultChecked(elem):"script"!==nodeName&&"undefined"!=typeof elem.getElementsByTagName&&jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}function shimCloneNode(elem){var div=document.createElement("div");return safeFragment.appendChild(div),div.innerHTML=elem.outerHTML,div.firstChild}function getWidthOrHeight(elem,name,extra){var val="width"===name?elem.offsetWidth:elem.offsetHeight,i="width"===name?1:0,len=4;if(val>0){if("border"!==extra)for(;len>i;i+=2)extra||(val-=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0),"margin"===extra?val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0:val-=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0;return val+"px"}if(val=curCSS(elem,name),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;if(val=parseFloat(val)||0,extra)for(;len>i;i+=2)val+=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0,"padding"!==extra&&(val+=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0),"margin"===extra&&(val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0);return val+"px"}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if("string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*"),jQuery.isFunction(func))for(var dataType,list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length;length>i;i++)dataType=dataTypes[i],placeBefore=/^\+/.test(dataType),placeBefore&&(dataType=dataType.substr(1)||"*"),list=structure[dataType]=structure[dataType]||[],list[placeBefore?"unshift":"push"](func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0],inspected=inspected||{},inspected[dataType]=!0;for(var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters;length>i&&(executeOnly||!selection);i++)selection=list[i](options,originalOptions,jqXHR),"string"==typeof selection&&(!executeOnly||inspected[selection]?selection=undefined:(options.dataTypes.unshift(selection),selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)));return!executeOnly&&selection||inspected["*"]||(selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected)),selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);deep&&jQuery.extend(!0,target,deep)}function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);for(;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("content-type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response){s.dataFilter&&(response=s.dataFilter(response,s.dataType));var i,key,tmp,prev,conversion,conv,conv1,conv2,dataTypes=s.dataTypes,converters={},length=dataTypes.length,current=dataTypes[0];for(i=1;length>i;i++){if(1===i)for(key in s.converters)"string"==typeof key&&(converters[key.toLowerCase()]=s.converters[key]);if(prev=current,current=dataTypes[i],"*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conversion=prev+" "+current,conv=converters[conversion]||converters["* "+current],!conv){conv2=undefined;for(conv1 in converters)if(tmp=conv1.split(" "),(tmp[0]===prev||"*"===tmp[0])&&(conv2=converters[tmp[1]+" "+current])){conv1=converters[conv1],conv1===!0?conv=conv2:conv2===!0&&(conv=conv1);break}}conv||conv2||jQuery.error("No conversion from "+conversion.replace(" "," to ")),conv!==!0&&(response=conv?conv(response):conv2(conv1(response)))}}return response}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(clearFxNow,0),fxNow=jQuery.now()}function clearFxNow(){fxNow=undefined}function genFx(type,num){var obj={};return jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type}),obj}function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");elem.remove(),("none"===display||""===display)&&(iframe||(iframe=document.createElement("iframe"),iframe.frameBorder=iframe.width=iframe.height=0),body.appendChild(iframe),iframeDoc&&iframe.createElement||(iframeDoc=(iframe.contentWindow||iframe.contentDocument).document,iframeDoc.write((jQuery.support.boxModel?"<!doctype html>":"")+"<html><body>"),iframeDoc.close()),elem=iframeDoc.createElement(nodeName),iframeDoc.body.appendChild(elem),display=jQuery.css(elem,"display"),body.removeChild(iframe)),elemdisplay[nodeName]=display}return elemdisplay[nodeName]}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var document=window.document,navigator=window.navigator,location=window.location,jQuery=function(){function doScrollCheck(){if(!jQuery.isReady){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(doScrollCheck,1)}jQuery.ready()}}var rootjQuery,browserMatch,readyList,DOMContentLoaded,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},_jQuery=window.jQuery,_$=window.$,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/gi,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},userAgent=navigator.userAgent,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};return jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector)return this;if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;if("body"===selector&&!context&&document.body)return this.context=document,this[0]=document.body,this.selector=selector,this.length=1,this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:quickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1])return context=context instanceof jQuery?context[0]:context,doc=context?context.ownerDocument||context:document,ret=rsingleTag.exec(selector),ret?jQuery.isPlainObject(context)?(selector=[document.createElement(ret[1])],jQuery.fn.attr.call(selector,context,!0)):selector=[doc.createElement(ret[1])]:(ret=jQuery.buildFragment([match[1]],[doc]),selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes),jQuery.merge(this,selector);if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=this.constructor();return jQuery.isArray(elems)?push.apply(ret,elems):jQuery.merge(ret,elems),ret.prevObject=this,ret.context=this.context,"find"===name?ret.selector=this.selector+(this.selector?" ":"")+selector:name&&(ret.selector=this.selector+"."+name+"("+selector+")"),ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.bindReady(),readyList.add(fn),this},eq:function(i){return i=+i,-1===i?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0&&!--jQuery.readyWait||wait!==!0&&!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready,1);if(jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0)return;readyList.fireWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")}},bindReady:function(){if(!readyList){if(readyList=jQuery.Callbacks("once memory"),"complete"===document.readyState)return setTimeout(jQuery.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",jQuery.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",jQuery.ready);var toplevel=!1;try{toplevel=null==window.frameElement}catch(e){}document.documentElement.doScroll&&toplevel&&doScrollCheck()}}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseJSON:function(data){return"string"==typeof data&&data?(data=jQuery.trim(data),window.JSON&&window.JSON.parse?window.JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void jQuery.error("Invalid JSON: "+data)):null},parseXML:function(data){if("string"!=typeof data||!data)return null;var xml,tmp;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&rnotwhite.test(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args)if(isObj){for(name in object)if(callback.apply(object[name],args)===!1)break}else for(;length>i&&callback.apply(object[i++],args)!==!1;);else if(isObj){for(name in object)if(callback.call(object[name],name,object[name])===!1)break}else for(;length>i&&callback.call(object[i],i,object[i++])!==!1;);return object},trim:trim?function(text){return null==text?"":trim.call(text)}:function(text){return null==text?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},makeArray:function(array,results){var ret=results||[];if(null!=array){var type=jQuery.type(array);null==array.length||"string"===type||"function"===type||"regexp"===type||jQuery.isWindow(array)?push.call(ret,array):jQuery.merge(ret,array)}return ret},inArray:function(elem,array,i){var len;if(array){if(indexOf)return indexOf.call(array,elem,i);for(len=array.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in array&&array[i]===elem)return i;
}return-1},merge:function(first,second){var i=first.length,j=0;if("number"==typeof second.length)for(var l=second.length;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var retVal,ret=[];inv=!!inv;for(var i=0,length=elems.length;length>i;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&"number"==typeof length&&(length>0&&elems[0]&&elems[length-1]||0===length||jQuery.isArray(elems));if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);else for(key in elems)value=callback(elems[key],key,arg),null!=value&&(ret[ret.length]=value);return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){if("string"==typeof context){var tmp=fn[context];context=fn,fn=tmp}if(!jQuery.isFunction(fn))return undefined;var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)))};return proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++,proxy},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=null==key,i=0,length=elems.length;if(key&&"object"==typeof key){for(i in key)jQuery.access(elems,fn,i,key[i],1,emptyGet,value);chainable=1}else if(value!==undefined){if(exec=pass===undefined&&jQuery.isFunction(value),bulk&&(exec?(exec=fn,fn=function(elem,key,value){return exec.call(jQuery(elem),value)}):(fn.call(elems,value),fn=null)),fn)for(;length>i;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);chainable=1}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},browser:{}}),jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),browserMatch=jQuery.uaMatch(userAgent),browserMatch.browser&&(jQuery.browser[browserMatch.browser]=!0,jQuery.browser.version=browserMatch.version),jQuery.browser.webkit&&(jQuery.browser.safari=!0),rnotwhite.test(" ")&&(trimLeft=/^[\s\xA0]+/,trimRight=/[\s\xA0]+$/),rootjQuery=jQuery(document),document.addEventListener?DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),jQuery.ready()}:document.attachEvent&&(DOMContentLoaded=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",DOMContentLoaded),jQuery.ready())}),jQuery}(),flagsCache={};jQuery.Callbacks=function(flags){flags=flags?flagsCache[flags]||createFlags(flags):{};var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=[],add=function(args){var i,length,elem,type;for(i=0,length=args.length;length>i;i++)elem=args[i],type=jQuery.type(elem),"array"===type?add(elem):"function"===type&&(flags.unique&&self.has(elem)||list.push(elem))},fire=function(context,args){for(args=args||[],memory=!flags.memory||[context,args],fired=!0,firing=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(context,args)===!1&&flags.stopOnFalse){memory=!0;break}firing=!1,list&&(flags.once?memory===!0?self.disable():list=[]:stack&&stack.length&&(memory=stack.shift(),self.fireWith(memory[0],memory[1])))},self={add:function(){if(list){var length=list.length;add(arguments),firing?firingLength=list.length:memory&&memory!==!0&&(firingStart=length,fire(memory[0],memory[1]))}return this},remove:function(){if(list)for(var args=arguments,argIndex=0,argLength=args.length;argLength>argIndex;argIndex++)for(var i=0;i<list.length&&(args[argIndex]!==list[i]||(firing&&firingLength>=i&&(firingLength--,firingIndex>=i&&firingIndex--),list.splice(i--,1),!flags.unique));i++);return this},has:function(fn){if(list)for(var i=0,length=list.length;length>i;i++)if(fn===list[i])return!0;return!1},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory&&memory!==!0||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return stack&&(firing?flags.once||stack.push([context,args]):flags.once&&memory||fire(context,args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self};var sliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var key,doneList=jQuery.Callbacks("once memory"),failList=jQuery.Callbacks("once memory"),progressList=jQuery.Callbacks("memory"),state="pending",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,state:function(){return state},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){return deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks),this},always:function(){return deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments),this},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"],progress:[fnProgress,"notify"]},function(handler,data){var returned,fn=data[0],action=data[1];jQuery.isFunction(fn)?deferred[handler](function(){returned=fn.apply(this,arguments),returned&&jQuery.isFunction(returned.promise)?returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify):newDefer[action+"With"](this===deferred?newDefer:this,[returned])}):deferred[handler](newDefer[action])})}).promise()},promise:function(obj){if(null==obj)obj=promise;else for(var key in promise)obj[key]=promise[key];return obj}},deferred=promise.promise({});for(key in lists)deferred[key]=lists[key].fire,deferred[key+"With"]=lists[key].fireWith;return deferred.done(function(){state="resolved"},failList.disable,progressList.lock).fail(function(){state="rejected"},doneList.disable,progressList.lock),func&&func.call(deferred,deferred),deferred},when:function(firstParam){function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,--count||deferred.resolveWith(deferred,args)}}function progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,deferred.notifyWith(promise,pValues)}}var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,deferred=1>=length&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred(),promise=deferred.promise();if(length>1){for(;length>i;i++)args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise)?args[i].promise().then(resolveFunc(i),deferred.reject,progressFunc(i)):--count;count||deferred.resolveWith(deferred,args)}else deferred!==firstParam&&deferred.resolveWith(deferred,length?[firstParam]:[]);return promise}}),jQuery.support=function(){var support,all,a,select,opt,input,fragment,tds,eventName,i,isSupported,div=document.createElement("div");document.documentElement;if(div.setAttribute("className","t"),div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],!all||!all.length||!a)return{};select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],support={leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.55/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:"on"===input.value,optSelected:opt.selected,getSetAttribute:"t"!==div.className,enctype:!!document.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},jQuery.boxModel=support.boxModel="CSS1Compat"===document.compatMode,input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}if(!div.addEventListener&&div.attachEvent&&div.fireEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).fireEvent("onclick")),input=document.createElement("input"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),fragment=document.createDocumentFragment(),fragment.appendChild(div.lastChild),support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,support.appendChecked=input.checked,fragment.removeChild(input),fragment.appendChild(div),div.attachEvent)for(i in{submit:1,change:1,focusin:1})eventName="on"+i,isSupported=eventName in div,isSupported||(div.setAttribute(eventName,"return;"),isSupported="function"==typeof div[eventName]),support[i+"Bubbles"]=isSupported;return fragment.removeChild(div),fragment=select=opt=div=input=null,jQuery(function(){var container,outer,inner,td,offsetSupport,marginDiv,conMarginTop,style,html,positionTopLeftWidthHeight,paddingMarginBorderVisibility,paddingMarginBorder,body=document.getElementsByTagName("body")[0];body&&(conMarginTop=1,paddingMarginBorder="padding:0;margin:0;border:",positionTopLeftWidthHeight="position:absolute;top:0;left:0;width:1px;height:1px;",paddingMarginBorderVisibility=paddingMarginBorder+"0;visibility:hidden;",style="style='"+positionTopLeftWidthHeight+paddingMarginBorder+"5px solid #000;",html="<div "+style+"display:block;'><div style='"+paddingMarginBorder+"0;display:block;overflow:hidden;'></div></div><table "+style+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",container=document.createElement("div"),container.style.cssText=paddingMarginBorderVisibility+"width:0;height:0;position:static;top:0;margin-top:"+conMarginTop+"px",body.insertBefore(container,body.firstChild),div=document.createElement("div"),container.appendChild(div),div.innerHTML="<table><tr><td style='"+paddingMarginBorder+"0;display:none'></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,window.getComputedStyle&&(div.innerHTML="",marginDiv=document.createElement("div"),marginDiv.style.width="0",marginDiv.style.marginRight="0",div.style.width="2px",div.appendChild(marginDiv),support.reliableMarginRight=0===(parseInt((window.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof div.style.zoom&&(div.innerHTML="",div.style.width=div.style.padding="1px",div.style.border=0,div.style.overflow="hidden",div.style.display="inline",div.style.zoom=1,support.inlineBlockNeedsLayout=3===div.offsetWidth,div.style.display="block",div.style.overflow="visible",div.innerHTML="<div style='width:5px;'></div>",support.shrinkWrapBlocks=3!==div.offsetWidth),div.style.cssText=positionTopLeftWidthHeight+paddingMarginBorderVisibility,div.innerHTML=html,outer=div.firstChild,inner=outer.firstChild,td=outer.nextSibling.firstChild.firstChild,offsetSupport={doesNotAddBorder:5!==inner.offsetTop,doesAddBorderForTableAndCells:5===td.offsetTop},inner.style.position="fixed",inner.style.top="20px",offsetSupport.fixedPosition=20===inner.offsetTop||15===inner.offsetTop,inner.style.position=inner.style.top="",outer.style.overflow="hidden",outer.style.position="relative",offsetSupport.subtractsBorderForOverflowNotVisible=-5===inner.offsetTop,offsetSupport.doesNotIncludeMarginInBodyOffset=body.offsetTop!==conMarginTop,window.getComputedStyle&&(div.style.marginTop="1%",support.pixelMargin="1%"!==(window.getComputedStyle(div,null)||{marginTop:0}).marginTop),"undefined"!=typeof container.style.zoom&&(container.style.zoom=1),body.removeChild(container),marginDiv=div=container=null,jQuery.extend(support,offsetSupport))}),support}();var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(jQuery.acceptData(elem)){var privateCache,thisCache,ret,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents="events"===name;if(id&&cache[id]&&(isEvents||pvt||cache[id].data)||!getByName||data!==undefined)return id||(isNode?elem[internalKey]=id=++jQuery.uuid:id=internalKey),cache[id]||(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop)),("object"==typeof name||"function"==typeof name)&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),privateCache=thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),isEvents&&!thisCache[name]?privateCache.events:(getByName?(ret=thisCache[name],null==ret&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret)}},removeData:function(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)||(name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" ")));for(i=0,l=name.length;l>i;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(jQuery.support.deleteExpando||!cache.setInterval?delete cache[id]:cache[id]=null,isNode&&(jQuery.support.deleteExpando?delete elem[internalKey]:elem.removeAttribute?elem.removeAttribute(internalKey):elem[internalKey]=null))}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,!0)},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match)return!(match===!0||elem.getAttribute("classid")!==match)}return!0}}),jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(attr=elem.attributes,l=attr.length;l>i;i++)name=attr[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.substring(5)),dataAttr(elem,name,data[name]));jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):(parts=key.split(".",2),parts[1]=parts[1]?"."+parts[1]:"",part=parts[1]+"!",jQuery.access(this,function(value){return value===undefined?(data=this.triggerHandler("getData"+part,[parts[0]]),data===undefined&&elem&&(data=jQuery.data(elem,key),data=dataAttr(elem,key,data)),data===undefined&&parts[1]?this.data(parts[0]):data):(parts[1]=value,void this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts),jQuery.data(this,key,value),self.triggerHandler("changeData"+part,parts)}))},null,value,arguments.length>1,null,!1))},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({_mark:function(elem,type){elem&&(type=(type||"fx")+"mark",jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1))},_unmark:function(force,elem,type){if(force!==!0&&(type=elem,elem=force,force=!1),elem){type=type||"fx";var key=type+"mark",count=force?0:(jQuery._data(elem,key)||1)-1;count?jQuery._data(elem,key,count):(jQuery.removeData(elem,key,!0),handleQueueMarkDefer(elem,type,"mark"))}},queue:function(elem,type,data){var q;return elem?(type=(type||"fx")+"queue",q=jQuery._data(elem,type),data&&(!q||jQuery.isArray(data)?q=jQuery._data(elem,type,jQuery.makeArray(data)):q.push(data)),q||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};"inprogress"===fn&&(fn=queue.shift()),fn&&("fx"===type&&queue.unshift("inprogress"),jQuery._data(elem,type+".run",hooks),fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)),queue.length||(jQuery.removeData(elem,type+"queue "+type+".run",!0),handleQueueMarkDefer(elem,type,"queue"))}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,object){function resolve(){--count||defer.resolveWith(elements,[elements])}"string"!=typeof type&&(object=type,type=undefined),type=type||"fx";for(var tmp,defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark";i--;)(tmp=jQuery.data(elements[i],deferDataKey,undefined,!0)||(jQuery.data(elements[i],queueDataKey,undefined,!0)||jQuery.data(elements[i],markDataKey,undefined,!0))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks("once memory"),!0))&&(count++,tmp.add(resolve));return resolve(),defer.promise(object)}});var nodeHook,boolHook,fixSpecified,rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&"string"==typeof value)for(classNames=value.split(rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],1===elem.nodeType)if(elem.className||1!==classNames.length){for(setClass=" "+elem.className+" ",c=0,cl=classNames.length;cl>c;c++)~setClass.indexOf(" "+classNames[c]+" ")||(setClass+=classNames[c]+" ");elem.className=jQuery.trim(setClass)}else elem.className=value;return this},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&"string"==typeof value||value===undefined)for(classNames=(value||"").split(rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],1===elem.nodeType&&elem.className)if(value){for(className=(" "+elem.className+" ").replace(rclass," "),c=0,cl=classNames.length;cl>c;c++)className=className.replace(" "+classNames[c]+" "," ");elem.className=jQuery.trim(className)}else elem.className="";return this},toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;return jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);className=classNames[i++];)state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className);else("undefined"===type||"boolean"===type)&&(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1},val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val,self=jQuery(this);1===this.nodeType&&(val=isFunction?value.call(this,i,self.val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one="select-one"===elem.type;if(0>index)return null;for(i=one?index:0,max=one?index+1:options.length;max>i;i++)if(option=options[i],option.selected&&(jQuery.support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return one&&!values.length&&options.length?jQuery(options[index]).val():values},set:function(elem,value){var values=jQuery.makeArray(value);return jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0}),values.length||(elem.selectedIndex=-1),values}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return pass&&name in jQuery.attrFn?jQuery(elem)[name](value):"undefined"==typeof elem.getAttribute?jQuery.prop(elem,name,value):(notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)),value!==undefined?null===value?void jQuery.removeAttr(elem,name):hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,""+value),value):hooks&&"get"in hooks&&notxml&&null!==(ret=hooks.get(elem,name))?ret:(ret=elem.getAttribute(name),null===ret?undefined:ret))},removeAttr:function(elem,value){var propName,attrNames,name,l,isBool,i=0;if(value&&1===elem.nodeType)for(attrNames=value.toLowerCase().split(rspace),l=attrNames.length;l>i;i++)name=attrNames[i],name&&(propName=jQuery.propFix[name]||name,isBool=rboolean.test(name),isBool||jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName),isBool&&propName in elem&&(elem[propName]=!1))},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}},value:{get:function(elem,name){return nodeHook&&jQuery.nodeName(elem,"button")?nodeHook.get(elem,name):name in elem?elem.value:null},set:function(elem,value,name){return nodeHook&&jQuery.nodeName(elem,"button")?nodeHook.set(elem,value,name):void(elem.value=value)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex,boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||"boolean"!=typeof property&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return value===!1?jQuery.removeAttr(elem,name):(propName=jQuery.propFix[name]||name,propName in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},getSetAttribute||(fixSpecified={name:!0,id:!0,coords:!0},nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;return ret=elem.getAttributeNode(name),ret&&(fixSpecified[name]?""!==ret.nodeValue:ret.specified)?ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||(ret=document.createAttribute(name),elem.setAttributeNode(ret)),ret.nodeValue=value+""}},jQuery.attrHooks.tabindex.set=nodeHook.set,jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){return""===value?(elem.setAttribute(name,"auto"),value):void 0}})}),jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){""===value&&(value="false"),nodeHook.set(elem,value,name)}}),jQuery.support.hrefNormalized||jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null===ret?undefined:ret}})}),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}}),jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}})),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*)?(?:\.(.+))?$/,rhoverHack=/(?:^|\s)hover(\.\S+)?\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);return quick&&(quick[1]=(quick[1]||"").toLowerCase(),quick[3]=quick[3]&&new RegExp("(?:^|\\s)"+quick[3]+"(?:\\s|$)")),quick},quickIs=function(elem,m){var attrs=elem.attributes||{};return(!m[1]||elem.nodeName.toLowerCase()===m[1])&&(!m[2]||(attrs.id||{}).value===m[2])&&(!m[3]||m[3].test((attrs["class"]||{}).value))},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(3!==elem.nodeType&&8!==elem.nodeType&&types&&handler&&(elemData=jQuery._data(elem))){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),events=elemData.events,events||(elemData.events=events={}),eventHandle=elemData.handle,eventHandle||(elemData.handle=eventHandle=function(e){return"undefined"==typeof jQuery||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=jQuery.trim(hoverHack(types)).split(" "),t=0;t<types.length;t++)tns=rtypenamespace.exec(types[t])||[],type=tns[1],namespaces=(tns[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,quick:selector&&quickParse(selector),namespace:namespaces.join(".")},handleObjIn),handlers=events[type],handlers||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0;elem=null}},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=jQuery.trim(hoverHack(types||"")).split(" "),t=0;t<types.length;t++)if(tns=rtypenamespace.exec(types[t])||[],type=origType=tns[1],namespaces=tns[2],type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,eventType=events[type]||[],origCount=eventType.length,namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,j=0;j<eventType.length;j++)handleObj=eventType[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||namespaces&&!namespaces.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(eventType.splice(j--,1),
handleObj.selector&&eventType.delegateCount--,special.remove&&special.remove.call(elem,handleObj));0===eventType.length&&origCount!==eventType.length&&(special.teardown&&special.teardown.call(elem,namespaces)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(handle=elemData.handle,handle&&(handle.elem=null),jQuery.removeData(elem,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(event,data,elem,onlyHandlers){if(!elem||3!==elem.nodeType&&8!==elem.nodeType){var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf("!")>=0&&(type=type.slice(0,-1),exclusive=!0),type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),elem&&!jQuery.event.customEvent[type]||jQuery.event.global[type]))if(event="object"==typeof event?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type),event.type=type,event.isTrigger=!0,event.exclusive=exclusive,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,ontype=type.indexOf(":")<0?"on"+type:"",elem){if(event.result=undefined,event.target||(event.target=elem),data=null!=data?jQuery.makeArray(data):[],data.unshift(event),special=jQuery.event.special[type]||{},!special.trigger||special.trigger.apply(elem,data)!==!1){if(eventPath=[[elem,special.bindType||type]],!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode,old=null;cur;cur=cur.parentNode)eventPath.push([cur,bubbleType]),old=cur;old&&old===elem.ownerDocument&&eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++)cur=eventPath[i][0],event.type=eventPath[i][1],handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===!1&&event.preventDefault();return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&special._default.apply(elem.ownerDocument,data)!==!1||"click"===type&&jQuery.nodeName(elem,"a")||!jQuery.acceptData(elem)||ontype&&elem[type]&&("focus"!==type&&"blur"!==type||0!==event.target.offsetWidth)&&!jQuery.isWindow(elem)&&(old=elem[ontype],old&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=undefined,old&&(elem[ontype]=old)),event.result}}else{cache=jQuery.cache;for(i in cache)cache[i].events&&cache[i].events[type]&&jQuery.event.trigger(event,data,cache[i].handle.elem,!0)}}},dispatch:function(event){event=jQuery.event.fix(event||window.event);var i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,handlers=(jQuery._data(this,"events")||{})[event.type]||[],delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[];if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){if(delegateCount&&(!event.button||"click"!==event.type))for(jqcur=jQuery(this),jqcur.context=this.ownerDocument||this,cur=event.target;cur!=this;cur=cur.parentNode||this)if(cur.disabled!==!0){for(selMatch={},matches=[],jqcur[0]=cur,i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector,selMatch[sel]===undefined&&(selMatch[sel]=handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel)),selMatch[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,matches:matches})}for(handlers.length>delegateCount&&handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)}),i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++)for(matched=handlerQueue[i],event.currentTarget=matched.elem,j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++)handleObj=matched.matches[j],(run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace))&&(event.data=handleObj.data,event.handleObj=handleObj,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret,ret===!1&&(event.preventDefault(),event.stopPropagation())));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;for(event=jQuery.Event(originalEvent),i=copy.length;i;)prop=copy[--i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey===undefined&&(event.metaKey=event.ctrlKey),fixHook.filter?fixHook.filter(event,originalEvent):event},special:{ready:{setup:jQuery.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){jQuery.isWindow(this)&&(this.onbeforeunload=eventHandle)},teardown:function(namespaces,eventHandle){this.onbeforeunload===eventHandle&&(this.onbeforeunload=null)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.event.handle=jQuery.event.dispatch,jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){elem.detachEvent&&elem.detachEvent("on"+type,handle)},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)},jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;handleObj.selector;return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!form._submit_attached&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),form._submit_attached=!0)})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.remove(this,"._submit")}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1,jQuery.event.simulate("change",this,event,!0))})),!1):void jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!elem._change_attached&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),elem._change_attached=!0)})},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return jQuery.event.remove(this,"._change"),rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0===attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0===--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=undefined);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;return jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this}if("object"==typeof types){for(var type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=undefined),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){return jQuery(this.context).on(types,this.selector,data,fn),this},die:function(types,fn){return jQuery(this.context).off(types,this.selector||"**",fn),this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1==arguments.length?this.off(selector,"**"):this.off(types,selector,fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){return this[0]?jQuery.event.trigger(type,data,this[0],!0):void 0},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return null==fn&&(fn=data,data=null),arguments.length>0?this.on(name,null,data,fn):this.trigger(name)},jQuery.attrFn&&(jQuery.attrFn[name]=!0),rkeyEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.keyHooks),rmouseEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.mouseHooks)}),function(){function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;l>i;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(1!==elem.nodeType||isXML||(elem[expando]=doneName,elem.sizset=i),elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;l>i;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(1===elem.nodeType)if(isXML||(elem[expando]=doneName,elem.sizset=i),"string"!=typeof cur){if(elem===cur){match=!0;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,expando="sizcache"+(Math.random()+"").replace(".",""),done=0,toString=Object.prototype.toString,hasDuplicate=!1,baseHasDuplicate=!0,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){return baseHasDuplicate=!1,0});var Sizzle=function(selector,context,results,seed){results=results||[],context=context||document;var origContext=context;if(1!==context.nodeType&&9!==context.nodeType)return[];if(!selector||"string"!=typeof selector)return results;var m,set,checkSet,extra,ret,cur,pop,i,prune=!0,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do if(chunker.exec(""),m=chunker.exec(soFar),m&&(soFar=m[3],parts.push(m[1]),m[2])){extra=m[3];break}while(m);if(parts.length>1&&origPOS.exec(selector))if(2===parts.length&&Expr.relative[parts[0]])set=posProcess(parts[0]+parts[1],context,seed);else for(set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);parts.length;)selector=parts.shift(),Expr.relative[selector]&&(selector+=parts.shift()),set=posProcess(selector,set,seed);else if(!seed&&parts.length>1&&9===context.nodeType&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])&&(ret=Sizzle.find(parts.shift(),context,contextXML),context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]),context)for(ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),1!==parts.length||"~"!==parts[0]&&"+"!==parts[0]||!context.parentNode?context:context.parentNode,contextXML),set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set,parts.length>0?checkSet=makeArray(set):prune=!1;parts.length;)cur=parts.pop(),pop=cur,Expr.relative[cur]?pop=parts.pop():cur="",null==pop&&(pop=context),Expr.relative[cur](checkSet,pop,contextXML);else checkSet=parts=[];if(checkSet||(checkSet=set),checkSet||Sizzle.error(cur||selector),"[object Array]"===toString.call(checkSet))if(prune)if(context&&1===context.nodeType)for(i=0;null!=checkSet[i];i++)checkSet[i]&&(checkSet[i]===!0||1===checkSet[i].nodeType&&Sizzle.contains(context,checkSet[i]))&&results.push(set[i]);else for(i=0;null!=checkSet[i];i++)checkSet[i]&&1===checkSet[i].nodeType&&results.push(set[i]);else results.push.apply(results,checkSet);else makeArray(checkSet,results);return extra&&(Sizzle(extra,origContext,results,seed),Sizzle.uniqueSort(results)),results};Sizzle.uniqueSort=function(results){if(sortOrder&&(hasDuplicate=baseHasDuplicate,results.sort(sortOrder),hasDuplicate))for(var i=1;i<results.length;i++)results[i]===results[i-1]&&results.splice(i--,1);return results},Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)},Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0},Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr)return[];for(i=0,len=Expr.order.length;len>i;i++)if(type=Expr.order[i],(match=Expr.leftMatch[type].exec(expr))&&(left=match[1],match.splice(1,1),"\\"!==left.substr(left.length-1)&&(match[1]=(match[1]||"").replace(rBackslash,""),set=Expr.find[type](match,context,isXML),null!=set))){expr=expr.replace(Expr.match[type],"");break}return set||(set="undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName("*"):[]),{set:set,expr:expr}},Sizzle.filter=function(expr,set,inplace,not){for(var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);expr&&set.length;){for(type in Expr.filter)if(null!=(match=Expr.leftMatch[type].exec(expr))&&match[2]){if(filter=Expr.filter[type],left=match[1],anyFound=!1,match.splice(1,1),"\\"===left.substr(left.length-1))continue;if(curLoop===result&&(result=[]),Expr.preFilter[type])if(match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter)){if(match===!0)continue}else anyFound=found=!0;if(match)for(i=0;null!=(item=curLoop[i]);i++)item&&(found=filter(item,match,i,curLoop),pass=not^found,inplace&&null!=found?pass?anyFound=!0:curLoop[i]=!1:pass&&(result.push(item),anyFound=!0));if(found!==undefined){if(inplace||(curLoop=result),expr=expr.replace(Expr.match[type],""),!anyFound)return[];break}}if(expr===old){if(null!=anyFound)break;Sizzle.error(expr)}old=expr}return curLoop},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;if("string"==typeof elem.innerText)return elem.innerText.replace(rReturn,"");for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(i=0;node=elem[i];i++)8!==node.nodeType&&(ret+=getText(node));return ret},Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr="string"==typeof part,isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;isTag&&(part=part.toLowerCase());for(var elem,i=0,l=checkSet.length;l>i;i++)if(elem=checkSet[i]){for(;(elem=elem.previousSibling)&&1!==elem.nodeType;);checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||!1:elem===part}isPartStrNotTag&&Sizzle.filter(part,checkSet,!0)},">":function(checkSet,part){var elem,isPartStr="string"==typeof part,i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){for(part=part.toLowerCase();l>i;i++)if(elem=checkSet[i]){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:!1}}else{for(;l>i;i++)elem=checkSet[i],elem&&(checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part);isPartStr&&Sizzle.filter(part,checkSet,!0)}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;"string"!=typeof part||rNonWord.test(part)||(part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck),checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;"string"!=typeof part||rNonWord.test(part)||(part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck),checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if("undefined"!=typeof context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if("undefined"!=typeof context.getElementsByName){for(var ret=[],results=context.getElementsByName(match[1]),i=0,l=results.length;l>i;i++)results[i].getAttribute("name")===match[1]&&ret.push(results[i]);return 0===ret.length?null:ret}},TAG:function(match,context){return"undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName(match[1]):void 0}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){if(match=" "+match[1].replace(rBackslash,"")+" ",isXML)return match;for(var elem,i=0;null!=(elem=curLoop[i]);i++)elem&&(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)?inplace||result.push(elem):inplace&&(curLoop[i]=!1));return!1},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if("nth"===match[1]){match[2]||Sizzle.error(match[0]),match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===match[2]&&"2n"||"odd"===match[2]&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=test[1]+(test[2]||1)-0,match[3]=test[3]-0}else match[2]&&Sizzle.error(match[0]);return match[0]=done++,match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");return!isXML&&Expr.attrMap[name]&&(match[1]=Expr.attrMap[name]),match[4]=(match[4]||match[5]||"").replace(rBackslash,""),"~="===match[2]&&(match[4]=" "+match[4]+" "),match},PSEUDO:function(match,curLoop,inplace,result,not){if("not"===match[1]){if(!((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3]))){var ret=Sizzle.filter(match[3],curLoop,inplace,!0^not);return inplace||result.push.apply(result,ret),!1}match[3]=Sizzle(match[3],null,null,curLoop)}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0]))return!0;return match},POS:function(match){return match.unshift(!0),match}},filters:{enabled:function(elem){return elem.disabled===!1&&"hidden"!==elem.type},disabled:function(elem){return elem.disabled===!0},checked:function(elem){return elem.checked===!0},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return"input"===elem.nodeName.toLowerCase()&&"text"===type&&(attr===type||null===attr)},radio:function(elem){return"input"===elem.nodeName.toLowerCase()&&"radio"===elem.type},checkbox:function(elem){return"input"===elem.nodeName.toLowerCase()&&"checkbox"===elem.type},file:function(elem){return"input"===elem.nodeName.toLowerCase()&&"file"===elem.type},password:function(elem){return"input"===elem.nodeName.toLowerCase()&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"submit"===elem.type},image:function(elem){return"input"===elem.nodeName.toLowerCase()&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)},focus:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elem,i){return 0===i},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter)return filter(elem,i,match,array);if("contains"===name)return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;if("not"===name){for(var not=match[3],j=0,l=not.length;l>j;j++)if(not[j]===elem)return!1;return!0}Sizzle.error(name)},CHILD:function(elem,match){var first,last,doneName,parent,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":for(;node=node.previousSibling;)if(1===node.nodeType)return!1;if("first"===type)return!0;node=elem;case"last":for(;node=node.nextSibling;)if(1===node.nodeType)return!1;return!0;case"nth":if(first=match[2],last=match[3],1===first&&0===last)return!0;if(doneName=match[0],parent=elem.parentNode,parent&&(parent[expando]!==doneName||!elem.nodeIndex)){for(count=0,node=parent.firstChild;node;node=node.nextSibling)1===node.nodeType&&(node.nodeIndex=++count);parent[expando]=doneName}return diff=elem.nodeIndex-last,0===first?0===diff:diff%first===0&&diff/first>=0}},ID:function(elem,match){return 1===elem.nodeType&&elem.getAttribute("id")===match},TAG:function(elem,match){return"*"===match&&1===elem.nodeType||!!elem.nodeName&&elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):null!=elem[name]?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return null==result?"!="===type:!type&&Sizzle.attr?null!=result:"="===type?value===check:"*="===type?value.indexOf(check)>=0:"~="===type?(" "+value+" ").indexOf(check)>=0:check?"!="===type?value!==check:"^="===type?0===value.indexOf(check):"$="===type?value.substr(value.length-check.length)===check:"|="===type?value===check||value.substr(0,check.length+1)===check+"-":!1:value&&result!==!1},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];return filter?filter(elem,i,match,array):void 0}}},origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match)Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source),Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));Expr.match.globalPOS=origPOS;var makeArray=function(array,results){return array=Array.prototype.slice.call(array,0),results?(results.push.apply(results,array),results):array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if("[object Array]"===toString.call(array))Array.prototype.push.apply(ret,array);else if("number"==typeof array.length)for(var l=array.length;l>i;i++)ret.push(array[i]);else for(;array[i];i++)ret.push(array[i]);return ret}}var sortOrder,siblingCheck;document.documentElement.compareDocumentPosition?sortOrder=function(a,b){return a===b?(hasDuplicate=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);if(!aup)return-1;if(!bup)return 1;for(;cur;)ap.unshift(cur),cur=cur.parentNode;for(cur=bup;cur;)bp.unshift(cur),cur=cur.parentNode;al=ap.length,bl=bp.length;for(var i=0;al>i&&bl>i;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)},siblingCheck=function(a,b,ret){if(a===b)return ret;for(var cur=a.nextSibling;cur;){if(cur===b)return-1;cur=cur.nextSibling}return 1}),function(){var form=document.createElement("div"),id="script"+(new Date).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>",root.insertBefore(form,root.firstChild),document.getElementById(id)&&(Expr.find.ID=function(match,context,isXML){if("undefined"!=typeof context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||"undefined"!=typeof m.getAttributeNode&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}},Expr.filter.ID=function(elem,match){var node="undefined"!=typeof elem.getAttributeNode&&elem.getAttributeNode("id");return 1===elem.nodeType&&node&&node.nodeValue===match}),root.removeChild(form),root=form=null}(),function(){var div=document.createElement("div");div.appendChild(document.createComment("")),div.getElementsByTagName("*").length>0&&(Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if("*"===match[1]){for(var tmp=[],i=0;results[i];i++)1===results[i].nodeType&&tmp.push(results[i]);results=tmp}return results}),div.innerHTML="<a href='#'></a>",div.firstChild&&"undefined"!=typeof div.firstChild.getAttribute&&"#"!==div.firstChild.getAttribute("href")&&(Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}),div=null}(),document.querySelectorAll&&!function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";if(div.innerHTML="<p class='TEST'></p>",!div.querySelectorAll||0!==div.querySelectorAll(".TEST").length){Sizzle=function(query,context,extra,seed){if(context=context||document,!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(1===context.nodeType||9===context.nodeType)){if(match[1])return makeArray(context.getElementsByTagName(query),extra);if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName)return makeArray(context.getElementsByClassName(match[2]),extra)}if(9===context.nodeType){if("body"===query&&context.body)return makeArray([context.body],extra);if(match&&match[3]){var elem=context.getElementById(match[3]);if(!elem||!elem.parentNode)return makeArray([],extra);if(elem.id===match[3])return makeArray([elem],extra)}try{return makeArray(context.querySelectorAll(query),extra);
}catch(qsaError){}}else if(1===context.nodeType&&"object"!==context.nodeName.toLowerCase()){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);old?nid=nid.replace(/'/g,"\\$&"):context.setAttribute("id",nid),relativeHierarchySelector&&hasParent&&(context=context.parentNode);try{if(!relativeHierarchySelector||hasParent)return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}catch(pseudoError){}finally{old||oldContext.removeAttribute("id")}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle)Sizzle[prop]=oldSizzle[prop];div=null}}(),function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=!1;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=!0}Sizzle.matchesSelector=function(node,expr){if(expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!Sizzle.isXML(node))try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&11!==node.document.nodeType)return ret}}catch(e){}return Sizzle(expr,null,null,[node]).length>0}}}(),function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>",div.getElementsByClassName&&0!==div.getElementsByClassName("e").length&&(div.lastChild.className="e",1!==div.getElementsByClassName("e").length&&(Expr.order.splice(1,0,"CLASS"),Expr.find.CLASS=function(match,context,isXML){return"undefined"==typeof context.getElementsByClassName||isXML?void 0:context.getElementsByClassName(match[1])},div=null))}(),document.documentElement.contains?Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?Sizzle.contains=function(a,b){return!!(16&a.compareDocumentPosition(b))}:Sizzle.contains=function(){return!1},Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1};var posProcess=function(selector,context,seed){for(var match,tmpSet=[],later="",root=context.nodeType?[context]:context;match=Expr.match.PSEUDO.exec(selector);)later+=match[0],selector=selector.replace(Expr.match.PSEUDO,"");selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;l>i;i++)Sizzle(selector,root[i],tmpSet,seed);return Sizzle.filter(later,tmpSet)};Sizzle.attr=jQuery.attr,Sizzle.selectors.attrMap={},jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.filters,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.globalPOS,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,l,self=this;if("string"!=typeof selector)return jQuery(selector).filter(function(){for(i=0,l=self.length;l>i;i++)if(jQuery.contains(self[i],this))return!0});var length,n,r,ret=this.pushStack("","find",selector);for(i=0,l=this.length;l>i;i++)if(length=ret.length,jQuery.find(selector,this[i],ret),i>0)for(n=length;n<ret.length;n++)for(r=0;length>r;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}return ret},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;l>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,!0),"filter",selector)},is:function(selector){return!!selector&&("string"==typeof selector?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var i,l,ret=[],cur=this[0];if(jQuery.isArray(selectors)){for(var level=1;cur&&cur.ownerDocument&&cur!==context;){for(i=0;i<selectors.length;i++)jQuery(cur).is(selectors[i])&&ret.push({selector:selectors[i],elem:cur,level:level});cur=cur.parentNode,level++}return ret}var pos=POS.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;l>i;i++)for(cur=this[i];cur;){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}if(cur=cur.parentNode,!cur||!cur.ownerDocument||cur===context||11===cur.nodeType)break}return ret=ret.length>1?jQuery.unique(ret):ret,this.pushStack(ret,"closest",selectors)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return runtil.test(name)||(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret,(this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)&&(ret=ret.reverse()),this.pushStack(ret,name,slice.call(arguments).join(","))}}),jQuery.extend({filter:function(expr,elems,not){return not&&(expr=":not("+expr+")"),1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},nth:function(cur,result,dir,elem){result=result||1;for(var num=0;cur&&(1!==cur.nodeType||++num!==result);cur=cur[dir]);return cur},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document);wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.support.htmlSerialize||(wrapMap._default=[1,"div<div>","</div>"]),jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){1===this.nodeType&&this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){1===this.nodeType&&this.insertBefore(elem,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this)});if(arguments.length){var set=jQuery.clean(arguments);return set.push.apply(set,this.toArray()),this.pushStack(set,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});if(arguments.length){var set=this.pushStack(this,"after",arguments);return set.push.apply(set,jQuery.clean(arguments)),set}},remove:function(selector,keepData){for(var elem,i=0;null!=(elem=this[i]);i++)(!selector||jQuery.filter(selector,[elem]).length)&&(keepData||1!==elem.nodeType||(jQuery.cleanData(elem.getElementsByTagName("*")),jQuery.cleanData([elem])),elem.parentNode&&elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)for(1===elem.nodeType&&jQuery.cleanData(elem.getElementsByTagName("*"));elem.firstChild;)elem.removeChild(elem.firstChild);return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):null;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(elem.getElementsByTagName("*")),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(value){return this[0]&&this[0].parentNode?jQuery.isFunction(value)?this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))}):("string"!=typeof value&&(value=jQuery(value).detach()),this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove(),next?jQuery(next).before(value):jQuery(parent).append(value)})):this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&3===arguments.length&&"string"==typeof value&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,callback,!0)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined),self.domManip(args,table,callback)});if(this[0]){if(parent=value&&value.parentNode,results=jQuery.support.parentNode&&parent&&11===parent.nodeType&&parent.childNodes.length===this.length?{fragment:parent}:jQuery.buildFragment(args,this,scripts),fragment=results.fragment,first=1===fragment.childNodes.length?fragment=fragment.firstChild:fragment.firstChild){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;l>i;i++)callback.call(table?root(this[i],first):this[i],results.cacheable||l>1&&lastIndex>i?jQuery.clone(fragment,!0,!0):fragment)}scripts.length&&jQuery.each(scripts,function(i,elem){elem.src?jQuery.ajax({type:"GET",global:!1,url:elem.src,async:!1,dataType:"script"}):jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/")),elem.parentNode&&elem.parentNode.removeChild(elem)})}return this}}),jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];return nodes&&nodes[0]&&(doc=nodes[0].ownerDocument||nodes[0]),doc.createDocumentFragment||(doc=document),!(1===args.length&&"string"==typeof first&&first.length<512&&doc===document&&"<"===first.charAt(0))||rnocache.test(first)||!jQuery.support.checkClone&&rchecked.test(first)||!jQuery.support.html5Clone&&rnoshimcache.test(first)||(cacheable=!0,cacheresults=jQuery.fragments[first],cacheresults&&1!==cacheresults&&(fragment=cacheresults)),fragment||(fragment=doc.createDocumentFragment(),jQuery.clean(args,doc,fragment,scripts)),cacheable&&(jQuery.fragments[first]=cacheresults?fragment:1),{fragment:fragment,cacheable:cacheable}},jQuery.fragments={},jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=1===this.length&&this[0].parentNode;if(parent&&11===parent.nodeType&&1===parent.childNodes.length&&1===insert.length)return insert[original](this[0]),this;for(var i=0,l=insert.length;l>i;i++){var elems=(i>0?this.clone(!0):this).get();jQuery(insert[i])[original](elems),ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?elem.cloneNode(!0):shimCloneNode(elem);if(!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(cloneFixAttributes(elem,clone),srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)destElements[i]&&cloneFixAttributes(srcElements[i],destElements[i]);if(dataAndEvents&&(cloneCopyEvent(elem,clone),deepDataAndEvents))for(srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i]);return srcElements=destElements=null,clone},clean:function(elems,context,fragment,scripts){var checkScriptType,script,j,ret=[];context=context||document,"undefined"==typeof context.createElement&&(context=context.ownerDocument||context[0]&&context[0].ownerDocument||document);for(var elem,i=0;null!=(elem=elems[i]);i++)if("number"==typeof elem&&(elem+=""),elem){if("string"==typeof elem)if(rhtml.test(elem)){elem=elem.replace(rxhtmlTag,"<$1></$2>");var remove,tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div"),safeChildNodes=safeFragment.childNodes;for(context===document?safeFragment.appendChild(div):createSafeFragment(context).appendChild(div),div.innerHTML=wrap[1]+elem+wrap[2];depth--;)div=div.lastChild;if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody="table"!==tag||hasBody?"<table>"!==wrap[1]||hasBody?[]:div.childNodes:div.firstChild&&div.firstChild.childNodes;for(j=tbody.length-1;j>=0;--j)jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length&&tbody[j].parentNode.removeChild(tbody[j])}!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild),elem=div.childNodes,div&&(div.parentNode.removeChild(div),safeChildNodes.length>0&&(remove=safeChildNodes[safeChildNodes.length-1],remove&&remove.parentNode&&remove.parentNode.removeChild(remove)))}else elem=context.createTextNode(elem);var len;if(!jQuery.support.appendChecked)if(elem[0]&&"number"==typeof(len=elem.length))for(j=0;len>j;j++)findInputs(elem[j]);else findInputs(elem);elem.nodeType?ret.push(elem):ret=jQuery.merge(ret,elem)}if(fragment)for(checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type)},i=0;ret[i];i++)if(script=ret[i],scripts&&jQuery.nodeName(script,"script")&&(!script.type||rscriptType.test(script.type)))scripts.push(script.parentNode?script.parentNode.removeChild(script):script);else{if(1===script.nodeType){var jsTags=jQuery.grep(script.getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags))}fragment.appendChild(script)}return ret},cleanData:function(elems){for(var data,id,elem,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando,i=0;null!=(elem=elems[i]);i++)if((!elem.nodeName||!jQuery.noData[elem.nodeName.toLowerCase()])&&(id=elem[jQuery.expando])){if(data=cache[id],data&&data.events){for(var type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);data.handle&&(data.handle.elem=null)}deleteExpando?delete elem[jQuery.expando]:elem.removeAttribute&&elem.removeAttribute(jQuery.expando),delete cache[id]}}});var curCSS,getComputedStyle,currentStyle,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnum=/^[\-+]?(?:\d*\.)?\d+$/i,rnumnonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rrelNum=/^([\-+])=([\-+.\de]+)/,rmargin=/^margin/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssExpand=["Top","Right","Bottom","Left"];jQuery.fn.css=function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}return elem.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];if(name=jQuery.cssProps[origName]||origName,value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=+(ret[1]+1)*+ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),!(null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),hooks&&"set"in hooks&&(value=hooks.set(elem,value))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra){var ret,hooks;return name=jQuery.camelCase(name),hooks=jQuery.cssHooks[name],name=jQuery.cssProps[name]||name,"cssFloat"===name&&(name="float"),hooks&&"get"in hooks&&(ret=hooks.get(elem,!0,extra))!==undefined?ret:curCSS?curCSS(elem,name):void 0},swap:function(elem,options,callback){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.call(elem);for(name in options)elem.style[name]=old[name];return ret}}),jQuery.curCSS=jQuery.css,document.defaultView&&document.defaultView.getComputedStyle&&(getComputedStyle=function(elem,name){var ret,defaultView,computedStyle,width,style=elem.style;return name=name.replace(rupper,"-$1").toLowerCase(),(defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null))&&(ret=computedStyle.getPropertyValue(name),""!==ret||jQuery.contains(elem.ownerDocument.documentElement,elem)||(ret=jQuery.style(elem,name))),!jQuery.support.pixelMargin&&computedStyle&&rmargin.test(name)&&rnumnonpx.test(ret)&&(width=style.width,style.width=ret,ret=computedStyle.width,style.width=width),ret}),document.documentElement.currentStyle&&(currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;return null==ret&&style&&(uncomputed=style[name])&&(ret=uncomputed),rnumnonpx.test(ret)&&(left=style.left,rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left,rsLeft&&(elem.runtimeStyle.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(elem.runtimeStyle.left=rsLeft)),""===ret?"auto":ret}),curCSS=getComputedStyle||currentStyle,jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?0!==elem.offsetWidth?getWidthOrHeight(elem,name,extra):jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):void 0},set:function(elem,value){return rnum.test(value)?value+"px":value}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?parseFloat(RegExp.$1)/100+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,value>=1&&""===jQuery.trim(filter.replace(ralpha,""))&&(style.removeAttribute("filter"),currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{display:"inline-block"},function(){return computed?curCSS(elem,"margin-right"):elem.style.marginRight})}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return 0===width&&0===height||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts="string"==typeof value?value.split(" "):[value],expanded={};for(i=0;4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}}});var ajaxLocation,ajaxLocParts,r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.extend({load:function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);if(!this.length)return this;var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var type="GET";params&&(jQuery.isFunction(params)?(callback=params,params=undefined):"object"==typeof params&&(params=jQuery.param(params,jQuery.ajaxSettings.traditional),type="POST"));var self=this;return jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText,jqXHR.isResolved()&&(jqXHR.done(function(r){responseText=r}),self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)),callback&&self.each(callback,[responseText,status,jqXHR])}}),this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}}),jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){return settings?ajaxExtend(target,jQuery.ajaxSettings):(settings=target,target=jQuery.ajaxSettings),ajaxExtend(target,settings),target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){if(2!==state){state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0;var isSuccess,success,error,lastModified,etag,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined;if(status>=200&&300>status||304===status)if(s.ifModified&&((lastModified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[ifModifiedKey]=lastModified),(etag=jqXHR.getResponseHeader("Etag"))&&(jQuery.etag[ifModifiedKey]=etag)),304===status)statusText="notmodified",isSuccess=!0;else try{success=ajaxConvert(s,response),statusText="success",isSuccess=!0}catch(e){statusText="parsererror",error=e}else error=statusText,(!statusText||status)&&(statusText="error",0>status&&(status=0));jqXHR.status=status,jqXHR.statusText=""+(nativeStatusText||statusText),isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}}"object"==typeof url&&(options=url,url=undefined),options=options||{};var ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){return state||(s.mimeType=type),this},abort:function(statusText){return statusText=statusText||"abort",transport&&transport.abort(statusText),done(0,statusText),this}};if(deferred.promise(jqXHR),jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,jqXHR.complete=completeDeferred.add,jqXHR.statusCode=function(map){if(map){var tmp;if(2>state)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else tmp=map[jqXHR.status],jqXHR.then(tmp,tmp)}return this},s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax),null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]==ajaxLocParts[1]&&parts[2]==ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return!1;if(fireGlobals=s.global,s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),!s.hasContent&&(s.data&&(s.url+=(rquery.test(s.url)?"&":"?")+s.data,delete s.data),ifModifiedKey=s.url,s.cache===!1)){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),s.ifModified&&(ifModifiedKey=ifModifiedKey||s.url,jQuery.lastModified[ifModifiedKey]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]),jQuery.etag[ifModifiedKey]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort(),
!1;for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(var prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")}}),jQuery.extend({active:0,lastModified:{},etag:{}});var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+jsc++}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData="string"==typeof s.data&&/^application\/x\-www\-form\-urlencoded/.test(s.contentType);if("jsonp"===s.dataTypes[0]||s.jsonp!==!1&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";return s.jsonp!==!1&&(url=url.replace(jsre,replace),s.url===url&&(inspectData&&(data=data.replace(jsre,replace)),s.data===data&&(url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback))),s.url=url,s.data=data,window[jsonpCallback]=function(response){responseContainer=[response]},jqXHR.always(function(){window[jsonpCallback]=previous,responseContainer&&jQuery.isFunction(previous)&&window[jsonpCallback](responseContainer[0])}),s.converters["script json"]=function(){return responseContainer||jQuery.error(jsonpCallback+" was not called"),responseContainer[0]},s.dataTypes[0]="json","script"}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async="async",s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,head&&script.parentNode&&head.removeChild(script),script=undefined,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(0,1)}}}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)}:!1,xhrId=0;jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})}(jQuery.ajaxSettings.xhr()),jQuery.support.ajax&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),responses={},xml=xhr.responseXML,xml&&xml.documentElement&&(responses.xml=xml);try{responses.text=xhr.responseText}catch(_){}try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async&&4!==xhr.readyState?(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(){callback&&callback(0,1)}}}});var iframe,iframeDoc,timerId,fxNow,elemdisplay={},rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||0===speed)return this.animate(genFx("show",3),speed,easing,callback);for(var i=0,j=this.length;j>i;i++)elem=this[i],elem.style&&(display=elem.style.display,jQuery._data(elem,"olddisplay")||"none"!==display||(display=elem.style.display=""),(""===display&&"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument.documentElement,elem))&&jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)));for(i=0;j>i;i++)elem=this[i],elem.style&&(display=elem.style.display,(""===display||"none"===display)&&(elem.style.display=jQuery._data(elem,"olddisplay")||""));return this},hide:function(speed,easing,callback){if(speed||0===speed)return this.animate(genFx("hide",3),speed,easing,callback);for(var elem,display,i=0,j=this.length;j>i;i++)elem=this[i],elem.style&&(display=jQuery.css(elem,"display"),"none"===display||jQuery._data(elem,"olddisplay")||jQuery._data(elem,"olddisplay",display));for(i=0;j>i;i++)this[i].style&&(this[i].style.display="none");return this},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool="boolean"==typeof fn;return jQuery.isFunction(fn)&&jQuery.isFunction(fn2)?this._toggle.apply(this,arguments):null==fn||bool?this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]()}):this.animate(genFx("toggle",3),fn,fn2,callback),this},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){function doAnimation(){optall.queue===!1&&jQuery._mark(this);var name,val,p,e,hooks,replace,parts,start,end,unit,method,opt=jQuery.extend({},optall),isElement=1===this.nodeType,hidden=isElement&&jQuery(this).is(":hidden");opt.animatedProperties={};for(p in prop)if(name=jQuery.camelCase(p),p!==name&&(prop[name]=prop[p],delete prop[p]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks){replace=hooks.expand(prop[name]),delete prop[name];for(p in replace)p in prop||(prop[p]=replace[p])}for(name in prop){if(val=prop[name],jQuery.isArray(val)?(opt.animatedProperties[name]=val[1],val=prop[name]=val[0]):opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||"swing","hide"===val&&hidden||"show"===val&&!hidden)return opt.complete.call(this);!isElement||"height"!==name&&"width"!==name||(opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===jQuery.css(this,"display")&&"none"===jQuery.css(this,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=opt.overflow&&(this.style.overflow="hidden");for(p in prop)e=new jQuery.fx(this,opt,p),val=prop[p],rfxtypes.test(val)?(method=jQuery._data(this,"toggle"+p)||("toggle"===val?hidden?"show":"hide":0),method?(jQuery._data(this,"toggle"+p,"show"===method?"hide":"show"),e[method]()):e[val]()):(parts=rfxnum.exec(val),start=e.cur(),parts?(end=parseFloat(parts[2]),unit=parts[3]||(jQuery.cssNumber[p]?"":"px"),"px"!==unit&&(jQuery.style(this,p,(end||1)+unit),start=(end||1)/e.cur()*start,jQuery.style(this,p,start+unit)),parts[1]&&(end=("-="===parts[1]?-1:1)*end+start),e.custom(start,end,unit)):e.custom(start,val,""));return!0}var optall=jQuery.speed(speed,easing,callback);return jQuery.isEmptyObject(prop)?this.each(optall.complete,[!1]):(prop=jQuery.extend({},prop),optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation))},stop:function(type,clearQueue,gotoEnd){return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){function stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,!0),hooks.stop(gotoEnd)}var index,hadTimers=!1,timers=jQuery.timers,data=jQuery._data(this);if(gotoEnd||jQuery._unmark(!0,this),null==type)for(index in data)data[index]&&data[index].stop&&index.indexOf(".run")===index.length-4&&stopQueue(this,data,index);else data[index=type+".run"]&&data[index].stop&&stopQueue(this,data,index);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(gotoEnd?timers[index](!0):timers[index].saveState(),hadTimers=!0,timers.splice(index,1));gotoEnd&&hadTimers||jQuery.dequeue(this,type)})}}),jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(noUnmark){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue?jQuery.dequeue(this,opt.queue):noUnmark!==!1&&jQuery._unmark(this)},opt},easing:{linear:function(p){return p},swing:function(p){return-Math.cos(p*Math.PI)/2+.5}},timers:[],fx:function(elem,options,prop){this.options=options,this.elem=elem,this.prop=prop,options.orig=options.orig||{}}}),jQuery.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?r&&"auto"!==r?r:0:parsed},custom:function(from,to,unit){function t(gotoEnd){return self.step(gotoEnd)}var self=this,fx=jQuery.fx;this.startTime=fxNow||createFxNow(),this.end=to,this.now=this.start=from,this.pos=this.state=0,this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px"),t.queue=this.options.queue,t.elem=this.elem,t.saveState=function(){jQuery._data(self.elem,"fxshow"+self.prop)===undefined&&(self.options.hide?jQuery._data(self.elem,"fxshow"+self.prop,self.start):self.options.show&&jQuery._data(self.elem,"fxshow"+self.prop,self.end))},t()&&jQuery.timers.push(t)&&!timerId&&(timerId=setInterval(fx.tick,fx.interval))},show:function(){var dataShow=jQuery._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop),this.options.show=!0,dataShow!==undefined?this.custom(this.cur(),dataShow):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,"fxshow"+this.prop)||jQuery.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=!0,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),options.animatedProperties[this.prop]=!0;for(p in options.animatedProperties)options.animatedProperties[p]!==!0&&(done=!1);if(done){if(null==options.overflow||jQuery.support.shrinkWrapBlocks||jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index]}),options.hide&&jQuery(elem).hide(),options.hide||options.show)for(p in options.animatedProperties)jQuery.style(elem,p,options.orig[p]),jQuery.removeData(elem,"fxshow"+p,!0),jQuery.removeData(elem,"toggle"+p,!0);complete=options.complete,complete&&(options.complete=!1,complete.call(elem))}return!1}return options.duration==1/0?this.now=t:(n=t-this.startTime,this.state=n/options.duration,this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},jQuery.extend(jQuery.fx,{tick:function(){for(var timer,timers=jQuery.timers,i=0;i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop()},interval:13,stop:function(){clearInterval(timerId),timerId=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now)},_default:function(fx){fx.elem.style&&null!=fx.elem.style[fx.prop]?fx.elem.style[fx.prop]=fx.now+fx.unit:fx.elem[fx.prop]=fx.now}}}),jQuery.each(fxAttrs.concat.apply([],fxAttrs),function(i,prop){prop.indexOf("margin")&&(jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit)})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length});var getOffset,rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;getOffset="getBoundingClientRect"in document.documentElement?function(elem,doc,docElem,box){try{box=elem.getBoundingClientRect()}catch(e){}if(!box||!jQuery.contains(docElem,elem))return box?{top:box.top,left:box.left}:{top:0,left:0};var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left}}:function(elem,doc,docElem){for(var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;(elem=elem.parentNode)&&elem!==body&&elem!==docElem&&(!jQuery.support.fixedPosition||"fixed"!==prevComputedStyle.position);)computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top-=elem.scrollTop,left-=elem.scrollLeft,elem===offsetParent&&(top+=elem.offsetTop,left+=elem.offsetLeft,!jQuery.support.doesNotAddBorder||jQuery.support.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName)||(top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0),prevOffsetParent=offsetParent,offsetParent=elem.offsetParent),jQuery.support.subtractsBorderForOverflowNotVisible&&"visible"!==computedStyle.overflow&&(top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0),prevComputedStyle=computedStyle;return("relative"===prevComputedStyle.position||"static"===prevComputedStyle.position)&&(top+=body.offsetTop,left+=body.offsetLeft),jQuery.support.fixedPosition&&"fixed"===prevComputedStyle.position&&(top+=Math.max(docElem.scrollTop,body.scrollTop),left+=Math.max(docElem.scrollLeft,body.scrollLeft)),{top:top,left:left}},jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var elem=this[0],doc=elem&&elem.ownerDocument;return doc?elem===doc.body?jQuery.offset.bodyOffset(elem):getOffset(elem,doc,doc.documentElement):null},jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;return jQuery.support.doesNotIncludeMarginInBodyOffset&&(top+=parseFloat(jQuery.css(body,"marginTop"))||0,left+=parseFloat(jQuery.css(body,"marginLeft"))||0),{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={};calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(!this[0])return null;var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0,offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0,parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0,parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.body;offsetParent&&!rroot.test(offsetParent.nodeName)&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);return val===undefined?win?prop in win?win[prop]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method]:void(win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val)},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){var clientProp="client"+name,scrollProp="scroll"+name,offsetProp="offset"+name;jQuery.fn["inner"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,"padding")):this[type]():null},jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):this[type]():null},jQuery.fn[type]=function(value){return jQuery.access(this,function(elem,type,value){var doc,docElemProp,orig,ret;return jQuery.isWindow(elem)?(doc=elem.document,docElemProp=doc.documentElement[clientProp],jQuery.support.boxModel&&docElemProp||doc.body&&doc.body[clientProp]||docElemProp):9===elem.nodeType?(doc=elem.documentElement,doc[clientProp]>=doc[scrollProp]?doc[clientProp]:Math.max(elem.body[scrollProp],doc[scrollProp],elem.body[offsetProp],doc[offsetProp])):value===undefined?(orig=jQuery.css(elem,type),ret=parseFloat(orig),jQuery.isNumeric(ret)?ret:orig):void jQuery(elem).css(type,value)},type,value,arguments.length,null)}}),window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return jQuery})}(window),function($,undefined){function focusable(element,isTabIndexNotNaN){var nodeName=element.nodeName.toLowerCase();if("area"===nodeName){var img,map=element.parentNode,mapName=map.name;return element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img)):!1}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"==nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return!$(element).parents().andSelf().filter(function(){return"hidden"===$.curCSS(this,"visibility")||$.expr.filters.hidden(this)}).length}$.ui=$.ui||{},$.ui.version||($.extend($.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),$.fn.extend({propAttr:$.fn.prop||$.fn.attr,_focus:$.fn.focus,focus:function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):this._focus.apply(this,arguments)},scrollParent:function(){var scrollParent;return scrollParent=$.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.curCSS(this,"position",1))&&/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.curCSS(elem,"padding"+this,!0))||0,border&&(size-=parseFloat($.curCSS(elem,"border"+this+"Width",!0))||0),margin&&(size-=parseFloat($.curCSS(elem,"margin"+this,!0))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.extend($.expr[":"],{data:function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$(function(){var body=document.body,div=body.appendChild(div=document.createElement("div"));div.offsetHeight,$.extend(div.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),$.support.minHeight=100===div.offsetHeight,$.support.selectstart="onselectstart"in div,body.removeChild(div).style.display="none"}),$.extend($.ui,{plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var set=instance.plugins[name];if(set&&instance.element[0].parentNode)for(var i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)},isOverAxis:function(x,reference,size){return x>reference&&reference+size>x},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width)}}))}(jQuery),function($,undefined){if($.cleanData){var _cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)}}else{var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){return keepData||(!selector||$.filter(selector,[this]).length)&&$("*",this).add([this]).each(function(){try{$(this).triggerHandler("remove")}catch(e){}}),_remove.call($(this),selector,keepData)})}}$.widget=function(name,base,prototype){var fullName,namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName]=function(elem){return!!$.data(elem,name)},$[namespace]=$[namespace]||{},$[namespace][name]=function(options,element){arguments.length&&this._createWidget(options,element)};var basePrototype=new base;basePrototype.options=$.extend(!0,{},basePrototype.options),$[namespace][name].prototype=$.extend(!0,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype),$.widget.bridge(name,$[namespace][name])},$.widget.bridge=function(name,object){$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=Array.prototype.slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.extend.apply(null,[!0,options].concat(args)):options,isMethodCall&&"_"===options.charAt(0)?returnValue:(isMethodCall?this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;return methodValue!==instance&&methodValue!==undefined?(returnValue=methodValue,!1):void 0}):this.each(function(){var instance=$.data(this,name);instance?instance.option(options||{})._init():$.data(this,name,new object(options,this))}),returnValue)}},$.Widget=function(options,element){arguments.length&&this._createWidget(options,element)},$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(options,element){$.data(element,this.widgetName,this),this.element=$(element),this.options=$.extend(!0,{},this.options,this._getCreateOptions(),options);var self=this;this.element.bind("remove."+this.widgetName,function(){self.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(key,value){var options=key;if(0===arguments.length)return $.extend({},this.options);if("string"==typeof key){if(value===undefined)return this.options[key];options={},options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var self=this;return $.each(options,function(key,value){self._setOption(key,value)}),this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&this.widget()[value?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",value),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.call(this.element[0],event,data)===!1||event.isDefaultPrevented())}}}(jQuery),function($,undefined){var mouseHandled=!1;$(document).mouseup(function(e){mouseHandled=!1}),$.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var self=this;this.element.bind("mousedown."+this.widgetName,function(event){return self._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,self.widgetName+".preventClickEvent")?($.removeData(event.target,self.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(event){if(!mouseHandled){this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var self=this,btnIsLeft=1==event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){self.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return self._mouseMove(event)},this._mouseUpDelegate=function(event){return self._mouseUp(event)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){return!$.browser.msie||document.documentMode>=9||event.button?this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted):this._mouseUp(event)},_mouseUp:function(event){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target==this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance;
},_mouseDelayMet:function(event){return this.mouseDelayMet},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return!0}})}(jQuery),function($,undefined){$.ui=$.ui||{};var horizontalPositions=/left|center|right/,verticalPositions=/top|center|bottom/,center="center",support={},_position=$.fn.position,_offset=$.fn.offset;$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var targetWidth,targetHeight,basePosition,target=$(options.of),targetElem=target[0],collision=(options.collision||"flip").split(" "),offset=options.offset?options.offset.split(" "):[0,0];return 9===targetElem.nodeType?(targetWidth=target.width(),targetHeight=target.height(),basePosition={top:0,left:0}):targetElem.setTimeout?(targetWidth=target.width(),targetHeight=target.height(),basePosition={top:target.scrollTop(),left:target.scrollLeft()}):targetElem.preventDefault?(options.at="left top",targetWidth=targetHeight=0,basePosition={top:options.of.pageY,left:options.of.pageX}):(targetWidth=target.outerWidth(),targetHeight=target.outerHeight(),basePosition=target.offset()),$.each(["my","at"],function(){var pos=(options[this]||"").split(" ");1===pos.length&&(pos=horizontalPositions.test(pos[0])?pos.concat([center]):verticalPositions.test(pos[0])?[center].concat(pos):[center,center]),pos[0]=horizontalPositions.test(pos[0])?pos[0]:center,pos[1]=verticalPositions.test(pos[1])?pos[1]:center,options[this]=pos}),1===collision.length&&(collision[1]=collision[0]),offset[0]=parseInt(offset[0],10)||0,1===offset.length&&(offset[1]=offset[0]),offset[1]=parseInt(offset[1],10)||0,"right"===options.at[0]?basePosition.left+=targetWidth:options.at[0]===center&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:options.at[1]===center&&(basePosition.top+=targetHeight/2),basePosition.left+=offset[0],basePosition.top+=offset[1],this.each(function(){var collisionPosition,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseInt($.curCSS(this,"marginLeft",!0))||0,marginTop=parseInt($.curCSS(this,"marginTop",!0))||0,collisionWidth=elemWidth+marginLeft+(parseInt($.curCSS(this,"marginRight",!0))||0),collisionHeight=elemHeight+marginTop+(parseInt($.curCSS(this,"marginBottom",!0))||0),position=$.extend({},basePosition);"right"===options.my[0]?position.left-=elemWidth:options.my[0]===center&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:options.my[1]===center&&(position.top-=elemHeight/2),support.fractions||(position.left=Math.round(position.left),position.top=Math.round(position.top)),collisionPosition={left:position.left-marginLeft,top:position.top-marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:offset,my:options.my,at:options.at})}),$.fn.bgiframe&&elem.bgiframe(),elem.offset($.extend(position,{using:options.using}))})},$.ui.position={fit:{left:function(position,data){var win=$(window),over=data.collisionPosition.left+data.collisionWidth-win.width()-win.scrollLeft();position.left=over>0?position.left-over:Math.max(position.left-data.collisionPosition.left,position.left)},top:function(position,data){var win=$(window),over=data.collisionPosition.top+data.collisionHeight-win.height()-win.scrollTop();position.top=over>0?position.top-over:Math.max(position.top-data.collisionPosition.top,position.top)}},flip:{left:function(position,data){if(data.at[0]!==center){var win=$(window),over=data.collisionPosition.left+data.collisionWidth-win.width()-win.scrollLeft(),myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:-data.targetWidth,offset=-2*data.offset[0];position.left+=data.collisionPosition.left<0?myOffset+atOffset+offset:over>0?myOffset+atOffset+offset:0}},top:function(position,data){if(data.at[1]!==center){var win=$(window),over=data.collisionPosition.top+data.collisionHeight-win.height()-win.scrollTop(),myOffset="top"===data.my[1]?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:-data.targetHeight,offset=-2*data.offset[1];position.top+=data.collisionPosition.top<0?myOffset+atOffset+offset:over>0?myOffset+atOffset+offset:0}}}},$.offset.setOffset||($.offset.setOffset=function(elem,options){/static/.test($.curCSS(elem,"position"))&&(elem.style.position="relative");var curElem=$(elem),curOffset=curElem.offset(),curTop=parseInt($.curCSS(elem,"top",!0),10)||0,curLeft=parseInt($.curCSS(elem,"left",!0),10)||0,props={top:options.top-curOffset.top+curTop,left:options.left-curOffset.left+curLeft};"using"in options?options.using.call(elem,props):curElem.css(props)},$.fn.offset=function(options){var elem=this[0];return elem&&elem.ownerDocument?options?this.each(function(){$.offset.setOffset(this,options)}):_offset.call(this):null}),function(){var testElement,testElementParent,testElementStyle,offset,offsetTotal,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(var i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),testElementParent=body||document.documentElement,testElementParent.insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",offset=$(div).offset(function(_,offset){return offset}).offset(),testElement.innerHTML="",testElementParent.removeChild(testElement),offsetTotal=offset.top+offset.left+(body?2e3:0),support.fractions=offsetTotal>21&&22>offsetTotal}()}(jQuery);var fluid_1_5=fluid_1_5||{},fluid=fluid||fluid_1_5;!function($,fluid){function transformInternal(source,togo,key,args){for(var transit=source[key],j=0;j<args.length-1;++j)transit=args[j+1](transit,key);togo[key]=transit}function initEvents(that,events,pass){fluid.each(events,function(eventSpec,eventKey){var event,isIoCEvent=eventSpec&&("string"!=typeof eventSpec||"{"===eventSpec.charAt(0));isIoCEvent&&"IoC"===pass?fluid.event.resolveEvent?event=fluid.event.resolveEvent(that,eventKey,eventSpec):fluid.fail("fluid.event.resolveEvent could not be loaded - please include FluidIoC.js in order to operate IoC-driven event with descriptor ",eventSpec):"flat"===pass&&(event=fluid.makeEventFirer("unicast"===eventSpec,"preventable"===eventSpec,fluid.event.nameEvent(that,eventKey))),event&&(that.events[eventKey]=event)})}function mergeImpl(policy,basePath,target,source,thisPolicy,rec){fluid.isTracing&&fluid.tracing.pathCount.push(basePath),fluid.mergePolicyIs(thisPolicy,"replace")&&fluid.clear(target),fluid.guardCircularity(rec.seenIds,source,"merging"," when evaluating path "+basePath+' - please protect components from merging using the "nomerge" merge policy');for(var name in source){var path=(basePath?basePath+".":"")+name,newPolicy=policy&&"string"!=typeof policy?policy[path]:policy,funcPolicy="function"==typeof newPolicy,thisTarget=target[name],thisSource=source[name],primitiveTarget=fluid.isPrimitive(thisTarget);void 0!==thisSource&&(funcPolicy||null===thisSource||"object"!=typeof thisSource||fluid.isDOMNode(thisSource)||thisSource.jquery||thisSource===fluid.VALUE||fluid.mergePolicyIs(newPolicy,"preserve")||fluid.mergePolicyIs(newPolicy,"nomerge")?funcPolicy?target[name]=newPolicy.call(null,thisTarget,thisSource,name):fluid.isValue(thisTarget)&&fluid.mergePolicyIs(newPolicy,"reverse")||(target[name]=fluid.isValue(thisTarget)&&fluid.mergePolicyIs(newPolicy,"preserve")?fluid.model.mergeModel(thisTarget,thisSource):thisSource):(primitiveTarget&&(target[name]=thisTarget=fluid.freshContainer(thisSource)),mergeImpl(policy,path,thisTarget,thisSource,newPolicy,rec)))}return target}fluid.version="Infusion 1.5",fluid.Error=Error,fluid.environment={fluid:fluid};var globalObject=window||{};fluid.singleThreadLocal=function(initFunc){var value=initFunc();return function(){return value}},fluid.threadLocal=fluid.singleThreadLocal;var softFailure=[!1];fluid.describeActivity=function(){return[]},fluid.fail=function(message){var args=fluid.makeArray(arguments),activity=fluid.describeActivity(),topFailure=softFailure[0];if("boolean"==typeof topFailure){if(fluid.setLogging(!0),fluid.log.apply(null,["ASSERTION FAILED: "].concat(args).concat(activity)),topFailure)throw new Error(message);message.fail()}else"function"==typeof topFailure&&topFailure(args,activity)},fluid.pushSoftFailure=function(condition){"boolean"==typeof condition||"function"==typeof condition?softFailure.unshift(condition):-1===condition&&softFailure.shift()},fluid.notrycatch=!1,fluid.tryCatch=function(tryfun,catchfun,finallyfun){if(finallyfun=finallyfun||fluid.identity,fluid.notrycatch){var togo=tryfun();return finallyfun(),togo}try{return tryfun()}catch(e){if(!catchfun)throw e;catchfun(e)}finally{finallyfun()}},fluid.expect=function(name,members,target){fluid.transform(fluid.makeArray(members),function(key){"undefined"==typeof target[key]&&fluid.fail(name+" missing required parameter "+key)})};var logging;fluid.isLogging=function(){return logging},fluid.setLogging=function(enabled){logging="boolean"==typeof enabled?enabled:!1},fluid.applyHostFunction=function(obj,func,args){if(func.apply)func.apply(obj,args);else{var applier=Function.prototype.bind.call(func,obj);applier.apply(obj,args)}},fluid.log=function(message){if(logging){var arg0=fluid.renderTimestamp(new Date)+":  ",args=[arg0].concat(fluid.makeArray(arguments)),str=args.join("");"undefined"!=typeof console?console.debug?fluid.applyHostFunction(console,console.debug,args):"function"==typeof console.log?fluid.applyHostFunction(console,console.log,args):console.log(str):"undefined"!=typeof YAHOO?YAHOO.log(str):"undefined"!=typeof opera&&opera.postError(str)}},fluid.identity=function(arg){return arg},fluid.isValue=function(value){return void 0!==value&&null!==value},fluid.isPrimitive=function(value){var valueType=typeof value;return!value||"string"===valueType||"boolean"===valueType||"number"===valueType||"function"===valueType},fluid.isArrayable=function(totest){return totest&&(totest.jquery||"[object Array]"===Object.prototype.toString.call(totest))},fluid.isDOMNode=function(obj){return obj&&"number"==typeof obj.nodeType},fluid.freshContainer=function(tocopy){return fluid.isArrayable(tocopy)?[]:{}},fluid.copy=function(tocopy){return fluid.isPrimitive(tocopy)?tocopy:$.extend(!0,fluid.freshContainer(tocopy),tocopy)},fluid.makeArray=function(arg){var togo=[];if(null!==arg&&void 0!==arg)if(fluid.isPrimitive(arg)||"number"!=typeof arg.length)togo.push(arg);else for(var i=0;i<arg.length;++i)togo[i]=arg[i];return togo},fluid.transform=function(source){var togo=fluid.freshContainer(source);if(fluid.isArrayable(source))for(var i=0;i<source.length;++i)transformInternal(source,togo,i,arguments);else for(var key in source)transformInternal(source,togo,key,arguments);return togo},fluid.each=function(source,func){if(fluid.isArrayable(source))for(var i=0;i<source.length;++i)func(source[i],i);else for(var key in source)func(source[key],key)},fluid.find=function(source,func,deflt){var disp;if(fluid.isArrayable(source)){for(var i=0;i<source.length;++i)if(disp=func(source[i],i),void 0!==disp)return disp}else for(var key in source)if(disp=func(source[key],key),void 0!==disp)return disp;return deflt},fluid.accumulate=function(list,fn,arg){for(var i=0;i<list.length;++i)arg=fn(list[i],arg,i);return arg},fluid.remove_if=function(source,fn){if(fluid.isArrayable(source))for(var i=0;i<source.length;++i)fn(source[i],i)&&(source.splice(i,1),--i);else for(var key in source)fn(source[key],key)&&delete source[key];return source},fluid.filterKeys=function(toFilter,keys,exclude){return fluid.remove_if($.extend({},toFilter),function(value,key){return exclude^-1===$.inArray(key,keys)})},fluid.censorKeys=function(toCensor,keys){return fluid.filterKeys(toCensor,keys,!0)},fluid.makeFlatten=function(index){return function(obj){var togo=[];return fluid.each(obj,function(value,key){togo.push(arguments[index])}),togo}},fluid.keys=fluid.makeFlatten(1),fluid.values=fluid.makeFlatten(0),fluid.contains=function(obj,value){return obj?fluid.find(obj,function(thisValue,key){return value===thisValue?!0:void 0}):void 0},fluid.keyForValue=function(obj,value){return fluid.find(obj,function(thisValue,key){return value===thisValue?key:void 0})},fluid.findKeyInObject=fluid.keyForValue,fluid.arrayToHash=function(array){var togo={};return fluid.each(array,function(el){togo[el]=!0}),togo},fluid.clear=function(target){if(fluid.isArrayable(target))target.length=0;else for(var i in target)delete target[i]},fluid.compareStringLength=function(ascending){return ascending?function(a,b){return a.length-b.length}:function(a,b){return b.length-a.length}},fluid.model={},fluid.VALUE={type:"fluid.marker",value:"VALUE"},fluid.NO_VALUE={type:"fluid.marker",value:"NO_VALUE"},fluid.EXPAND={type:"fluid.marker",value:"EXPAND"},fluid.EXPAND_NOW={type:"fluid.marker",value:"EXPAND_NOW"},fluid.isMarker=function(totest,type){return totest&&"object"==typeof totest&&"fluid.marker"===totest.type?type?totest===type:!0:!1},fluid.model.copyModel=function(target,source){fluid.clear(target),$.extend(!0,target,source)},fluid.model.parseEL=function(EL){return""===EL?[]:String(EL).split(".")},fluid.model.composePath=function(prefix,suffix){return""===prefix?suffix:""===suffix?prefix:prefix+"."+suffix},fluid.model.composeSegments=function(){return fluid.makeArray(arguments).join(".")},fluid.path=fluid.model.composeSegments,fluid.composePath=fluid.model.composePath,fluid.requireDataBinding=function(){fluid.fail("Please include DataBinding.js in order to operate complex model accessor configuration")},fluid.model.setWithStrategy=fluid.model.getWithStrategy=fluid.requireDataBinding,fluid.model.resolvePathSegment=function(root,segment,create,origEnv){return!origEnv&&root.resolvePathSegment?root.resolvePathSegment(segment):create&&void 0===root[segment]?root[segment]={}:root[segment]},fluid.model.pathToSegments=function(EL,config){var parser=config&&config.parser?config.parser.parse:fluid.model.parseEL,segs="number"==typeof EL||"string"==typeof EL?parser(EL):EL;return segs},fluid.model.accessImpl=function(root,EL,newValue,config,initSegs,returnSegs,traverser){var segs=fluid.model.pathToSegments(EL,config),initPos=0;initSegs&&(initPos=initSegs.length,segs=initSegs.concat(segs));var uncess=newValue===fluid.NO_VALUE?0:1,root=traverser(root,segs,initPos,config,uncess);return newValue===fluid.NO_VALUE||newValue===fluid.VALUE?returnSegs?{root:root,segs:segs}:root:void(root[segs[segs.length-1]]=newValue)},fluid.model.accessSimple=function(root,EL,newValue,environment,initSegs,returnSegs){return fluid.model.accessImpl(root,EL,newValue,environment,initSegs,returnSegs,fluid.model.traverseSimple)},fluid.model.traverseSimple=function(root,segs,initPos,environment,uncess){for(var origEnv=environment,limit=segs.length-uncess,i=0;limit>i;++i){if(!root)return root;var segment=segs[i];root=environment&&environment[segment]?environment[segment]:fluid.model.resolvePathSegment(root,segment,1===uncess,origEnv),environment=null}return root},fluid.model.setSimple=function(root,EL,newValue,environment,initSegs){fluid.model.accessSimple(root,EL,newValue,environment,initSegs,!1)},fluid.model.getSimple=function(root,EL,environment,initSegs){return null===EL||void 0===EL||0===EL.length?root:fluid.model.accessSimple(root,EL,fluid.NO_VALUE,environment,initSegs,!1)},fluid.decodeAccessorArg=function(arg3){return arg3&&arg3!==fluid.model.defaultGetConfig&&arg3!==fluid.model.defaultSetConfig?"environment"===arg3.type?arg3.value:void 0:null},fluid.set=function(root,EL,newValue,config,initSegs){var env=fluid.decodeAccessorArg(config);void 0===env?fluid.model.setWithStrategy(root,EL,newValue,config,initSegs):fluid.model.setSimple(root,EL,newValue,env,initSegs)},fluid.get=function(root,EL,config,initSegs){var env=fluid.decodeAccessorArg(config);return void 0===env?fluid.model.getWithStrategy(root,EL,config,initSegs):fluid.model.accessImpl(root,EL,fluid.NO_VALUE,env,null,!1,fluid.model.traverseSimple)},fluid.model.setBeanValue=fluid.set,fluid.model.getBeanValue=fluid.get,fluid.getGlobalValue=function(path,env){return path?(env=env||fluid.environment,fluid.get(globalObject,path,{type:"environment",value:env})):void 0},fluid.invokeGlobalFunction=function(functionPath,args,environment){var func=fluid.getGlobalValue(functionPath,environment);return func?func.apply(null,args||[]):void fluid.fail("Error invoking global function: "+functionPath+" could not be located")},fluid.registerGlobalFunction=function(functionPath,func,env){env=env||fluid.environment,fluid.set(globalObject,functionPath,func,{type:"environment",value:env})},fluid.setGlobalValue=fluid.registerGlobalFunction,fluid.registerNamespace=function(naimspace,env){env=env||fluid.environment;var existing=fluid.getGlobalValue(naimspace,env);return existing||(existing={},fluid.setGlobalValue(naimspace,existing,env)),existing},fluid.dumpEl=fluid.identity,fluid.renderTimestamp=fluid.identity,fluid.registerNamespace("fluid.event"),fluid.generateUniquePrefix=function(){return Math.floor(1e12*Math.random()).toString(36)+"-"};var fluid_prefix=fluid.generateUniquePrefix(),fluid_guid=1;fluid.allocateGuid=function(){return fluid_prefix+fluid_guid++},fluid.event.identifyListener=function(listener){return listener.$$fluid_guid||(listener.$$fluid_guid=fluid.allocateGuid()),listener.$$fluid_guid},fluid.event.impersonateListener=function(origListener,newListener){fluid.event.identifyListener(origListener),newListener.$$fluid_guid=origListener.$$fluid_guid},fluid.event.mapPriority=function(priority,count){return null===priority||void 0===priority?-count:"last"===priority?-Number.MAX_VALUE:"first"===priority?Number.MAX_VALUE:priority},fluid.event.listenerComparator=function(recA,recB){return recB.priority-recA.priority},fluid.event.sortListeners=function(listeners){var togo=[];return fluid.each(listeners,function(listener){togo.push(listener)}),togo.sort(fluid.event.listenerComparator)},fluid.event.resolveListener=function(listener){if(listener.globalName){var listenerFunc=fluid.getGlobalValue(listener.globalName);listenerFunc?listener=listenerFunc:fluid.fail("Unable to look up name "+listener.globalName+" as a global function")}return listener},fluid.event.nameEvent=function(that,eventName){return eventName+" of "+fluid.nameComponent(that)},fluid.event.getEventFirer=function(unicast,preventable,name){function fireToListeners(listeners,args,wrapper){if(listeners){fluid.log("Firing event "+name+" to list of "+listeners.length+" listeners");for(var i=0;i<listeners.length;++i){var lisrec=listeners[i];lisrec.listener=fluid.event.resolveListener(lisrec.listener);var listener=lisrec.listener;if(!lisrec.predicate||lisrec.predicate(listener,args)){var value=fluid.tryCatch(function(){var ret=(wrapper?wrapper(listener):listener).apply(null,args);return preventable&&ret===!1?!1:unicast?ret:void 0},function(e){throw fluid.log("FireEvent received exception "+e.message+" e "+e+" firing to listener "+i),e});if(void 0!==value)return value}}}}var listeners,byId,sortedListeners,that,identify=fluid.event.identifyListener,lazyInit=function(){listeners={},byId={},sortedListeners=[],that.addListener=function(listener,namespace,predicate,priority){if(listener){unicast&&(namespace="unicast"),"string"==typeof listener&&(listener={globalName:listener});var id=identify(listener);namespace=namespace||id;var record={listener:listener,predicate:predicate,namespace:namespace,priority:fluid.event.mapPriority(priority,sortedListeners.length)};listeners[namespace]=byId[id]=record,sortedListeners=fluid.event.sortListeners(listeners)}},that.addListener.apply(null,arguments)};return that={name:name,typeName:"fluid.event.firer",addListener:function(){lazyInit.apply(null,arguments)},removeListener:function(listener){if(listeners){var namespace;if("string"==typeof listener){namespace=listener;var record=listeners[listener];if(!record)return;listener=record.listener}var id=identify(listener);id||fluid.fail("Cannot remove unregistered listener function ",listener," from event "+that.name),namespace=namespace||byId[id]&&byId[id].namespace||id,delete byId[id],delete listeners[namespace],sortedListeners=fluid.event.sortListeners(listeners)}},fireToListeners:function(listeners,args,wrapper){return fireToListeners(listeners,args,wrapper)},fire:function(){return fireToListeners(sortedListeners,arguments)}}},fluid.makeEventFirer=fluid.event.getEventFirer,fluid.fireEvent=function(component,path,args){var firer=fluid.get(component,path);firer&&firer.fire.apply(null,fluid.makeArray(args))},fluid.event.addListenerToFirer=function(firer,value,namespace,wrapper){if(wrapper=wrapper||fluid.identity,fluid.isArrayable(value))for(var i=0;i<value.length;++i)fluid.event.addListenerToFirer(firer,value[i],namespace,wrapper);else"function"==typeof value||"string"==typeof value?wrapper(firer).addListener(value,namespace):value&&"object"==typeof value&&wrapper(firer).addListener(value.listener,namespace||value.namespace,value.predicate,value.priority)},fluid.event.resolveListenerRecord=function(records){return{records:records}},fluid.mergeListeners=function(that,events,listeners){fluid.each(listeners,function(value,key){var firer,namespace;if("{"===key.charAt(0))fluid.expandOptions||fluid.fail("fluid.expandOptions could not be loaded - please include FluidIoC.js in order to operate IoC-driven event with descriptor "+key),firer=fluid.expandOptions(key,that);else{var keydot=key.indexOf(".");-1!==keydot&&(namespace=key.substring(keydot+1),key=key.substring(0,keydot)),events[key]||(fluid.fail("Listener registered for event "+key+" which is not defined for this component"),events[key]=fluid.makeEventFirer(null,null,fluid.event.nameEvent(that,key))),firer=events[key]}record=fluid.event.resolveListenerRecord(value,that,key),fluid.event.addListenerToFirer(firer,record.records,namespace,record.adderWrapper)})},fluid.instantiateFirers=function(that,options){that.events={},initEvents(that,options.events,"flat"),initEvents(that,options.events,"IoC"),fluid.mergeListeners(that,that.events,options.listeners)},fluid.mergeListenerPolicy=function(target,source,key){var hasNamespace="{"!==key.charAt(0)&&-1!==key.indexOf(".");return hasNamespace?source?source:target:fluid.makeArray(target).concat(fluid.makeArray(source))},fluid.mergeListenersPolicy=function(target,source){return target=target||{},fluid.each(source,function(listeners,key){target[key]=fluid.mergeListenerPolicy(target[key],listeners,key)}),target};var defaultsStore={},resolveGradesImpl=function(gs,gradeNames){return gradeNames=fluid.makeArray(gradeNames),fluid.each(gradeNames,function(gradeName){var options=fluid.rawDefaults(gradeName)||{};gs.gradeHash[gradeName]=!0,gs.gradeChain.push(gradeName),gs.optionsChain.push(options);var oGradeNames=fluid.makeArray(options.gradeNames);fluid.each(oGradeNames,function(parent){gs.gradeHash[parent]||resolveGradesImpl(gs,parent)})}),gs};fluid.resolveGradeStructure=function(defaultName,gradeNames){var gradeStruct={gradeChain:[defaultName],gradeHash:{},optionsChain:[]};return resolveGradesImpl(gradeStruct,gradeNames)};var mergedDefaultsCache={};fluid.gradeNamesToKey=function(gradeNames,defaultName){return defaultName+"|"+fluid.makeArray(gradeNames).sort().join("|")},fluid.resolveGrade=function(defaults,defaultName,gradeNames){var mergeArgs=[defaults];if(gradeNames){var gradeStruct=fluid.resolveGradeStructure(defaultName,gradeNames);mergeArgs=gradeStruct.optionsChain.reverse().concat(mergeArgs).concat({gradeNames:gradeStruct.gradeChain})}for(var mergePolicy={},i=0;i<mergeArgs.length;++i)mergePolicy=$.extend(!0,mergePolicy,mergeArgs[i].mergePolicy);mergeArgs=[mergePolicy,{}].concat(mergeArgs);var mergedDefaults=fluid.merge.apply(null,mergeArgs);return mergedDefaults},fluid.getGradedDefaults=function(defaults,defaultName,gradeNames){var key=fluid.gradeNamesToKey(gradeNames,defaultName),mergedDefaults=mergedDefaultsCache[key];return mergedDefaults||(mergedDefaults=mergedDefaultsCache[key]=fluid.resolveGrade(defaults,defaultName,gradeNames)),mergedDefaults},fluid.resolveGradedOptions=function(componentName){var defaults=fluid.rawDefaults(componentName);return defaults?fluid.getGradedDefaults(defaults,componentName,defaults.gradeNames):defaults},fluid.rawDefaults=function(componentName,options){return void 0===options?defaultsStore[componentName]:void(defaultsStore[componentName]=options)},fluid.hasGrade=function(options,gradeName){return options&&options.gradeNames?fluid.contains(options.gradeNames,gradeName):!1},fluid.defaults=function(){var offset=0;"boolean"==typeof arguments[0]&&(offset=1);var componentName=(0===offset?"":"*.global-")+arguments[offset],options=arguments[offset+1];return void 0===options?fluid.resolveGradedOptions(componentName):(options&&options.options&&fluid.fail("Probable error in options structure for "+componentName+' with option named "options" - perhaps you meant to write these options at top level in fluid.defaults? - ',options),fluid.rawDefaults(componentName,options),fluid.hasGrade(options,"autoInit")&&fluid.makeComponent(componentName,fluid.resolveGradedOptions(componentName)),void 0)},fluid.makeComponent=function(componentName,options){options.initFunction&&options.gradeNames||fluid.fail("Cannot autoInit component "+componentName+" which does not have an initFunction and gradeName defined");var creator=function(){return fluid.initComponent(componentName,arguments)},existing=fluid.getGlobalValue(componentName);existing&&$.extend(creator,existing),fluid.setGlobalValue(componentName,creator)},fluid.makeComponents=function(components,env){fluid.each(components,function(value,key){var options={gradeNames:fluid.makeArray(value).concat(["autoInit"])};fluid.defaults(key,options)})},fluid.defaults("fluid.function",{}),fluid.lifecycleFunctions={preInitFunction:!0,postInitFunction:!0,finalInitFunction:!0},fluid.rootMergePolicy=fluid.transform(fluid.lifecycleFunctions,function(){return fluid.mergeListenerPolicy}),fluid.defaults("fluid.littleComponent",{initFunction:"fluid.initLittleComponent",mergePolicy:fluid.rootMergePolicy,argumentMap:{options:0}}),fluid.defaults("fluid.eventedComponent",{gradeNames:["fluid.littleComponent"],events:{onCreate:null,onAttach:null,onClear:null,onDestroy:null},mergePolicy:{listeners:fluid.mergeListenersPolicy}}),fluid.preInitModelComponent=function(that){that.model=that.options.model||{},that.applier=that.options.applier||(fluid.makeChangeApplier?fluid.makeChangeApplier(that.model,that.options.changeApplierOptions):null)},fluid.defaults("fluid.modelComponent",{gradeNames:["fluid.littleComponent"],preInitFunction:{namespace:"preInitModelComponent",listener:"fluid.preInitModelComponent"},mergePolicy:{model:"preserve",applier:"nomerge"}}),fluid.nameComponent=function(that){return that?"component with typename "+that.typeName+" and id "+that.id:"[unknown component]"},fluid.guardCircularity=function(seenIds,source,message1,message2){source&&source.id&&(seenIds[source.id]?seenIds[source.id]===source&&fluid.fail("Circularity in options "+message1+" - "+fluid.nameComponent(source)+" has already been seen"+message2):seenIds[source.id]=source)},fluid.mergePolicyIs=function(policy,test){return"string"==typeof policy&&-1!==$.inArray(test,policy.split(/\s*,\s*/))},fluid.model.mergeModel=function(target,source,applier){if(!fluid.isPrimitive(target)){var copySource=fluid.copy(source);$.extend(!0,source,target),$.extend(!0,source,copySource)}return source},fluid.isDefaultValueMergePolicy=function(policy){return"string"==typeof policy&&-1===policy.indexOf(",")&&!/replace|preserve|nomerge|noexpand|reverse/.test(policy)},fluid.applyDefaultValueMergePolicy=function(defaults,merged){var policy=merged.mergePolicy;if(policy&&"string"!=typeof policy)for(var key in policy){var elrh=policy[key];if(fluid.isDefaultValueMergePolicy(elrh)){var defaultTarget=fluid.get(defaults,key),mergedTarget=fluid.get(merged,key);if(defaultTarget===mergedTarget){var defaultSource=fluid.get(defaults,elrh),mergedSource=fluid.get(merged,elrh);defaultSource!==mergedSource&&fluid.set(merged,key,mergedSource)}}}return merged},fluid.merge=function(policy,target){for(var path="",i=2;i<arguments.length;++i){var source=arguments[i];null!==source&&void 0!==source&&mergeImpl(policy,path,target,source,policy?policy[""]:null,{seenIds:{}})}return target},fluid.transformOptions=function(mergeArgs,transRec){fluid.expect("Options transformation record",["transformer","config"],transRec);var transFunc=fluid.getGlobalValue(transRec.transformer),togo=fluid.transform(mergeArgs,function(value,key){return 0===key?value:transFunc.call(null,value,transRec.config)});return togo},fluid.lastTransformationRecord=function(extraArgs){for(var i=extraArgs.length-1;i>=0;--i)if(extraArgs[i]&&extraArgs[i].transformOptions)return extraArgs[i].transformOptions},fluid.mergeComponentOptions=function(that,componentName,userOptions,localOptions){var defaults=fluid.defaults(componentName)||{},mergePolicy=$.extend({},fluid.rootMergePolicy,defaults.mergePolicy),defaultGrades=defaults.gradeNames;localOptions=defaultGrades?{}:fluid.copy(fluid.getGradedDefaults({},"",localOptions.gradeNames));var extraArgs,mergeArgs=[mergePolicy,localOptions];extraArgs=fluid.expandComponentOptions?fluid.expandComponentOptions(defaults,userOptions,that):[defaults,userOptions];var transRec=fluid.lastTransformationRecord(extraArgs);transRec&&(extraArgs=fluid.transformOptions(extraArgs,transRec)),mergeArgs=mergeArgs.concat(extraArgs);var merged=fluid.merge.apply(null,mergeArgs);merged=fluid.applyDefaultValueMergePolicy(defaults,merged),that.options=merged},fluid.COMPONENT_OPTIONS={type:"fluid.marker",value:"COMPONENT_OPTIONS"},fluid.emptySubcomponent=function(options){var that={};options=fluid.makeArray(options);for(var i=0;i<options.length;++i)that[options[i]]=fluid.identity;return that},fluid.computeNickName=function(typeName){var segs=fluid.model.parseEL(typeName);return segs[segs.length-1]},fluid.typeTag=function(name){return name?{typeName:name,id:fluid.allocateGuid()}:null},fluid.typeFount=function(options){var that=fluid.initLittleComponent("fluid.typeFount",options);return fluid.typeTag(that.options.targetTypeName)},fluid.initLittleComponent=function(name,options,localOptions){var that=fluid.typeTag(name);return that.nickName=options&&options.nickName?options.nickName:fluid.computeNickName(that.typeName),localOptions=localOptions||{gradeNames:"fluid.littleComponent"},fluid.mergeComponentOptions(that,name,options,localOptions),fluid.initLifecycleFunctions(that),fluid.fireEvent(that.options,"preInitFunction",that),fluid.hasGrade(that.options,"fluid.eventedComponent")&&fluid.instantiateFirers(that,that.options),fluid.hasGrade(that.options,"autoInit")||fluid.clearLifecycleFunctions(that.options),that},fluid.updateWithDefaultLifecycle=function(key,value,typeName){var funcName=typeName+"."+key.substring(0,key.length-"function".length),funcVal=fluid.getGlobalValue(funcName);if("function"==typeof funcVal){value=fluid.makeArray(value);var existing=fluid.find(value,function(el){var listener=el.listener||el;return listener==funcVal||listener==funcName?!0:void 0});existing||value.push(funcVal)}return value},fluid.initLifecycleFunctions=function(that){var gradeNames=that.options.gradeNames;fluid.each(fluid.lifecycleFunctions,function(func,key){for(var value=that.options[key],i=gradeNames.length-1;i>=0;--i)"autoInit"!==gradeNames[i]&&(value=fluid.updateWithDefaultLifecycle(key,value,gradeNames[i]));
value&&(that.options[key]=fluid.makeEventFirer(null,null,key),fluid.event.addListenerToFirer(that.options[key],value))})},fluid.clearLifecycleFunctions=function(options){fluid.each(fluid.lifecycleFunctions,function(value,key){delete options[key]}),delete options.initFunction},fluid.diagnoseFailedView=fluid.identity,fluid.makeRootDestroy=function(that){return function(){fluid.fireEvent(that,"events.onClear",[that,"",null]),fluid.fireEvent(that,"events.onDestroy",[that,"",null])}},fluid.initComponent=function(componentName,initArgs){var options=fluid.defaults(componentName);options.gradeNames||fluid.fail("Cannot initialise component "+componentName+" which has no gradeName registered");var args=[componentName].concat(fluid.makeArray(initArgs)),that=fluid.invokeGlobalFunction(options.initFunction,args);return fluid.diagnoseFailedView(componentName,that,options,args),fluid.fireEvent(that.options,"postInitFunction",that),fluid.initDependents&&fluid.initDependents(that),fluid.fireEvent(that.options,"finalInitFunction",that),fluid.clearLifecycleFunctions(that.options),that.destroy=fluid.makeRootDestroy(that),fluid.fireEvent(that,"events.onCreate",that),that.options.returnedPath?fluid.get(that,that.options.returnedPath):that},fluid.initSubcomponentImpl=function(that,entry,args){var togo;if("function"!=typeof entry){var entryType="string"==typeof entry?entry:entry.type,globDef=fluid.defaults(!0,entryType);fluid.merge("reverse",that.options,globDef),togo="fluid.emptySubcomponent"===entryType?fluid.emptySubcomponent(entry.options):fluid.invokeGlobalFunction(entryType,args)}else togo=entry.apply(null,args);var returnedOptions=togo?togo.returnedOptions:null;return returnedOptions&&(fluid.merge(that.options.mergePolicy,that.options,returnedOptions),returnedOptions.listeners&&fluid.mergeListeners(that,that.events,returnedOptions.listeners)),togo},fluid.initSubcomponents=function(that,className,args){var entry=that.options[className];if(entry){var entries=$.makeArray(entry),optindex=-1,togo=[];args=$.makeArray(args);for(var i=0;i<args.length;++i)args[i]===fluid.COMPONENT_OPTIONS&&(optindex=i);for(i=0;i<entries.length;++i)entry=entries[i],-1!==optindex&&(args[optindex]=entry.options),togo[i]=fluid.initSubcomponentImpl(that,entry,args);return togo}},fluid.initSubcomponent=function(that,className,args){return fluid.initSubcomponents(that,className,args)[0]},fluid.stringToRegExp=function(str,flags){return new RegExp(str.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),flags)},fluid.stringTemplate=function(template,values){var keys=fluid.keys(values);keys=keys.sort(fluid.compareStringLength());for(var i=0;i<keys.length;++i){var key=keys[i],re=fluid.stringToRegExp("%"+key,"g");template=template.replace(re,values[key])}return template},fluid.messageResolver=function(options){var that=fluid.initLittleComponent("fluid.messageResolver",options);return that.messageBase=that.options.parseFunc(that.options.messageBase),that.lookup=function(messagecodes){var resolved=fluid.messageResolver.resolveOne(that.messageBase,messagecodes);return void 0===resolved?fluid.find(that.options.parents,function(parent){return parent.lookup(messagecodes)}):{template:resolved,resolveFunc:that.options.resolveFunc}},that.resolve=function(messagecodes,args){if(!messagecodes)return"[No messagecodes provided]";messagecodes=fluid.makeArray(messagecodes);var looked=that.lookup(messagecodes);return looked?looked.resolveFunc(looked.template,args):"[Message string for key "+messagecodes[0]+" not found]"},that},fluid.defaults("fluid.messageResolver",{mergePolicy:{messageBase:"preserve",parents:"nomerge"},resolveFunc:fluid.stringTemplate,parseFunc:fluid.identity,messageBase:{},parents:[]}),fluid.messageResolver.resolveOne=function(messageBase,messagecodes){for(var i=0;i<messagecodes.length;++i){var code=messagecodes[i],message=messageBase[code];if(void 0!==message)return message}},fluid.messageLocator=function(messageBase,resolveFunc){var resolver=fluid.messageResolver({messageBase:messageBase,resolveFunc:resolveFunc});return function(messagecodes,args){return resolver.resolve(messagecodes,args)}}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){function applyOp(node,func){node=$(node),node.trigger("fluid-"+func),node[func]()}var NAMESPACE_KEY="fluid-scoped-data";fluid.getScopedData=function(target,key){var data=$(target).data(NAMESPACE_KEY);return data?data[key]:void 0},fluid.setScopedData=function(target,key,value){$(target).each(function(){var data=$.data(this,NAMESPACE_KEY)||{};data[key]=value,$.data(this,NAMESPACE_KEY,data)})};var lastFocusedElement=null;$(document).bind("focusin",function(event){lastFocusedElement=event.target}),fluid.getLastFocusedElement=function(){return lastFocusedElement};var ENABLEMENT_KEY="enablement";fluid.enabled=function(target,state){return target=$(target),void 0===state?fluid.getScopedData(target,ENABLEMENT_KEY)!==!1:($("*",target).add(target).each(function(){void 0!==fluid.getScopedData(this,ENABLEMENT_KEY)?fluid.setScopedData(this,ENABLEMENT_KEY,state):/select|textarea|input/i.test(this.nodeName)&&$(this).prop("disabled",!state)}),void fluid.setScopedData(target,ENABLEMENT_KEY,state))},fluid.initEnablement=function(target){fluid.setScopedData(target,ENABLEMENT_KEY,!0)},$.each(["focus","blur"],function(i,name){fluid[name]=function(elem){applyOp(elem,name)}})}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.dom=fluid.dom||{};var getNextNode=function(iterator){if(iterator.node.firstChild)return iterator.node=iterator.node.firstChild,iterator.depth+=1,iterator;for(;iterator.node;){if(iterator.node.nextSibling)return iterator.node=iterator.node.nextSibling,iterator;iterator.node=iterator.node.parentNode,iterator.depth-=1}return iterator};fluid.dom.iterateDom=function(node,acceptor,allNodes){for(var condition,currentNode={node:node,depth:0},prevNode=node;null!==currentNode.node&&currentNode.depth>=0&&currentNode.depth<fluid.dom.iterateDom.DOM_BAIL_DEPTH;){if(condition=null,(1===currentNode.node.nodeType||allNodes)&&(condition=acceptor(currentNode.node,currentNode.depth)),condition)if("delete"===condition)currentNode.node.parentNode.removeChild(currentNode.node),currentNode.node=prevNode;else if("stop"===condition)return currentNode.node;prevNode=currentNode.node,currentNode=getNextNode(currentNode)}},fluid.dom.iterateDom.DOM_BAIL_DEPTH=256,fluid.dom.isContainer=function(container,containee){for(;containee;containee=containee.parentNode)if(container===containee)return!0;return!1},fluid.dom.getElementText=function(element){for(var nodes=element.childNodes,text="",i=0;i<nodes.length;++i){var child=nodes[i];3===child.nodeType&&(text+=child.nodeValue)}return text}}(jQuery,fluid_1_5),fluid_1_5=fluid_1_5||{},function($,fluid){var unUnicode=/(\\u[\dabcdef]{4}|\\x[\dabcdef]{2})/g;fluid.unescapeProperties=function(string){string=string.replace(unUnicode,function(match){var code=match.substring(2),parsed=parseInt(code,16);return String.fromCharCode(parsed)});for(var pos=0;;){var backpos=string.indexOf("\\",pos);if(-1===backpos)break;if(backpos===string.length-1)return[string.substring(0,string.length-1),!0];var replace=string.charAt(backpos+1);"n"===replace&&(replace="\n"),"r"===replace&&(replace="\r"),"t"===replace&&(replace="	"),string=string.substring(0,backpos)+replace+string.substring(backpos+2),pos=backpos+1}return[string,!1]};var breakPos=/[^\\][\s:=]/;fluid.parseJavaProperties=function(text){var togo={};text=text.replace(/\r\n/g,"\n"),text=text.replace(/\r/g,"\n"),lines=text.split("\n");for(var contin,key,valueComp,valueRaw,valueEsc,i=0;i<lines.length;++i){var line=$.trim(lines[i]);if(line&&"#"!==line.charAt(0)&&"!"!==line.charAt(0)){if(contin)valueEsc=fluid.unescapeProperties(line);else{valueComp="";var breakpos=line.search(breakPos);-1===breakpos?(key=line,valueRaw=""):(key=$.trim(line.substring(0,breakpos+1)),valueRaw=$.trim(line.substring(breakpos+2)),(":"===valueRaw.charAt(0)||"="===valueRaw.charAt(0))&&(valueRaw=$.trim(valueRaw.substring(1)))),key=fluid.unescapeProperties(key)[0],valueEsc=fluid.unescapeProperties(valueRaw)}contin=valueEsc[1],valueEsc[1]?valueComp+=valueEsc[0]:togo[key]=valueComp+valueEsc[0]}}return togo},fluid.formatMessage=function(messageString,args){if(!args)return messageString;"string"==typeof args&&(args=[args]);for(var i=0;i<args.length;++i)messageString=messageString.replace("{"+i+"}",args[i]);return messageString}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{},fluid=fluid||fluid_1_5;!function($,fluid){function generate(c,count){for(var togo="",i=0;count>i;++i)togo+=c;return togo}function printImpl(obj,small,options){var big=small+options.indentChars;if(null===obj)return"null";if(fluid.isPrimitive(obj))return JSON.stringify(obj);var j=[];if(fluid.isArrayable(obj)){if(0===obj.length)return"[]";for(var i=0;i<obj.length;++i)j[i]=printImpl(obj[i],big,options);return"[\n"+big+j.join(",\n"+big)+"\n"+small+"]"}var i=0;return fluid.each(obj,function(value,key){j[i++]=JSON.stringify(key)+": "+printImpl(value,big,options)}),"{\n"+big+j.join(",\n"+big)+"\n"+small+"}"}fluid.renderTimestamp=function(date){var zeropad=function(num,width){width||(width=2);var numstr=void 0==num?"":num.toString();return"00000".substring(5-width+numstr.length)+numstr};return zeropad(date.getHours())+":"+zeropad(date.getMinutes())+":"+zeropad(date.getSeconds())+"."+zeropad(date.getMilliseconds(),3)},fluid.isTracing=!1,fluid.registerNamespace("fluid.tracing"),fluid.tracing.pathCount=[],fluid.tracing.summarisePathCount=function(pathCount){pathCount=pathCount||fluid.tracing.pathCount;for(var togo={},i=0;i<pathCount.length;++i){var path=pathCount[i];togo[path]?++togo[path]:togo[path]=1}var toReallyGo=[];return fluid.each(togo,function(el,path){toReallyGo.push({path:path,count:el})}),toReallyGo.sort(function(a,b){return b.count-a.count}),toReallyGo},fluid.tracing.condensePathCount=function(prefixes,pathCount){prefixes=fluid.makeArray(prefixes);var prefixCount={};fluid.each(prefixes,function(prefix){prefixCount[prefix]=0});var togo=[];return fluid.each(pathCount,function(el){var path=el.path;fluid.find(prefixes,function(prefix){return 0===path.indexOf(prefix)?(prefixCount[prefix]+=el.count,!0):void 0})||togo.push(el)}),fluid.each(prefixCount,function(count,path){togo.unshift({path:path,count:count})}),togo},fluid.detectStackStyle=function(e){var style="other",stackStyle={offset:0};return e.arguments?style="chrome":"undefined"!=typeof window&&window.opera&&e.stacktrace?style="opera10":e.stack?(style="firefox",stackStyle.offset=-1===e.stack.indexOf("Trace exception")?1:0):"undefined"==typeof window||!window.opera||"stacktrace"in e||(style="opera"),stackStyle.style=style,stackStyle},fluid.obtainException=function(){try{throw new Error("Trace exception")}catch(e){return e}};var stackStyle=fluid.detectStackStyle(fluid.obtainException());fluid.registerNamespace("fluid.exceptionDecoders"),fluid.decodeStack=function(){if("firefox"!==stackStyle.style)return null;var e=fluid.obtainException();return fluid.exceptionDecoders[stackStyle.style](e)},fluid.exceptionDecoders.firefox=function(e){var lines=e.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n");return fluid.transform(lines,function(line){var atind=line.indexOf("@");return-1===atind?[line]:[line.substring(atind+1),line.substring(0,atind)]})},fluid.getCallerInfo=function(atDepth){atDepth=(atDepth||3)-stackStyle.offset;var stack=fluid.decodeStack();return stack?stack[atDepth][0]:null},fluid.prettyPrintJSON=function(obj,options){return options=$.extend({indent:4},options),options.indentChars=generate(" ",options.indent),printImpl(obj,"",options)},fluid.dumpEl=function(element){var togo;if(!element)return"null";if(3===element.nodeType||8===element.nodeType)return"[data: "+element.data+"]";if(9===element.nodeType)return"[document: location "+element.location+"]";if(!element.nodeType&&fluid.isArrayable(element)){togo="[";for(var i=0;i<element.length;++i)togo+=fluid.dumpEl(element[i]),i<element.length-1&&(togo+=", ");return togo+"]"}return element=$(element),togo=element.get(0).tagName,element.id&&(togo+="#"+element.id),element.attr("class")&&(togo+="."+element.attr("class")),togo}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){function lastDotIndex(path){return path.lastIndexOf(".")}function bindRequestChange(that){that.requestChange=function(path,value,type){var changeRequest={path:path,value:value,type:type};that.fireChangeRequest(changeRequest)}}function sourceWrapModelChanged(modelChanged,threadLocal){return function(changeRequest){var sources=threadLocal().sources,args=arguments,source=changeRequest.source||"";fluid.tryCatch(function(){void 0===sources[source]&&(sources[source]=0),++sources[source],modelChanged.apply(null,args)},null,function(){--sources[source]})}}fluid.BINDING_ROOT_KEY="fluid-binding-root",fluid.findData=function(elem,name){for(;elem;){var data=$.data(elem,name);if(data)return data;elem=elem.parentNode}},fluid.bindFossils=function(node,data,fossils){$.data(node,fluid.BINDING_ROOT_KEY,{data:data,fossils:fossils})},fluid.boundPathForNode=function(node,fossils){node=fluid.unwrap(node);var key=node.name||node.id,record=fossils[key];return record?record.EL:null},fluid.applyBoundChange=function(node,newValue,applier){node=fluid.unwrap(node),void 0===newValue&&(newValue=fluid.value(node)),void 0===node.nodeType&&node.length>0&&(node=node[0]);var root=fluid.findData(node,fluid.BINDING_ROOT_KEY);root||fluid.fail("Bound data could not be discovered in any node above "+fluid.dumpEl(node));var name=node.name,fossil=root.fossils[name];fossil||fluid.fail("No fossil discovered for name "+name+" in fossil record above "+fluid.dumpEl(node)),"boolean"==typeof fossil.oldvalue&&(newValue=newValue[0]?!0:!1);var EL=root.fossils[name].EL;applier?applier.fireChangeRequest({path:EL,value:newValue,source:node.id}):fluid.set(root.data,EL,newValue)},fluid.model.makeEnvironmentStrategy=function(environment){return function(root,segment,index){return 0===index&&environment[segment]?environment[segment]:void 0}},fluid.model.defaultCreatorStrategy=function(root,segment){return void 0===root[segment]?(root[segment]={},root[segment]):void 0},fluid.model.defaultFetchStrategy=function(root,segment){return""===segment?root:root[segment]},fluid.model.funcResolverStrategy=function(root,segment){return root.resolvePathSegment?root.resolvePathSegment(segment):void 0},fluid.model.defaultGetConfig={strategies:[fluid.model.funcResolverStrategy,fluid.model.defaultFetchStrategy]},fluid.model.defaultSetConfig={strategies:[fluid.model.funcResolverStrategy,fluid.model.defaultFetchStrategy,fluid.model.defaultCreatorStrategy]},fluid.model.traverseWithStrategy=function(root,segs,initPos,config,uncess){for(var strategies=config.strategies,limit=segs.length-uncess,i=initPos;limit>i;++i){if(!root)return root;for(var accepted=void 0,j=0;j<strategies.length;++j){var value=strategies[j](root,segs[i],i+1,segs);void 0===accepted&&(accepted=value)}accepted===fluid.NO_VALUE&&(accepted=void 0),root=accepted}return root},fluid.model.getValueAndSegments=function(root,EL,config,initSegs){return fluid.model.accessWithStrategy(root,EL,fluid.NO_VALUE,config,initSegs,!0)},fluid.model.makeTrundler=function(config){return function(valueSeg,EL){return fluid.model.getValueAndSegments(valueSeg.root,EL,config,valueSeg.segs)}},fluid.model.getWithStrategy=function(root,EL,config,initSegs){return fluid.model.accessWithStrategy(root,EL,fluid.NO_VALUE,config,initSegs)},fluid.model.setWithStrategy=function(root,EL,newValue,config,initSegs){fluid.model.accessWithStrategy(root,EL,newValue,config,initSegs)},fluid.model.accessWithStrategy=function(root,EL,newValue,config,initSegs,returnSegs){if(fluid.isPrimitive(EL)||fluid.isArrayable(EL))return fluid.model.accessImpl(root,EL,newValue,config,initSegs,returnSegs,fluid.model.traverseWithStrategy);var key=EL.type||"default",resolver=config.resolvers[key];resolver||fluid.fail("Unable to find resolver of type "+key);var trundler=fluid.model.makeTrundler(config),valueSeg={root:root,segs:initSegs};return valueSeg=resolver(valueSeg,EL,trundler),EL.path&&valueSeg&&(valueSeg=trundler(valueSeg,EL.path)),returnSegs?valueSeg:valueSeg?valueSeg.root:void 0},fluid.pathUtil={};var getPathSegmentImpl=function(accept,path,i){var segment=null;accept&&(segment="");for(var escaped=!1,limit=path.length;limit>i;++i){var c=path.charAt(i);if(escaped)escaped=!1,null!==segment&&(segment+=c);else{if("."===c)break;"\\"===c?escaped=!0:null!==segment&&(segment+=c)}}return null!==segment&&(accept[0]=segment),i},globalAccept=[];fluid.pathUtil.getPathSegment=function(path,i){return getPathSegmentImpl(globalAccept,path,i),globalAccept[0]},fluid.pathUtil.getHeadPath=function(path){return fluid.pathUtil.getPathSegment(path,0)},fluid.pathUtil.getFromHeadPath=function(path){var firstdot=getPathSegmentImpl(null,path,0);return firstdot===path.length?"":path.substring(firstdot+1)},fluid.pathUtil.getToTailPath=function(path){var lastdot=lastDotIndex(path);return-1===lastdot?"":path.substring(0,lastdot)},fluid.pathUtil.getTailPath=function(path){var lastdot=lastDotIndex(path);return fluid.pathUtil.getPathSegment(path,lastdot+1)},fluid.pathUtil.parseEL=function(path){for(var togo=[],index=0,limit=path.length;limit>index;){var firstdot=getPathSegmentImpl(globalAccept,path,index);togo.push(globalAccept[0]),index=firstdot+1}return togo};var composeSegment=function(prefix,toappend){for(var i=0;i<toappend.length;++i){var c=toappend.charAt(i);("."===c||"\\"===c||"}"===c)&&(prefix+="\\"),prefix+=c}return prefix};fluid.pathUtil.escapeSegment=function(segment){return composeSegment("",segment)},fluid.pathUtil.composePath=function(prefix,suffix){return 0!==prefix.length&&(prefix+="."),composeSegment(prefix,suffix)},fluid.pathUtil.matchSegments=function(toMatch,segs,start,end){if(end-start!==toMatch.length)return!1;for(var i=start;end>i;++i)if(segs[i]!==toMatch[i-start])return!1;return!0},fluid.pathUtil.getExcessPath=function(base,longer){var index=longer.indexOf(base);return 0!==index&&fluid.fail("Path "+base+" is not a prefix of path "+longer),base.length===longer.length?"":("."!==longer[base.length]&&fluid.fail("Path "+base+" is not properly nested in path "+longer),longer.substring(base.length+1))},fluid.pathUtil.matchPath=function(spec,path,exact){for(var togo="";;){if(""===path^""===spec&&exact)return null;if(!spec||!path)break;var spechead=fluid.pathUtil.getHeadPath(spec),pathhead=fluid.pathUtil.getHeadPath(path);if("*"!==spechead&&spechead!==pathhead)return null;togo=fluid.pathUtil.composePath(togo,pathhead),spec=fluid.pathUtil.getFromHeadPath(spec),path=fluid.pathUtil.getFromHeadPath(path)}return togo},fluid.model.isNullChange=function(model,request,resolverGetConfig){if("ADD"===request.type){var existing=fluid.get(model,request.path,resolverGetConfig);if(existing===request.value)return!0}},fluid.model.applyChangeRequest=function(model,request,resolverSetConfig){var pen=fluid.model.accessWithStrategy(model,request.path,fluid.VALUE,resolverSetConfig||fluid.model.defaultSetConfig,null,!0),last=pen.segs[pen.segs.length-1];"ADD"===request.type||"MERGE"===request.type?""===request.path||"MERGE"===request.type?("ADD"===request.type&&fluid.clear(pen.root),$.extend(!0,""===request.path?pen.root:pen.root[last],request.value)):pen.root[last]=request.value:"DELETE"===request.type&&(""===request.path?fluid.clear(pen.root):delete pen.root[last])},fluid.addSourceGuardedListener=function(applier,path,source,func,eventName){eventName=eventName||"modelChanged",applier[eventName].addListener(path,function(){applier.hasChangeSource(source)||func.apply(null,arguments)})},fluid.fireSourcedChange=function(applier,path,value,source){applier.fireChangeRequest({path:path,value:value,source:source})},fluid.requestChanges=function(applier,changes){for(var i=0;i<changes.length;++i)applier.fireChangeRequest(changes[i])},fluid.makeChangeApplier=function(model,options){function makeGuardWrapper(cullUnchanged){if(!cullUnchanged)return null;var togo=function(guard){return function(model,changeRequest,internalApplier){var oldRet=guard(model,changeRequest,internalApplier);return oldRet===!1?!1:fluid.model.isNullChange(model,changeRequest)?(togo.culled=!0,!1):void 0}};return togo}function wrapListener(listener,spec){var pathSpec=spec,transactional=!1,priority=Number.MAX_VALUE;"string"!=typeof spec?(pathSpec=spec.path,transactional=spec.transactional,void 0!==spec.priority&&(priority=spec.priority)):"!"===pathSpec.charAt(0)&&(transactional=!0,pathSpec=pathSpec.substring(1));var wrapped=function(changePath,fireSpec,accum){var guid=fluid.event.identifyListener(listener),exist=fireSpec.guids[guid];if(exist)accum&&(exist.accumulate||(exist.accumulate=[]),exist.accumulate.push(accum));else{var match=fluid.pathUtil.matchPath(pathSpec,changePath);if(null!==match){var record={changePath:changePath,pathSpec:pathSpec,listener:listener,priority:priority,transactional:transactional};accum&&(record.accumulate=[accum]),fireSpec.guids[guid]=record;var collection=transactional?"transListeners":"listeners";fireSpec[collection].push(record),fireSpec.all.push(record)}}};return fluid.event.impersonateListener(listener,wrapped),wrapped}function fireFromSpec(name,fireSpec,args,category,wrapper){return baseEvents[name].fireToListeners(fireSpec[category],args,wrapper)}function fireComparator(recA,recB){return recA.priority-recB.priority}function prepareFireEvent(name,changePath,fireSpec,accum){baseEvents[name].fire(changePath,fireSpec,accum),fireSpec.all.sort(fireComparator),fireSpec.listeners.sort(fireComparator),fireSpec.transListeners.sort(fireComparator)}function makeFireSpec(){return{guids:{},all:[],listeners:[],transListeners:[]}}function getFireSpec(name,changePath){var fireSpec=makeFireSpec();return prepareFireEvent(name,changePath,fireSpec),fireSpec}function fireEvent(name,changePath,args,wrapper){var fireSpec=getFireSpec(name,changePath);return fireFromSpec(name,fireSpec,args,"all",wrapper)}function adaptListener(that,name){that[name]={addListener:function(spec,listener,namespace){baseEvents[name].addListener(wrapListener(listener,spec),namespace)},removeListener:function(listener){baseEvents[name].removeListener(listener)}}}function preFireChangeRequest(changeRequest){changeRequest.type||(changeRequest.type="ADD")}function fireAgglomerated(eventName,formName,changes,args,accpos){for(var fireSpec=makeFireSpec(),i=0;i<changes.length;++i)prepareFireEvent(eventName,changes[i].path,fireSpec,changes[i]);for(var j=0;j<fireSpec[formName].length;++j){var spec=fireSpec[formName][j];accpos&&(args[accpos]=spec.accumulate);var ret=spec.listener.apply(null,args);if(ret===!1)return!1}}options=options||{};var baseEvents={guards:fluid.event.getEventFirer(!1,!0,"guard event"),postGuards:fluid.event.getEventFirer(!1,!0,"postGuard event"),modelChanged:fluid.event.getEventFirer(!1,!1,"modelChanged event")},threadLocal=fluid.threadLocal(function(){return{sources:{}}}),that={changeid:fluid.allocateGuid(),model:model};adaptListener(that,"guards"),adaptListener(that,"postGuards"),adaptListener(that,"modelChanged");var bareApplier={fireChangeRequest:function(changeRequest){that.fireChangeRequest(changeRequest,!0)}};return bindRequestChange(bareApplier),that.fireChangeRequest=function(changeRequest,defeatGuards){preFireChangeRequest(changeRequest);var guardFireSpec=defeatGuards?null:getFireSpec("guards",changeRequest.path);if(guardFireSpec&&guardFireSpec.transListeners.length>0){var ation=that.initiate();ation.fireChangeRequest(changeRequest,guardFireSpec),ation.commit()}else{if(!defeatGuards){var prevent=fireFromSpec("guards",guardFireSpec,[model,changeRequest,bareApplier],"listeners");if(prevent===!1)return!1}var oldModel=model;options.thin||(oldModel={},fluid.model.copyModel(oldModel,model)),fluid.model.applyChangeRequest(model,changeRequest,options.resolverSetConfig),fireEvent("modelChanged",changeRequest.path,[model,oldModel,[changeRequest]])}},that.fireChangeRequest=sourceWrapModelChanged(that.fireChangeRequest,threadLocal),bindRequestChange(that),that.initiate=function(newModel){var cancelled=!1,changes=[];options.thin?newModel=model:(newModel=newModel||{},fluid.model.copyModel(newModel,model));var internalApplier={fireChangeRequest:function(changeRequest){preFireChangeRequest(changeRequest),fluid.model.applyChangeRequest(newModel,changeRequest,options.resolverSetConfig),changes.push(changeRequest)}};bindRequestChange(internalApplier);var ation={commit:function(){var oldModel;if(cancelled)return!1;var ret=fireAgglomerated("postGuards","transListeners",changes,[newModel,null,internalApplier],1);return ret===!1?!1:(options.thin?oldModel=model:(oldModel={},fluid.model.copyModel(oldModel,model),fluid.clear(model),fluid.model.copyModel(model,newModel)),void fireAgglomerated("modelChanged","all",changes,[model,oldModel,null],2))},fireChangeRequest:function(changeRequest){if(preFireChangeRequest(changeRequest),!options.cullUnchanged||!fluid.model.isNullChange(model,changeRequest,options.resolverGetConfig)){var wrapper=makeGuardWrapper(options.cullUnchanged),prevent=fireEvent("guards",changeRequest.path,[newModel,changeRequest,internalApplier],wrapper);prevent!==!1||wrapper&&wrapper.culled||(cancelled=!0),cancelled||wrapper&&wrapper.culled||(fluid.model.applyChangeRequest(newModel,changeRequest,options.resolverSetConfig),changes.push(changeRequest))}}};return ation.fireChangeRequest=sourceWrapModelChanged(ation.fireChangeRequest,threadLocal),bindRequestChange(ation),ation},that.hasChangeSource=function(source){return threadLocal().sources[source]>0},that},fluid.makeSuperApplier=function(){var subAppliers=[],that={};return that.addSubApplier=function(path,subApplier){subAppliers.push({path:path,subApplier:subApplier})},that.fireChangeRequest=function(request){for(var i=0;i<subAppliers.length;++i){var path=subAppliers[i].path;if(0===request.path.indexOf(path)){var subpath=request.path.substring(path.length+1),subRequest=fluid.copy(request);subRequest.path=subpath,subAppliers[i].subApplier.fireChangeRequest(subRequest)}}},bindRequestChange(that),that},fluid.attachModel=function(baseModel,path,model){for(var segs=fluid.model.parseEL(path),i=0;i<segs.length-1;++i){var seg=segs[i],subModel=baseModel[seg];subModel||(baseModel[seg]=subModel={}),baseModel=subModel}baseModel[segs[segs.length-1]]=model},fluid.assembleModel=function(modelSpec){var model={},superApplier=fluid.makeSuperApplier(),togo={model:model,applier:superApplier};for(var path in modelSpec){var rec=modelSpec[path];fluid.attachModel(model,path,rec.model),rec.applier&&superApplier.addSubApplier(path,rec.applier)}return togo}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{},fluid=fluid||fluid_1_5;!function($){fluid.registerNamespace("fluid.model.transform"),fluid.defaults("fluid.transformFunction",{gradeNames:"fluid.function"}),fluid.defaults("fluid.standardInputTransformFunction",{gradeNames:"fluid.transformFunction"}),fluid.defaults("fluid.standardOutputTransformFunction",{gradeNames:"fluid.transformFunction"}),fluid.defaults("fluid.standardTransformFunction",{gradeNames:["fluid.standardInputTransformFunction","fluid.standardOutputTransformFunction"]}),fluid.defaults("fluid.lens",{gradeNames:"fluid.transformFunction",invertConfiguration:null}),fluid.model.transform.pathToRule=function(inputPath){return{expander:{type:"fluid.model.transform.value",inputPath:inputPath}}},fluid.model.transform.valueToRule=function(value){return{expander:{type:"fluid.model.transform.literalValue",value:value}}},fluid.model.composePaths=function(prefix,suffix){return prefix=prefix||"",suffix=suffix||"",prefix?suffix?prefix+"."+suffix:prefix:suffix},fluid.model.transform.accumulateInputPath=function(inputPath,expander,paths){void 0!==inputPath&&paths.push(fluid.model.composePaths(expander.inputPrefix,inputPath))},fluid.model.transform.getValue=function(inputPath,value,expander){var togo;return void 0!==inputPath&&(togo=fluid.get(expander.source,fluid.model.composePaths(expander.inputPrefix,inputPath),expander.resolverGetConfig)),void 0===togo&&(togo=fluid.isPrimitive(value)?value:expander.expand(value)),togo},fluid.model.transform.NONDEFAULT_OUTPUT_PATH_RETURN={},fluid.model.transform.setValue=function(userOutputPath,value,expander){var toset=fluid.copy(value),outputPath=fluid.model.composePaths(expander.outputPrefix,userOutputPath);return void 0!==toset&&expander.applier.requestChange(outputPath,toset),userOutputPath?fluid.model.transform.NONDEFAULT_OUTPUT_PATH_RETURN:toset},fluid.model.transform.value=fluid.identity,fluid.defaults("fluid.model.transform.value",{gradeNames:"fluid.standardTransformFunction",invertConfiguration:"fluid.model.transform.invertValue"}),fluid.model.transform.invertValue=function(expandSpec,expander){var togo=fluid.copy(expandSpec);return togo.inputPath=fluid.model.composePaths(expander.outputPrefix,expandSpec.outputPath),togo.outputPath=fluid.model.composePaths(expander.inputPrefix,expandSpec.inputPath),togo},fluid.model.transform.literalValue=function(expanderSpec){return expanderSpec.value},fluid.defaults("fluid.model.transform.literalValue",{gradeNames:"fluid.standardOutputTransformFunction"}),fluid.model.transform.arrayValue=fluid.makeArray,fluid.defaults("fluid.model.transform.arrayValue",{gradeNames:"fluid.standardTransformFunction"}),fluid.model.transform.count=function(value){return fluid.makeArray(value).length},fluid.defaults("fluid.model.transform.count",{gradeNames:"fluid.standardTransformFunction"}),fluid.model.transform.firstValue=function(expandSpec,expander){expandSpec.values&&expandSpec.values.length||fluid.fail('firstValue transformer requires an array of values at path named "values", supplied',expandSpec);for(var i=0;i<expandSpec.values.length;i++){var value=expandSpec.values[i],expanded=expander.expand(value);if(void 0!==expanded)return expanded}},fluid.defaults("fluid.model.transform.firstValue",{gradeNames:"fluid.transformFunction"}),fluid.deepEquals=function(expected,actual,stats){fluid.isPrimitive(expected)?expected===actual?++stats.matchCount:(++stats.mismatchCount,stats.messages.push("Value mismatch at path "+stats.path+": expected "+expected+" actual "+actual)):typeof expected!=typeof actual?(++stats.mismatchCount,stats.messages.push("Type mismatch at path "+stats.path+": expected "+typeof expected+" actual "+typeof actual)):fluid.each(expected,function(value,key){stats.pathOps.push(key),fluid.deepEquals(expected[key],actual[key],stats),stats.pathOps.pop(key)})},fluid.model.transform.matchValue=function(expected,actual){if(fluid.isPrimitive(expected))return expected===actual?1:0;var stats={matchCount:0,mismatchCount:0,messages:[]};return fluid.model.makePathStack(stats,"path"),fluid.deepEquals(expected,actual,stats),stats.matchCount},fluid.model.transform.compareMatches=function(speca,specb){return specb.matchCount-speca.matchCount},fluid.firstDefined=function(a,b){return void 0===a?b:a},fluid.model.transform.matchValueMapperFull=function(outerValue,expander,expandSpec){var o=expandSpec.options;if(0===o.length&&fluid.fail("valueMapper supplied empty list of options: ",expandSpec),1===o.length)return 0;for(var matchPower=[],i=0;i<o.length;++i){var option=o[i],value=fluid.firstDefined(fluid.model.transform.getValue(option.inputPath,void 0,expander),outerValue),matchCount=fluid.model.transform.matchValue(option.undefinedInputValue?void 0:option.inputValue,value);matchPower[i]={index:i,matchCount:matchCount}}return matchPower.sort(fluid.model.transform.compareMatches),matchPower[0].matchCount===matchPower[1].matchCount?-1:matchPower[0].index},fluid.model.transform.valueMapper=function(expandSpec,expander){expandSpec.options||fluid.fail('demultiplexValue requires a list or hash of options at path named "options", supplied ',expandSpec);var value=fluid.model.transform.getValue(expandSpec.inputPath,void 0,expander),deref=fluid.isArrayable(expandSpec.options)?function(testVal){var index=fluid.model.transform.matchValueMapperFull(testVal,expander,expandSpec);
return-1===index?null:expandSpec.options[index]}:function(testVal){return expandSpec.options[testVal]},indexed=deref(value);if(indexed||(indexed=deref(expandSpec.defaultInputValue)),indexed){var outputValue=fluid.isPrimitive(indexed)?indexed:indexed.undefinedOutputValue?void 0:void 0===indexed.outputValue?expandSpec.defaultOutputValue:indexed.outputValue,outputPath=void 0===indexed.outputPath?expandSpec.outputPath:indexed.outputPath;return fluid.model.transform.setValue(outputPath,outputValue,expander)}},fluid.model.transform.valueMapper.invert=function(expandSpec,expander){var options=[],togo={type:"fluid.model.transform.valueMapper",options:options},isArray=fluid.isArrayable(expandSpec.options),findCustom=function(name){return fluid.find(expandSpec.options,function(option){return option[name]?!0:void 0})},anyCustomOutput=findCustom("outputPath"),anyCustomInput=findCustom("inputPath");anyCustomOutput||(togo.inputPath=fluid.model.composePaths(expander.outputPrefix,expandSpec.outputPath)),anyCustomInput||(togo.outputPath=fluid.model.composePaths(expander.inputPrefix,expandSpec.inputPath));var def=fluid.firstDefined;return fluid.each(expandSpec.options,function(option,key){var outOption={},origInputValue=def(isArray?option.inputValue:key,expandSpec.defaultInputValue);void 0===origInputValue&&fluid.fail("Failure inverting configuration for valueMapper - inputValue could not be resolved for record "+key+": ",expandSpec),outOption.outputValue=origInputValue;var origOutputValue=def(option.outputValue,expandSpec.defaultOutputValue);outOption.inputValue=origOutputValue,anyCustomOutput&&(outOption.inputPath=fluid.model.composePaths(expander.outputPrefix,def(option.outputPath,expandSpec.outputPath))),anyCustomInput&&(outOption.outputPath=fluid.model.composePaths(expander.inputPrefix,def(option.inputPath,expandSpec.inputPath))),options.push(outOption)}),togo},fluid.model.transform.valueMapper.collect=function(expandSpec,expander){var togo=[];return fluid.model.transform.accumulateInputPath(expandSpec.inputPath,expander,togo),fluid.each(expandSpec.options,function(option){fluid.model.transform.accumulateInputPath(option.inputPath,expander,togo)}),togo},fluid.defaults("fluid.model.transform.valueMapper",{gradeNames:["fluid.transformFunction","fluid.lens"],invertConfiguration:"fluid.model.transform.valueMapper.invert",collectInputPaths:"fluid.model.transform.valueMapper.collect"}),fluid.model.transform.prefixApplier=function(expandSpec,expander){expandSpec.inputPrefix&&expander.inputPrefixOp.push(expandSpec.inputPrefix),expandSpec.outputPrefix&&expander.outputPrefixOp.push(expandSpec.outputPrefix),expander.expand(expandSpec.value),expandSpec.inputPrefix&&expander.inputPrefixOp.pop(),expandSpec.outputPrefix&&expander.outputPrefixOp.pop()},fluid.defaults("fluid.model.transform.prefixApplier",{gradeNames:["fluid.transformFunction"]}),fluid.model.makePathStack=function(expander,prefixName){var stack=expander[prefixName+"Stack"]=[];return expander[prefixName]="",{push:function(prefix){var newPath=fluid.model.composePaths(expander[prefixName],prefix);stack.push(expander[prefixName]),expander[prefixName]=newPath},pop:function(){expander[prefixName]=stack.pop()}}},fluid.model.transform.expandExpander=function(expandSpec,expander){var typeName=expandSpec.type;typeName||fluid.fail("Transformation record is missing a type name: ",expandSpec),-1===typeName.indexOf(".")&&(typeName="fluid.model.transform."+typeName);var expanderFn=fluid.getGlobalValue(typeName),expdef=fluid.defaults(typeName);"function"!=typeof expanderFn&&fluid.fail("Transformation record specifies transformation function with name "+expandSpec.type+" which is not a function - ",expanderFn),fluid.hasGrade(expdef,"fluid.transformFunction")||(expdef=fluid.defaults("fluid.standardTransformFunction"));var expanderArgs=[expandSpec,expander];if(fluid.hasGrade(expdef,"fluid.standardInputTransformFunction")){var expanded=fluid.model.transform.getValue(expandSpec.inputPath,expandSpec.value,expander);expanderArgs[0]=expanded,expanderArgs[2]=expandSpec}var transformed=expanderFn.apply(null,expanderArgs);return fluid.hasGrade(expdef,"fluid.standardOutputTransformFunction")&&(transformed=fluid.model.transform.setValue(expandSpec.outputPath,transformed,expander)),transformed},fluid.model.transform.expandWildcards=function(expander,source){fluid.each(source,function(value,key){var q=expander.queued;expander.pathOp.push(fluid.pathUtil.escapeSegment(key.toString()));for(var i=0;i<q.length;++i)if(fluid.pathUtil.matchPath(q[i].matchPath,expander.path,!0)){var esCopy=fluid.copy(q[i].expandSpec);(void 0===esCopy.inputPath||fluid.model.transform.hasWildcard(esCopy.inputPath))&&(esCopy.inputPath=""),expander.inputPrefixOp.push(expander.path),expander.outputPrefixOp.push(expander.path),fluid.model.transform.expandExpander(esCopy,expander),expander.outputPrefixOp.pop(),expander.inputPrefixOp.pop()}fluid.isPrimitive(value)||fluid.model.transform.expandWildcards(expander,value),expander.pathOp.pop()})},fluid.model.transform.hasWildcard=function(path){return"string"==typeof path&&-1!==path.indexOf("*")},fluid.model.transform.maybePushWildcard=function(expander,expandSpec){var matchPath,hw=fluid.model.transform.hasWildcard;return hw(expandSpec.inputPath)?matchPath=fluid.model.composePaths(expander.inputPrefix,expandSpec.inputPath):(hw(expander.outputPrefix)||hw(expandSpec.outputPath))&&(matchPath=fluid.model.composePaths(expander.outputPrefix,expandSpec.outputPath)),matchPath?(expander.queued.push({expandSpec:expandSpec,outputPrefix:expander.outputPrefix,inputPrefix:expander.inputPrefix,matchPath:matchPath}),!0):!1},fluid.model.sortByKeyLength=function(inObject){var keys=fluid.keys(inObject);return keys.sort(fluid.compareStringLength(!0))},fluid.model.transform.handleExpandExpander=function(expander,expandSpec){return fluid.model.transform.maybePushWildcard(expander,expandSpec)?void 0:fluid.model.transform.expandExpander(expandSpec,expander)},fluid.model.transform.handleInvertExpander=function(expander,expandSpec,expdef){var invertor=expdef.invertConfiguration;if(invertor){var inverted=fluid.invokeGlobalFunction(invertor,[expandSpec,expander]);expander.inverted.push(inverted)}},fluid.model.transform.handlerCollectExpander=function(expander,expandSpec,expdef){var standardInput=fluid.hasGrade(expdef,"fluid.standardInputTransformFunction");if(standardInput)fluid.model.transform.accumulateInputPath(expandSpec.inputPath,expander,expander.inputPaths);else{var collector=expdef.collectInputPaths;if(collector){var collected=fluid.makeArray(fluid.invokeGlobalFunction(collector,[expandSpec,expander]));expander.inputPaths=expander.inputPaths.concat(collected)}}},fluid.model.transform.expandValue=function(rule,expander){"string"==typeof rule?rule=fluid.model.transform.pathToRule(rule):rule.value&&""!==expander.outputPrefix&&(rule=fluid.model.transform.valueToRule(rule.value));var togo;if(rule.expander)for(var expanders=fluid.makeArray(rule.expander),i=0;i<expanders.length;++i){var expandSpec=expanders[i],expdef=fluid.defaults(expandSpec.type),returned=expander.expanderHandler(expander,expandSpec,expdef);void 0!==returned&&(togo=returned)}for(var keys=fluid.model.sortByKeyLength(rule),i=0;i<keys.length;++i){var key=keys[i];if("expander"!==key){var value=rule[key];expander.outputPrefixOp.push(key),expander.expand(value,expander),expander.outputPrefixOp.pop()}}return togo=fluid.get(expander.target,expander.outputPrefix)},fluid.model.transform.makeExpander=function(expander,handleFn,expandFn){expandFn=expandFn||fluid.model.transform.expandValue,expander.expand=function(rules){return expandFn(rules,expander)},expander.outputPrefixOp=fluid.model.makePathStack(expander,"outputPrefix"),expander.inputPrefixOp=fluid.model.makePathStack(expander,"inputPrefix"),expander.expanderHandler=handleFn},fluid.model.transform.invertConfiguration=function(rules){var expander={inverted:[]};return fluid.model.transform.makeExpander(expander,fluid.model.transform.handleInvertExpander),expander.expand(rules),{expander:expander.inverted}},fluid.model.transform.collectInputPaths=function(rules){var expander={inputPaths:[]};return fluid.model.transform.makeExpander(expander,fluid.model.transform.handlerCollectExpander),expander.expand(rules),expander.inputPaths},fluid.model.transform.flatSchemaStrategy=function(flatSchema){var keys=fluid.model.sortByKeyLength(flatSchema);return function(root,segment,index,segs){for(var path=fluid.path.apply(null,segs.slice(0,index)),i=0;i<keys.length;++i){var key=keys[i];if(null!==fluid.pathUtil.matchPath(key,path,!0))return flatSchema[key]}}},fluid.model.transform.defaultSchemaValue=function(schemaValue){var type=fluid.isPrimitive(schemaValue)?schemaValue:schemaValue.type;return"array"===type?[]:{}},fluid.model.transform.isomorphicSchemaStrategy=function(source,getConfig){return function(root,segment,index,segs){var existing=fluid.get(source,segs.slice(0,index),getConfig);return fluid.isArrayable(existing)?"array":"object"}},fluid.model.transform.decodeStrategy=function(source,options,getConfig){return options.isomorphic?fluid.model.transform.isomorphicSchemaStrategy(source,getConfig):options.flatSchema?fluid.model.transform.flatSchemaStrategy(options.flatSchema,getConfig):void 0},fluid.model.transform.schemaToCreatorStrategy=function(strategy){return function(root,segment,index,segs){if(void 0===root[segment]){var schemaValue=strategy(root,segment,index,segs);return root[segment]=fluid.model.transform.defaultSchemaValue(schemaValue)}}},fluid.model.transform.sequence=function(source,rules,options){for(var i=0;i<rules.length;++i)source=fluid.model.transform(source,rules[i],options);return source},fluid.model.transformWithRules=function(source,rules,options){options=options||{};var parser={parse:fluid.pathUtil.parseEL,compose:fluid.pathUtil.composePath},getConfig={parser:parser,strategies:[fluid.model.defaultFetchStrategy]},schemaStrategy=fluid.model.transform.decodeStrategy(source,options,getConfig),setConfig={parser:parser,strategies:[fluid.model.defaultFetchStrategy,schemaStrategy?fluid.model.transform.schemaToCreatorStrategy(schemaStrategy):fluid.model.defaultCreatorStrategy]},expander={source:source,target:schemaStrategy?fluid.model.transform.defaultSchemaValue(schemaStrategy(null,"",0,[""])):{},resolverGetConfig:getConfig,queued:[]};return fluid.model.transform.makeExpander(expander,fluid.model.transform.handleExpandExpander),expander.applier=fluid.makeChangeApplier(expander.target,{resolverSetConfig:setConfig}),expander.expand(rules),expander.queued.length>0&&(expander.typeStack=[],expander.pathOp=fluid.model.makePathStack(expander,"path"),fluid.model.transform.expandWildcards(expander,source)),expander.target},$.extend(fluid.model.transformWithRules,fluid.model.transform),fluid.model.transform=fluid.model.transformWithRules}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{},fluid=fluid||fluid_1_5;!function($,fluid){fluid.thatistBridge=function(name,peer){var togo=function(funcname){for(var segs=funcname.split("."),move=peer,i=0;i<segs.length;++i)move=move[segs[i]];var args=[this];2===arguments.length&&(args=args.concat($.makeArray(arguments[1])));var ret=move.apply(null,args);this.that=function(){return ret};var type=typeof ret;return!ret||"string"===type||"number"===type||"boolean"===type||ret&&void 0!==ret.length?ret:this};return $.fn[name]=togo,togo},fluid.thatistBridge("fluid",fluid),fluid.thatistBridge("fluid_1_5",fluid_1_5);var normalizeTabindexName=function(){return $.browser.msie?"tabIndex":"tabindex"},canHaveDefaultTabindex=function(elements){return elements.length<=0?!1:$(elements[0]).is("a, input, button, select, area, textarea, object")},getValue=function(elements){if(elements.length<=0)return void 0;if(!fluid.tabindex.hasAttr(elements))return canHaveDefaultTabindex(elements)?Number(0):void 0;var value=elements.attr(normalizeTabindexName());return Number(value)},setValue=function(elements,toIndex){return elements.each(function(i,item){$(item).attr(normalizeTabindexName(),toIndex)})};fluid.tabindex=function(target,toIndex){return target=$(target),null!==toIndex&&void 0!==toIndex?setValue(target,toIndex):getValue(target)},fluid.tabindex.remove=function(target){return target=$(target),target.each(function(i,item){$(item).removeAttr(normalizeTabindexName())})},fluid.tabindex.hasAttr=function(target){if(target=$(target),target.length<=0)return!1;var togo=target.map(function(){var attributeNode=this.getAttributeNode(normalizeTabindexName());return attributeNode?attributeNode.specified:!1});return 1===togo.length?togo[0]:togo},fluid.tabindex.has=function(target){return target=$(target),fluid.tabindex.hasAttr(target)||canHaveDefaultTabindex(target)},fluid.a11y=$.a11y||{},fluid.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var UP_DOWN_KEYMAP={next:$.ui.keyCode.DOWN,previous:$.ui.keyCode.UP},LEFT_RIGHT_KEYMAP={next:$.ui.keyCode.RIGHT,previous:$.ui.keyCode.LEFT},unwrap=function(element){return element.jquery?element[0]:element},makeElementsTabFocussable=function(elements){elements.each(function(idx,item){item=$(item),(!item.fluid("tabindex.has")||item.fluid("tabindex")<0)&&item.fluid("tabindex",0)})};fluid.tabbable=function(target){target=$(target),makeElementsTabFocussable(target)};var CONTEXT_KEY="selectionContext",NO_SELECTION=-32768,cleanUpWhenLeavingContainer=function(selectionContext){selectionContext.activeItemIndex!==NO_SELECTION&&(selectionContext.options.onLeaveContainer?selectionContext.options.onLeaveContainer(selectionContext.selectables[selectionContext.activeItemIndex]):selectionContext.options.onUnselect&&selectionContext.options.onUnselect(selectionContext.selectables[selectionContext.activeItemIndex])),selectionContext.options.rememberSelectionState||(selectionContext.activeItemIndex=NO_SELECTION)},drawSelection=function(elementToSelect,handler){handler&&handler(elementToSelect)},eraseSelection=function(selectedElement,handler){handler&&selectedElement&&handler(selectedElement)},unselectElement=function(selectedElement,selectionContext){eraseSelection(selectedElement,selectionContext.options.onUnselect)},selectElement=function(elementToSelect,selectionContext){unselectElement(selectionContext.selectedElement(),selectionContext),elementToSelect=unwrap(elementToSelect);var newIndex=selectionContext.selectables.index(elementToSelect);-1!==newIndex&&(selectionContext.activeItemIndex=newIndex,drawSelection(elementToSelect,selectionContext.options.onSelect))},selectableFocusHandler=function(selectionContext){return function(evt){return $(evt.target).fluid("tabindex",0),selectElement(evt.target,selectionContext),evt.stopPropagation()}},selectableBlurHandler=function(selectionContext){return function(evt){return $(evt.target).fluid("tabindex",selectionContext.options.selectablesTabindex),unselectElement(evt.target,selectionContext),evt.stopPropagation()}},reifyIndex=function(sc_that){var elements=sc_that.selectables;sc_that.activeItemIndex>=elements.length&&(sc_that.activeItemIndex=sc_that.options.noWrap?elements.length-1:0),sc_that.activeItemIndex<0&&sc_that.activeItemIndex!==NO_SELECTION&&(sc_that.activeItemIndex=sc_that.options.noWrap?0:elements.length-1),sc_that.activeItemIndex>=0&&fluid.focus(elements[sc_that.activeItemIndex])},prepareShift=function(selectionContext){var selElm=selectionContext.selectedElement();selElm&&fluid.blur(selElm),unselectElement(selectionContext.selectedElement(),selectionContext),selectionContext.activeItemIndex===NO_SELECTION&&(selectionContext.activeItemIndex=-1)},focusNextElement=function(selectionContext){prepareShift(selectionContext),++selectionContext.activeItemIndex,reifyIndex(selectionContext)},focusPreviousElement=function(selectionContext){prepareShift(selectionContext),--selectionContext.activeItemIndex,reifyIndex(selectionContext)},arrowKeyHandler=function(selectionContext,keyMap,userHandlers){return function(evt){evt.which===keyMap.next?(focusNextElement(selectionContext),evt.preventDefault()):evt.which===keyMap.previous&&(focusPreviousElement(selectionContext),evt.preventDefault())}},getKeyMapForDirection=function(direction){var keyMap;return direction===fluid.a11y.orientation.HORIZONTAL?keyMap=LEFT_RIGHT_KEYMAP:direction===fluid.a11y.orientation.VERTICAL&&(keyMap=UP_DOWN_KEYMAP),keyMap},tabKeyHandler=function(selectionContext){return function(evt){evt.which===$.ui.keyCode.TAB&&(cleanUpWhenLeavingContainer(selectionContext),evt.shiftKey&&(selectionContext.focusIsLeavingContainer=!0))}},containerFocusHandler=function(selectionContext){return function(evt){var shouldOrig=selectionContext.options.autoSelectFirstItem,shouldSelect="function"==typeof shouldOrig?shouldOrig():shouldOrig;return selectionContext.focusIsLeavingContainer&&(shouldSelect=!1),shouldSelect&&evt.target===selectionContext.container.get(0)&&(selectionContext.activeItemIndex===NO_SELECTION&&(selectionContext.activeItemIndex=0),fluid.focus(selectionContext.selectables[selectionContext.activeItemIndex])),evt.stopPropagation()}},containerBlurHandler=function(selectionContext){return function(evt){return selectionContext.focusIsLeavingContainer=!1,evt.stopPropagation()}},makeElementsSelectable=function(container,defaults,userOptions){var options=$.extend(!0,{},defaults,userOptions),keyMap=getKeyMapForDirection(options.direction),selectableElements=options.selectableElements?options.selectableElements:container.find(options.selectableSelector),that={container:container,activeItemIndex:NO_SELECTION,selectables:selectableElements,focusIsLeavingContainer:!1,options:options};return that.selectablesUpdated=function(focusedItem){"number"==typeof that.options.selectablesTabindex&&that.selectables.fluid("tabindex",that.options.selectablesTabindex),that.selectables.unbind("focus."+CONTEXT_KEY),that.selectables.unbind("blur."+CONTEXT_KEY),that.selectables.bind("focus."+CONTEXT_KEY,selectableFocusHandler(that)),that.selectables.bind("blur."+CONTEXT_KEY,selectableBlurHandler(that)),keyMap&&that.options.noBubbleListeners&&(that.selectables.unbind("keydown."+CONTEXT_KEY),that.selectables.bind("keydown."+CONTEXT_KEY,arrowKeyHandler(that,keyMap))),focusedItem?selectElement(focusedItem,that):reifyIndex(that)},that.refresh=function(){that.options.selectableSelector||fluid.fail("Cannot refresh selectable context which was not initialised by a selector"),that.selectables=container.find(options.selectableSelector),that.selectablesUpdated()},that.selectedElement=function(){return that.activeItemIndex<0?null:that.selectables[that.activeItemIndex]},keyMap&&!that.options.noBubbleListeners&&container.keydown(arrowKeyHandler(that,keyMap)),container.keydown(tabKeyHandler(that)),container.focus(containerFocusHandler(that)),container.blur(containerBlurHandler(that)),that.selectablesUpdated(),that};fluid.selectable=function(target,options){target=$(target);var that=makeElementsSelectable(target,fluid.selectable.defaults,options);return fluid.setScopedData(target,CONTEXT_KEY,that),that},fluid.selectable.select=function(target,toSelect){fluid.focus(toSelect)},fluid.selectable.selectNext=function(target){target=$(target),focusNextElement(fluid.getScopedData(target,CONTEXT_KEY))},fluid.selectable.selectPrevious=function(target){target=$(target),focusPreviousElement(fluid.getScopedData(target,CONTEXT_KEY))},fluid.selectable.currentSelection=function(target){target=$(target);var that=fluid.getScopedData(target,CONTEXT_KEY);return $(that.selectedElement())},fluid.selectable.defaults={direction:fluid.a11y.orientation.VERTICAL,selectablesTabindex:-1,autoSelectFirstItem:!0,rememberSelectionState:!0,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null,noWrap:!1};var checkForModifier=function(binding,evt){if(!binding.modifier)return!0;var modifierKey=binding.modifier,isCtrlKeyPresent=modifierKey&&evt.ctrlKey,isAltKeyPresent=modifierKey&&evt.altKey,isShiftKeyPresent=modifierKey&&evt.shiftKey;return isCtrlKeyPresent||isAltKeyPresent||isShiftKeyPresent},makeActivationHandler=function(binding){return function(evt){var target=evt.target;if(fluid.enabled(target)){var code=evt.which?evt.which:evt.keyCode;if(code===binding.key&&binding.activateHandler&&checkForModifier(binding,evt)){var event=$.Event("fluid-activate");$(target).trigger(event,[binding.activateHandler]),event.isDefaultPrevented()&&evt.preventDefault()}}}},makeElementsActivatable=function(elements,onActivateHandler,defaultKeys,options){var bindings=[];$(defaultKeys).each(function(index,key){bindings.push({modifier:null,key:key,activateHandler:onActivateHandler})}),options&&options.additionalBindings&&(bindings=bindings.concat(options.additionalBindings)),fluid.initEnablement(elements);for(var i=0;i<bindings.length;++i){var binding=bindings[i];elements.keydown(makeActivationHandler(binding))}elements.bind("fluid-activate",function(evt,handler){return handler=handler||onActivateHandler,handler?handler(evt):null})};fluid.activatable=function(target,fn,options){target=$(target),makeElementsActivatable(target,fn,fluid.activatable.defaults.keys,options)},fluid.activate=function(target){$(target).trigger("fluid-activate")},fluid.activatable.defaults={keys:[$.ui.keyCode.ENTER,$.ui.keyCode.SPACE]}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.viewComponent",{gradeNames:["fluid.littleComponent","fluid.modelComponent","fluid.eventedComponent"],initFunction:"fluid.initView",argumentMap:{container:0,options:1}}),fluid.diagnoseFailedView=function(componentName,that,options,args){if(!that&&fluid.hasGrade(options,"fluid.viewComponent")){var container=fluid.wrap(args[1]),message1="Instantiation of autoInit component with type "+componentName+" failed, since ";0===container.length?fluid.fail(message1+'selector "',args[1],'" did not match any markup in the document'):fluid.fail(message1+" component creator function did not return a value")}},fluid.checkTryCatchParameter=function(){var location=window.location||{search:"",protocol:"file:"},GETParams=location.search.slice(1).split("&");return fluid.contains(GETParams,"notrycatch")},fluid.notrycatch=fluid.checkTryCatchParameter(),fluid.wrap=function(obj,userJQuery){return userJQuery=userJQuery||$,!obj||obj.jquery?obj:userJQuery(obj)},fluid.unwrap=function(obj){return obj&&obj.jquery&&1===obj.length?obj[0]:obj},fluid.container=function(containerSpec,fallible,userJQuery){userJQuery&&(containerSpec=fluid.unwrap(containerSpec));var container=fluid.wrap(containerSpec,userJQuery);if(fallible&&(!container||0===container.length))return null;if(!container||!container.jquery||1!==container.length){"string"!=typeof containerSpec&&(containerSpec=container.selector);var count=void 0!==container.length?container.length:0;fluid.fail((count>1?"More than one ("+count+") container elements were":"No container element was")+" found for selector "+containerSpec)}return fluid.isDOMNode(container[0])||fluid.fail("fluid.container was supplied a non-jQueryable element"),container},fluid.createDomBinder=function(container,selectors){function cacheKey(name,thisContainer){return fluid.allocateSimpleId(thisContainer)+"-"+name}function record(name,thisContainer,result){cache[cacheKey(name,thisContainer)]=result}var cache={},that={},userJQuery=container.constructor;return that.locate=function(name,localContainer){var selector,thisContainer,togo;return selector=selectors[name],thisContainer=localContainer?localContainer:container,thisContainer||fluid.fail("DOM binder invoked for selector "+name+" without container"),selector?(togo="function"==typeof selector?userJQuery(selector.call(null,fluid.unwrap(thisContainer))):userJQuery(selector,thisContainer),togo.get(0)===document&&(togo=[]),togo.selector||(togo.selector=selector,togo.context=thisContainer),togo.selectorName=name,record(name,thisContainer,togo),togo):thisContainer},that.fastLocate=function(name,localContainer){var thisContainer=localContainer?localContainer:container,key=cacheKey(name,thisContainer),togo=cache[key];return togo?togo:that.locate(name,localContainer)},that.clear=function(){cache={}},that.refresh=function(names,localContainer){var thisContainer=localContainer?localContainer:container;"string"==typeof names&&(names=[names]),void 0===thisContainer.length&&(thisContainer=[thisContainer]);for(var i=0;i<names.length;++i)for(var j=0;j<thisContainer.length;++j)that.locate(names[i],thisContainer[j])},that.resolvePathSegment=that.locate,that},fluid.expectFilledSelector=function(result,message){result&&0===result.length&&result.jquery&&fluid.fail(message+': selector "'+result.selector+'" with name '+result.selectorName+" returned no results in context "+fluid.dumpEl(result.context))},fluid.initView=function(componentName,containerSpec,userOptions,localOptions){var container=fluid.container(containerSpec,!0);if(fluid.expectFilledSelector(container,'Error instantiating component with name "'+componentName),!container)return null;var that=fluid.initLittleComponent(componentName,userOptions,localOptions||{gradeNames:["fluid.viewComponent"]}),userJQuery=that.options.jQuery;return userJQuery&&(container=fluid.container(containerSpec,!0,userJQuery)),fluid.log("Constructing view component "+componentName+" with container "+container.constructor.expando+(userJQuery?" user jQuery "+userJQuery.expando:"")+" env: "+$.expando),that.container=container,fluid.initDomBinder(that),that},fluid.initDomBinder=function(that){that.dom=fluid.createDomBinder(that.container,that.options.selectors),that.locate=that.dom.locate},fluid.findAncestor=function(element,test){for(element=fluid.unwrap(element);element;){if(test(element))return element;element=element.parentNode}},fluid.findForm=function(node){return fluid.findAncestor(node,function(element){return"form"===element.nodeName.toLowerCase()})},fluid.each(["text","html"],function(method){fluid[method]=function(node,newValue){return node=$(node),void 0===newValue?node[method]():node[method](newValue)}}),fluid.value=function(nodeIn,newValue){var node=fluid.unwrap(nodeIn),multiple=!1;if(void 0===node.nodeType&&node.length>1&&(node=node[0],multiple=!0),"input"!==node.nodeName.toLowerCase()||!/radio|checkbox/.test(node.type))return void 0===newValue?$(node).val():$(node).val(newValue);var name=node.name;void 0===name&&fluid.fail("Cannot acquire value from node "+fluid.dumpEl(node)+" which does not have name attribute set");var elements;if(multiple)elements=nodeIn;else{elements=node.ownerDocument.getElementsByName(name);var scope=fluid.findForm(node);elements=$.grep(elements,function(element){return element.name!==name?!1:!scope||fluid.dom.isContainer(scope,element)})}if(void 0===newValue){var checked=$.map(elements,function(element){return element.checked?element.value:null});return"radio"===node.type?checked[0]:checked}"boolean"==typeof newValue&&(newValue=newValue?"true":"false"),$.each(elements,function(){this.checked=newValue instanceof Array?-1!==$.inArray(this.value,newValue):newValue===this.value})},fluid.jById=function(id,dokkument){dokkument=dokkument&&9===dokkument.nodeType?dokkument:document;var element=fluid.byId(id,dokkument),togo=element?$(element):[];return togo.selector="#"+id,togo.context=dokkument,togo},fluid.byId=function(id,dokkument){dokkument=dokkument&&9===dokkument.nodeType?dokkument:document;var el=dokkument.getElementById(id);return el?(el.id!==id&&fluid.fail("Problem in document structure - picked up element "+fluid.dumpEl(el)+" for id "+id+" without this id - most likely the element has a name which conflicts with this id"),el):null},fluid.getId=function(element){return fluid.unwrap(element).id},fluid.allocateSimpleId=function(element){var simpleId="fluid-id-"+fluid.allocateGuid();return element?(element=fluid.unwrap(element),element.id||(element.id=simpleId),element.id):simpleId},fluid.defaults("fluid.ariaLabeller",{labelAttribute:"aria-label",liveRegionMarkup:'<div class="liveRegion fl-offScreen-hidden" aria-live="polite"></div>',liveRegionId:"fluid-ariaLabeller-liveRegion",events:{generateLiveElement:"unicast"},listeners:{generateLiveElement:"fluid.ariaLabeller.generateLiveElement"}}),fluid.ariaLabeller=function(element,options){var that=fluid.initView("fluid.ariaLabeller",element,options);return that.update=function(newOptions){if(newOptions=newOptions||that.options,that.container.attr(that.options.labelAttribute,newOptions.text),newOptions.dynamicLabel){var live=fluid.jById(that.options.liveRegionId);0===live.length&&(live=that.events.generateLiveElement.fire(that)),live.text(newOptions.text)}},that.update(),that},fluid.ariaLabeller.generateLiveElement=function(that){var liveEl=$(that.options.liveRegionMarkup);return liveEl.prop("id",that.options.liveRegionId),$("body").append(liveEl),liveEl};var LABEL_KEY="aria-labelling";fluid.getAriaLabeller=function(element){element=$(element);var that=fluid.getScopedData(element,LABEL_KEY);return that},fluid.updateAriaLabel=function(element,text,options){options=$.extend({},options||{},{text:text});var that=fluid.getAriaLabeller(element);return that?that.update(options):(that=fluid.ariaLabeller(element,options),fluid.setScopedData(element,LABEL_KEY,that)),that};var dismissList={};$(document).click(function(event){for(var target=event.target;target;){if(dismissList[target.id])return;target=target.parentNode}fluid.each(dismissList,function(dismissFunc,key){dismissFunc(event),delete dismissList[key]})}),fluid.globalDismissal=function(nodes,dismissFunc){fluid.each(nodes,function(node){var id=fluid.unwrap(node).ownerDocument===document?fluid.allocateSimpleId(node):fluid.allocateGuid();dismissFunc?dismissList[id]=dismissFunc:delete dismissList[id]})},fluid.now=function(){return Date.now?Date.now():(new Date).getTime()},fluid.deadMansBlur=function(control,options){var that=fluid.initLittleComponent("fluid.deadMansBlur",options);return that.blurPending=!1,that.lastCancel=0,that.canceller=function(event){fluid.log("Cancellation through "+event.type+" on "+fluid.dumpEl(event.target)),that.lastCancel=fluid.now(),that.blurPending=!1},that.noteProceeded=function(){fluid.globalDismissal(that.options.exclusions)},that.reArm=function(){fluid.globalDismissal(that.options.exclusions,that.proceed)},that.addExclusion=function(exclusions){fluid.globalDismissal(exclusions,that.proceed)},that.proceed=function(event){fluid.log("Direct proceed through "+event.type+" on "+fluid.dumpEl(event.target)),that.blurPending=!1,that.options.handler(control)},fluid.each(that.options.exclusions,function(exclusion){exclusion=$(exclusion),fluid.each(exclusion,function(excludeEl){$(excludeEl).bind("focusin",that.canceller).bind("fluid-focus",that.canceller).click(that.canceller).mousedown(that.canceller)})}),that.options.cancelByDefault?that.reArm():$(control).bind("focusout",function(event){fluid.log("Starting blur timer for element "+fluid.dumpEl(event.target));var now=fluid.now();fluid.log("back delay: "+(now-that.lastCancel)),now-that.lastCancel>that.options.backDelay&&(that.blurPending=!0),setTimeout(function(){that.blurPending&&that.options.handler(control)},that.options.delay)}),that},fluid.defaults("fluid.deadMansBlur",{delay:150,backDelay:100})}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){function makeGingerStrategy(instantiator,that,thatStack){return function(component,thisSeg){var atval=component[thisSeg];if(void 0===atval){var parentPath=instantiator.idToPath[component.id],childPath=fluid.composePath(parentPath,thisSeg);atval=instantiator.pathToComponent[childPath],atval&&(atval[inCreationMarker]=!0)}return void 0!==atval?atval[inCreationMarker]&&fluid.fail("Component "+fluid.dumpThat(atval)+' at path "'+thisSeg+'" of parent '+fluid.dumpThat(component)+" cannot be used for lookup since it is still in creation. Please reorganise your dependencies so that they no longer contain circular references"):fluid.get(component,fluid.path("options","components",thisSeg,"type"))&&(fluid.initDependent(component,thisSeg),atval=component[thisSeg]),atval}}function makeStackFetcher(instantiator,parentThat,localRecord,expandOptions){
expandOptions=expandOptions||{};var thatStack=instantiator.getFullStack(parentThat),fetchStrategies=[fluid.model.funcResolverStrategy,makeGingerStrategy(instantiator,parentThat,thatStack)],fetcher=function(parsed){var foundComponent,context=parsed.context;if("instantiator"===context)return instantiator;if("that"===context)foundComponent=parentThat;else if(localRecord&&localRecordExpected.test(context)){var fetched=fluid.get(localRecord[context],parsed.path);return"arguments"===context||expandOptions.direct?fetched:{marker:"options"===context?fluid.EXPAND:fluid.EXPAND_NOW,value:fetched}}if(foundComponent||visitComponents(instantiator,thatStack,function(component,name){return context===name||context===component.typeName||context===component.nickName?(foundComponent=component,!0):fluid.get(component,fluid.path("options","components",context,"type"))&&!component[context]?(foundComponent=fluid.get(component,context,{strategies:fetchStrategies}),!0):void 0}),!foundComponent&&""!==parsed.path){var ref=fluid.renderContextReference(parsed);fluid.log("Failed to resolve reference "+ref+": thatStack contains\n"+fluid.dumpThatStack(thatStack,instantiator)),fluid.fail("Failed to resolve reference "+ref+" - could not match context with name "+context+" from component leaf of type "+parentThat.typeName,"\ninstantiator contents: ",instantiator)}return fluid.get(foundComponent,parsed.path,{strategies:fetchStrategies})};return fetcher}function makeStackResolverOptions(instantiator,parentThat,localRecord,expandOptions){return $.extend(!0,{},fluid.defaults("fluid.resolveEnvironment"),{fetcher:makeStackFetcher(instantiator,parentThat,localRecord,expandOptions)})}function mergeToMergeAll(options){options&&options.mergeOptions&&(options.mergeAllOptions=["{options}"].concat(fluid.makeArray(options.mergeOptions)))}function upgradeMergeOptions(demandspec){mergeToMergeAll(demandspec),demandspec.mergeAllOptions&&(demandspec.options&&fluid.fail("demandspec ",demandspec," is invalid - cannot specify literal options together with mergeOptions or mergeAllOptions"),demandspec.options={mergeAllOptions:demandspec.mergeAllOptions}),demandspec.options&&delete demandspec.options.mergeOptions}function searchDemands(demandingName,contextNames){var exist=dependentStore[demandingName]||[];outer:for(var i=0;i<exist.length;++i){for(var rec=exist[i],j=0;j<contextNames.length;++j)if(rec.contexts[j]!==contextNames[j])continue outer;return rec.spec}}function resolveEnvironmentImpl(obj,options){function recurse(arg){return resolveEnvironmentImpl(arg,options)}return fluid.guardCircularity(options.seenIds,obj,"expansion",' - please ensure options are not circularly connected, or protect from expansion using the "noexpand" policy or expander'),"string"!=typeof obj||options.noValue?fluid.isPrimitive(obj)||void 0!==obj.nodeType||obj.jquery?obj:options.filter?options.filter(obj,recurse,options):(options.noCopy?fluid.each:fluid.transform)(obj,function(value,key){return resolveEnvironmentImpl(value,options)}):fluid.resolveContextValue(obj,options)}var inCreationMarker="__CURRENTLY_IN_CREATION__";fluid.isFireBreak=function(component){return component.options&&component.options["fluid.visitComponents.fireBreak"]},fluid.visitComponentChildren=function(that,visitor,options,path){for(var name in that){var newPath=options.instantiator.composePath(path,name),component=that[name];if(component&&component.typeName&&!(component.id&&options.visited&&options.visited[component.id])){if(options.visited&&(options.visited[component.id]=!0),visitor(component,name,newPath,path))return!0;fluid.isFireBreak(component)||options.flat||fluid.visitComponentChildren(component,visitor,options,newPath)}}};var visitComponents=function(instantiator,thatStack,visitor,options){options=options||{visited:{},flat:!0,instantiator:instantiator};for(var i=thatStack.length-1;i>=0;--i){var that=thatStack[i];if(fluid.isFireBreak(that))return;var path=instantiator.idToPath[that.id]||"";if(that.typeName){options.visited[that.id]=!0;var memberName=fluid.pathUtil.getTailPath(path);if(visitor(that,memberName,path))return}if(fluid.visitComponentChildren(that,visitor,options,path))return}};fluid.dumpThat=function(that){return'{ typeName: "'+that.typeName+'" id: '+that.id+"}"},fluid.dumpThatStack=function(thatStack,instantiator){var togo=fluid.transform(thatStack,function(that){var path=instantiator.idToPath[that.id];return fluid.dumpThat(that)+(path?" - path: "+path:"")});return togo.join("\n")},fluid.describeActivity=function(){return fluid.globalThreadLocal().activityStack||[]},fluid.pushActivity=function(func,message){if(!message||fluid.notrycatch)return func();var root=fluid.globalThreadLocal();root.activityStack||(root.activityStack=[]);var frames=fluid.makeArray(message);return frames.push("\n"),frames.unshift("\n"),root.activityStack=frames.concat(root.activityStack),fluid.tryCatch(func,null,function(){root.activityStack=root.activityStack.slice(frames.length)})},fluid.wrapActivity=fluid.notrycatch?fluid.identity:function(func,messageSpec){return function(){var args=fluid.makeArray(arguments),message=fluid.transform(fluid.makeArray(messageSpec),function(specEl){if("string"==typeof specEl&&0===specEl.indexOf("arguments.")){var el=specEl.substring("arguments.".length);return fluid.get(args,el)}return specEl});return fluid.pushActivity(function(){return func.apply(null,args)},message)}};var localRecordExpected=/arguments|options|container/;fluid.clearListeners=function(idToListeners,key){fluid.each(idToListeners[key],function(rec){rec.event.removeListener(rec.listener)}),delete idToListeners[key]},fluid.instantiator=function(freeInstantiator){function recordComponent(component,path,created){created&&(that.idToPath[component.id]=path),that.pathToComponent[path]&&fluid.fail("Error during instantiation - path "+path+" which has just created component "+fluid.dumpThat(component)+" has already been used for component "+fluid.dumpThat(that.pathToComponent[path])+" - this is a circular instantiation or other oversight. Please clear the component using instantiator.clearComponent() before reusing the path."),that.pathToComponent[path]=component}var preThat={options:{"fluid.visitComponents.fireBreak":!0},idToPath:{},pathToComponent:{},idToListeners:{},nickName:"instantiator",composePath:fluid.composePath},that=fluid.typeTag("fluid.instantiator");return that=$.extend(that,preThat),that.recordListener=function(event,listener,source){var listeners=that.idToListeners[source.id];listeners||(listeners=that.idToListeners[source.id]=[]),listeners.push({event:event,listener:listener})},that.getThatStack=function(component){var path=that.idToPath[component.id]||"",parsed=fluid.model.parseEL(path),togo=fluid.transform(parsed,function(value,i){var parentPath=fluid.model.composeSegments.apply(null,parsed.slice(0,i+1));return that.pathToComponent[parentPath]}),root=that.pathToComponent[""];return root&&togo.unshift(root),togo},that.getEnvironmentalStack=function(){var togo=[fluid.staticEnvironment];return freeInstantiator||togo.push(fluid.globalThreadLocal()),togo},that.getFullStack=function(component){var thatStack=component?that.getThatStack(component):[];return that.getEnvironmentalStack().concat(thatStack)},that.recordRoot=function(component){component&&component.id&&!that.pathToComponent[""]&&recordComponent(component,"",!0)},that.pushUpcomingInstantiation=function(parent,name){that.expectedParent=parent,that.expectedName=name},that.recordComponent=function(component){that.expectedName?(that.recordKnownComponent(that.expectedParent,component,that.expectedName,!0),delete that.expectedName,delete that.expectedParent):that.recordRoot(component)},that.clearComponent=function(component,name,child,options,noModTree,path){var record=that.idToPath[component.id];options=options||{flat:!0,instantiator:that},child=child||component[name],path=path||record,void 0===path&&fluid.fail("Cannot clear component "+name+" from component ",component," which was not created by this instantiator"),fluid.fireEvent(child,"events.onClear",[child,name,component]);var childPath=that.composePath(path,name),childRecord=that.idToPath[child.id];childRecord===childPath&&(fluid.fireEvent(child,"events.onDestroy",[child,name,component]),fluid.clearListeners(that.idToListeners,child.id),fluid.visitComponentChildren(child,function(gchild,gchildname,newPath,parentPath){that.clearComponent(child,gchildname,null,options,!0,parentPath)},options,childPath)),delete that.idToPath[child.id],delete that.pathToComponent[childPath],noModTree||delete component[name]},that.recordKnownComponent=function(parent,component,name,created){var parentPath=that.idToPath[parent.id]||"",path=that.composePath(parentPath,name);recordComponent(component,path,created)},that},fluid.freeInstantiator=fluid.instantiator(!0),fluid.argMapToDemands=function(argMap){var togo=[];return fluid.each(argMap,function(value,key){togo[value]="{"+key+"}"}),togo},fluid.makePassArgsSpec=function(initArgs){return fluid.transform(initArgs,function(arg,index){return"{arguments}."+index})},fluid.embodyDemands=function(instantiator,parentThat,demandspec,initArgs,options){options=options||{},upgradeMergeOptions(demandspec);var oldOptions=fluid.get(options,"componentRecord.options");options.componentRecord=$.extend(!0,{},options.componentRecord,fluid.censorKeys(demandspec,["args","funcName","registeredFrom"]));var mergeAllZero=fluid.get(options,"componentRecord.options.mergeAllOptions.0");"{options}"===mergeAllZero&&fluid.set(options,"componentRecord.options.mergeAllOptions.0",oldOptions);var demands=fluid.makeArray(demandspec.args),upDefaults=fluid.defaults(demandspec.funcName),argMap=upDefaults?upDefaults.argumentMap:null,inferMap=!1;argMap||!(upDefaults||options&&options.componentRecord)||options.passArgs||(inferMap=!0,argMap=demands.length<2?fluid.rawDefaults("fluid.littleComponent").argumentMap:{options:demands.length-1}),options=options||{},0===demands.length&&(options.componentRecord&&argMap?demands=fluid.argMapToDemands(argMap):options.passArgs&&(demands=fluid.makePassArgsSpec(initArgs)));var localRecord=$.extend({arguments:initArgs},fluid.censorKeys(options.componentRecord,["type"]));fluid.each(argMap,function(index,name){initArgs.length>0&&(localRecord[name]=localRecord.arguments[index]),void 0!==demandspec[name]&&void 0===localRecord[name]&&(localRecord[name]=demandspec[name])}),mergeToMergeAll(localRecord.options),mergeToMergeAll(argMap&&demands[argMap.options]);var upstreamLocalRecord=$.extend({},localRecord);void 0!==options.componentRecord.options&&(upstreamLocalRecord.options=options.componentRecord.options);var expandOptions=makeStackResolverOptions(instantiator,parentThat,localRecord),args=[];if(demands)for(var i=0;i<demands.length;++i){var arg=demands[i];if(fluid.isMarker(arg)&&arg.value===fluid.COMPONENT_OPTIONS.value&&(arg="{options}",inferMap&&(argMap={options:i})),"string"==typeof arg&&"@"===arg.charAt(0)){var argpos=arg.substring(1);arg="{arguments}."+argpos}argMap&&argMap.options===i?(arg&&"object"==typeof arg&&!arg.targetTypeName&&(arg.targetTypeName=demandspec.funcName),args[i]={marker:fluid.EXPAND,value:fluid.copy(arg),localRecord:upstreamLocalRecord}):args[i]=fluid.expander.expandLight(arg,expandOptions),args[i]&&fluid.isMarker(args[i].marker,fluid.EXPAND_NOW)&&(args[i]=fluid.expander.expandLight(args[i].value,expandOptions))}else args=initArgs?initArgs:[];var togo={args:args,funcName:demandspec.funcName};return togo};var aliasTable={};fluid.alias=function(demandingName,aliasName){return aliasName?void(aliasTable[demandingName]=aliasName):aliasTable[demandingName]};var dependentStore={},isDemandLogging=!1;fluid.setDemandLogging=function(set){isDemandLogging=set},fluid.isDemandLogging=function(demandingNames){return isDemandLogging&&fluid.isLogging()},fluid.demands=function(demandingName,contextName,spec){var contextNames=fluid.makeArray(contextName).sort();if(!spec)return searchDemands(demandingName,contextNames);if(spec.length&&(spec={args:spec}),fluid.getCallerInfo&&fluid.isDemandLogging()){var callerInfo=fluid.getCallerInfo(5);callerInfo&&(spec.registeredFrom=callerInfo)}var exist=dependentStore[demandingName];exist||(exist=[],dependentStore[demandingName]=exist),exist.push({contexts:contextNames,spec:spec})},fluid.compareDemands=function(speca,specb){var p1=speca.uncess-specb.uncess;return 0===p1?specb.intersect-speca.intersect:p1},fluid.locateAllDemands=function(instantiator,parentThat,demandingNames){var demandLogging=fluid.isDemandLogging(demandingNames);demandLogging&&fluid.log("Resolving demands for function names ",demandingNames," in context of "+(parentThat?"component "+parentThat.typeName:"no component"));var contextNames={},visited=[],thatStack=instantiator.getFullStack(parentThat);visitComponents(instantiator,thatStack,function(component,xname,path){contextNames[component.typeName]=!0,visited.push(component)}),demandLogging&&fluid.log("Components in scope for resolution:\n"+fluid.dumpThatStack(visited,instantiator));for(var matches=[],i=0;i<demandingNames.length;++i)for(var rec=dependentStore[demandingNames[i]]||[],j=0;j<rec.length;++j){for(var spec=rec[j],record={spec:spec,intersect:0,uncess:0},k=0;k<spec.contexts.length;++k)record[contextNames[spec.contexts[k]]?"intersect":"uncess"]+=2;0===spec.contexts.length&&record.intersect++,matches.push(record)}return matches.sort(fluid.compareDemands),matches},fluid.locateDemands=function(instantiator,parentThat,demandingNames){var matches=fluid.locateAllDemands(instantiator,parentThat,demandingNames),demandspec=0===matches.length||0===matches[0].intersect?null:matches[0].spec.spec;return fluid.isDemandLogging(demandingNames)&&(demandspec?fluid.log("Located "+matches.length+" potential match"+(1===matches.length?"":"es")+", selected best match with "+matches[0].intersect+" matched context names: ",demandspec):fluid.log("No matches found for demands, using direct implementation")),demandspec},fluid.determineDemands=function(instantiator,parentThat,funcNames){funcNames=fluid.makeArray(funcNames);var newFuncName=funcNames[0],demandspec=fluid.locateDemands(instantiator,parentThat,funcNames)||{};demandspec.funcName&&(newFuncName=demandspec.funcName);var aliasTo=fluid.alias(newFuncName);if(aliasTo){newFuncName=aliasTo,fluid.log("Following redirect from function name "+newFuncName+" to "+aliasTo);var demandspec2=fluid.locateDemands(instantiator,parentThat,[aliasTo]);demandspec2&&(fluid.each(demandspec2,function(value,key){localRecordExpected.test(key)&&fluid.fail("Error in demands block ",demandspec2,' - content with key "'+key+'" is not supported since this demands block was resolved via an alias from "'+newFuncName+'"')}),demandspec2.funcName&&(newFuncName=demandspec2.funcName,fluid.log('Followed final inner demands to function name "'+newFuncName+'"')))}return fluid.merge(null,{funcName:newFuncName,args:fluid.makeArray(demandspec.args)},fluid.censorKeys(demandspec,["funcName","args"]))},fluid.resolveDemands=function(instantiator,parentThat,funcNames,initArgs,options){var demandspec=fluid.determineDemands(instantiator,parentThat,funcNames);return fluid.embodyDemands(instantiator,parentThat,demandspec,initArgs,options)},fluid.invoke=function(functionName,args,that,environment){return args=fluid.makeArray(args),fluid.withInstantiator(that,function(instantiator){var invokeSpec=fluid.resolveDemands(instantiator,that,functionName,args,{passArgs:!0});return fluid.invokeGlobalFunction(invokeSpec.funcName,invokeSpec.args,environment)})},fluid.invoke=fluid.wrapActivity(fluid.invoke,['    while invoking function with name "',"arguments.0",'" from component',"arguments.2"]),fluid.makeFreeInvoker=function(functionName,environment){var demandSpec=fluid.determineDemands(fluid.freeInstantiator,null,functionName);return function(){var invokeSpec=fluid.embodyDemands(fluid.freeInstantiator,null,demandSpec,fluid.makeArray(arguments),{passArgs:!0});return fluid.invokeGlobalFunction(invokeSpec.funcName,invokeSpec.args,environment)}},fluid.makeInvoker=function(userInstantiator,that,demandspec,functionName,environment){return demandspec=demandspec||fluid.determineDemands(userInstantiator,that,functionName),function(){var args=fluid.makeArray(arguments);return fluid.withInstantiator(that,function(instantiator){var invokeSpec=fluid.embodyDemands(instantiator,that,demandspec,args,{passArgs:!0});return fluid.invokeGlobalFunction(invokeSpec.funcName,invokeSpec.args,environment)},["    while invoking invoker with name "+functionName+" on component",that],userInstantiator)}},fluid.event.makeTrackedListenerAdder=function(instantiator,source){return function(event){return{addListener:function(listener){instantiator.recordListener(event,listener,source),event.addListener.apply(null,arguments)}}}},fluid.event.listenerEngine=function(eventSpec,callback,adder){function checkFire(){var notall=fluid.find(eventSpec,function(value,key){return void 0===argstruc[key]?!0:void 0});notall||(callback(argstruc),fluid.clear(argstruc))}var argstruc={};fluid.each(eventSpec,function(event,eventName){adder(event).addListener(function(){argstruc[eventName]=fluid.makeArray(arguments),checkFire()})})},fluid.event.dispatchListener=function(instantiator,that,listener,eventName,eventSpec,indirectArgs){return fluid.wrapActivity(function(){"string"==typeof listener&&(listener=fluid.event.resolveListener({globalName:listener}));var args=indirectArgs?arguments[0]:fluid.makeArray(arguments),demandspec=fluid.determineDemands(instantiator,that,eventName);0===demandspec.args.length&&eventSpec.args&&(demandspec.args=eventSpec.args);var resolved=fluid.embodyDemands(instantiator,that,demandspec,args,{passArgs:!0,componentOptions:eventSpec});return listener.apply(null,resolved.args)},[" firing to listener to event named "+eventName+" of component ",that])},fluid.event.resolveListenerRecord=function(lisrec,that,eventName){return fluid.withInstantiator(that,function(instantiator){var records=fluid.makeArray(lisrec),transRecs=fluid.transform(records,function(record){fluid.isPrimitive(record)?record={listener:record}:record.listener||fluid.fail("Error in listener record ",record,' required field "listener" not found');var listener=fluid.expandOptions(record.listener,that);return listener||fluid.fail("Error in listener record - could not resolve reference "+record.listener+' to a listener or firer. Did you miss out "events." when referring to an event firer?'),"fluid.event.firer"===listener.typeName&&(listener=listener.fire),record.listener=fluid.event.dispatchListener(instantiator,that,listener,eventName,record),record});return{records:transRecs,adderWrapper:fluid.event.makeTrackedListenerAdder(instantiator,that)}},["    while resolving listener record for event named "+eventName+" for component ",that])},fluid.event.expandOneEvent=function(event,that){var origin;return origin="string"==typeof event&&"{"!==event.charAt(0)?that.events[event]:fluid.expandOptions(event,that),origin&&"fluid.event.firer"===origin.typeName||fluid.fail("Error in event specification - could not resolve base event reference ",event," to an event firer: got ",origin),origin},fluid.event.expandEvents=function(event,that){return"string"==typeof event?fluid.event.expandOneEvent(event,that):fluid.transform(event,function(oneEvent){return fluid.event.expandOneEvent(oneEvent,that)})},fluid.event.resolveEvent=function(that,eventName,eventSpec){return fluid.withInstantiator(that,function(instantiator){var adder=fluid.event.makeTrackedListenerAdder(instantiator,that);"string"==typeof eventSpec&&(eventSpec={event:eventSpec});var event=eventSpec.event||eventSpec.events;event||fluid.fail("Event specification for event with name "+eventName+" does not include a base event specification: ",eventSpec);var firer,origin=fluid.event.expandEvents(event,that),isMultiple="fluid.event.firer"!==origin.typeName,isComposite=eventSpec.args||isMultiple;if(isComposite){firer=fluid.event.getEventFirer(null,null," [composite] "+fluid.event.nameEvent(that,eventName));var dispatcher=fluid.event.dispatchListener(instantiator,that,firer.fire,eventName,eventSpec,isMultiple);isMultiple?fluid.event.listenerEngine(origin,dispatcher,adder):adder(origin).addListener(dispatcher)}else firer={typeName:"fluid.event.firer"},firer.fire=function(){var outerArgs=fluid.makeArray(arguments);return fluid.withInstantiator(that,function(){return origin.fire.apply(null,outerArgs)}," firing synthetic event "+eventName,instantiator)},firer.addListener=function(listener,namespace,predicate,priority){var dispatcher=fluid.event.dispatchListener(instantiator,that,listener,eventName,eventSpec);adder(origin).addListener(dispatcher,namespace,predicate,priority)},firer.removeListener=function(listener){origin.removeListener(listener)};return firer},["    while resolving event with name "+eventName+" attached to component ",that])},fluid.registerNamespace("fluid.expander"),fluid.expander.preserveFromExpansion=function(options){var preserve={},preserveList=fluid.arrayToHash(["mergePolicy","mergeAllOptions","components","invokers","events","listeners","transformOptions"]);return fluid.each(options.mergePolicy,function(value,key){fluid.mergePolicyIs(value,"noexpand")&&(preserveList[key]=!0)}),fluid.each(preserveList,function(xvalue,path){var pen=fluid.model.accessWithStrategy(options,path,fluid.VALUE,fluid.model.defaultGetConfig,null,!0),last=pen.segs[pen.segs.length-1],value=pen.root[last];delete pen.root[last],fluid.set(preserve,path,value)}),{restore:function(target){fluid.each(preserveList,function(xvalue,path){var preserved=fluid.get(preserve,path);void 0!==preserved&&fluid.set(target,path,preserved)})}}},fluid.expandOptions=function(args,that,localRecord,outerExpandOptions){return args?fluid.withInstantiator(that,function(instantiator){var expandOptions=makeStackResolverOptions(instantiator,that,localRecord,outerExpandOptions);expandOptions.noCopy=!0;var pres;fluid.isArrayable(args)||fluid.isPrimitive(args)||(pres=fluid.expander.preserveFromExpansion(args));var expanded=fluid.expander.expandLight(args,expandOptions);return pres&&pres.restore(expanded),expanded},["    while expanding options for component of type "+(that?that.typeName:"null")+": ",that]):args},fluid.locateTransformationRecord=function(that){return fluid.withInstantiator(that,function(instantiator){var matches=fluid.locateAllDemands(instantiator,that,["fluid.transformOptions"]);return fluid.find(matches,function(match){return 0===match.uncess&&fluid.contains(match.spec.contexts,that.typeName)?match.spec.spec:void 0})})},fluid.hashToArray=function(hash){var togo=[];return fluid.each(hash,function(value,key){togo.push(key)}),togo},fluid.localRecordExpected=["type","options","arguments","mergeOptions","mergeAllOptions","createOnEvent","priority"],fluid.checkComponentRecord=function(defaults,localRecord){var expected=fluid.arrayToHash(fluid.localRecordExpected);fluid.each(defaults.argumentMap,function(value,key){expected[key]=!0}),fluid.each(localRecord,function(value,key){expected[key]||fluid.fail('Probable error in subcomponent record - key "'+key+'" found, where the only legal options are '+fluid.hashToArray(expected).join(", "))})},fluid.expandComponentOptions=function(defaults,userOptions,that){userOptions&&userOptions.localRecord&&fluid.checkComponentRecord(defaults,userOptions.localRecord),defaults=fluid.expandOptions(fluid.copy(defaults),that);var localRecord={};if(userOptions&&userOptions.marker===fluid.EXPAND){var localOptions=fluid.get(userOptions,"localRecord.options");localOptions&&(defaults&&defaults.mergePolicy&&(localOptions.mergePolicy=defaults.mergePolicy),localRecord.options=fluid.expandOptions(localOptions,that)),localRecord.arguments=fluid.get(userOptions,"localRecord.arguments");var toExpand=userOptions.value;userOptions=fluid.expandOptions(toExpand,that,localRecord,{direct:!0})}localRecord.directOptions=userOptions,localRecord.options||(localRecord.options=userOptions);var mergeOptions=userOptions&&userOptions.mergeAllOptions||["{directOptions}"],togo=fluid.transform(mergeOptions,function(path){return"{directOptions}"===path?localRecord.directOptions:fluid.expandOptions(path,that,localRecord,{direct:!0})}),transRec=fluid.locateTransformationRecord(that);return transRec&&(togo[0].transformOptions=transRec.options),[defaults].concat(togo)},fluid.expandComponentOptions=fluid.wrapActivity(fluid.expandComponentOptions,["    while expanding component options ","arguments.1.value"," with record ","arguments.1"," for component ","arguments.2"]),fluid.getInstantiators=function(){var root=fluid.globalThreadLocal(),ins=root["fluid.instantiator"];return ins||(ins=root["fluid.instantiator"]=[]),ins},fluid.withInstantiator=function(that,func,message,userInstantiator){var oldLength,ins=fluid.getInstantiators(),instantiator=userInstantiator;return fluid.pushActivity(function(){return fluid.tryCatch(function(){return instantiator||(0===ins.length?(instantiator=fluid.instantiator(),fluid.log("Created new instantiator with id "+instantiator.id+" in order to operate on component "+(that?that.typeName:"[none]"))):instantiator=ins[ins.length-1]),ins.push(instantiator),oldLength=ins.length,that&&instantiator.recordComponent(that),func(instantiator)},null,function(){ins.length!==oldLength&&fluid.fail("Instantiator stack corrupted - old length "+oldLength+" new length "+ins.length),ins[ins.length-1]!=instantiator&&fluid.fail("Instantiator stack corrupted at stack top - old id "+instantiator.id+" new id "+ins[ins.length-1].id),ins.length--,0===ins.length&&fluid.log("Cleared instantiators (last id "+instantiator.id+") from threadLocal for end of "+(that?that.typeName:"[none]"))})},message)},fluid.fabricateDestroyMethod=function(that,name,instantiator,child){return function(){instantiator.clearComponent(that,name,child)}},fluid.initDependent=function(that,name,userInstantiator,directArgs){if(that&&!that[name]){fluid.log('Beginning instantiation of component with name "'+name+'" as child of '+fluid.dumpThat(that)),directArgs=directArgs||[];var instance,component=that.options.components[name];fluid.withInstantiator(that,function(instantiator){if("string"==typeof component){var instance=fluid.expandOptions([component],that)[0];instantiator.recordKnownComponent(that,instance,name,!1)}else if(component.type){var invokeSpec=fluid.resolveDemands(instantiator,that,[component.type,name],directArgs,{componentRecord:component});instantiator.pushUpcomingInstantiation(that,name),fluid.tryCatch(function(){that[inCreationMarker]=!0,instance=fluid.initSubcomponentImpl(that,{type:invokeSpec.funcName},invokeSpec.args);var path=instantiator.composePath(instantiator.idToPath[that.id]||"",name),existing=instantiator.pathToComponent[path];existing&&existing!==instance&&instantiator.clearComponent(that,name,existing),instance&&instance.typeName&&instance.id&&instance!==existing&&instantiator.recordKnownComponent(that,instance,name,!0),instance.destroy=fluid.fabricateDestroyMethod(that,name,instantiator,instance)},null,function(){delete that[inCreationMarker],instantiator.pushUpcomingInstantiation()})}else fluid.fail("Unrecognised material in place of subcomponent "+name+' - no "type" field found');that[name]=instance,fluid.fireEvent(instance,"events.onAttach",[instance,name,that])},['    while instantiating dependent component with name "'+name+'" with record ',component," as child of ",that],userInstantiator),instance&&fluid.log('Finished instantiation of component with name "'+name+'" and id '+instance.id+" as child of "+fluid.dumpThat(that))}},fluid.bindDeferredComponent=function(that,componentName,component,instantiator){var events=fluid.makeArray(component.createOnEvent);fluid.each(events,function(eventName){that.events[eventName].addListener(function(){fluid.log("Beginning instantiation of deferred component "+componentName+" due to event "+eventName),that[componentName]&&instantiator.clearComponent(that,componentName),fluid.initDependent(that,componentName,instantiator)},null,null,component.priority)})},fluid.priorityForComponent=function(component){return component.priority?component.priority:"fluid.typeFount"===component.type||fluid.hasGrade(fluid.defaults(component.type),"fluid.typeFount")?"first":void 0},fluid.initDependents=function(that){var options=that.options,components=options.components||{},componentSort={};fluid.withInstantiator(that,function(instantiator){fluid.each(components,function(component,name){if(component.createOnEvent)fluid.bindDeferredComponent(that,name,component,instantiator);else{var priority=fluid.priorityForComponent(component);componentSort[name]={key:name,priority:fluid.event.mapPriority(priority,0)}}});var componentList=fluid.event.sortListeners(componentSort);fluid.each(componentList,function(entry){fluid.initDependent(that,entry.key)});var invokers=options.invokers||{};for(var name in invokers){var invokerec=invokers[name],funcName="string"==typeof invokerec?invokerec:null;that[name]=fluid.withInstantiator(that,function(instantiator){return fluid.log('Beginning instantiation of invoker with name "'+name+'" as child of '+fluid.dumpThat(that)),fluid.makeInvoker(instantiator,that,funcName?null:invokerec,funcName)},['    while instantiating invoker with name "'+name+'" with record ',invokerec," as child of ",that]),fluid.log('Finished instantiation of invoker with name "'+name+'" as child of '+fluid.dumpThat(that))}},["    while instantiating dependent components for component "+that.typeName])},fluid.staticEnvironment=fluid.typeTag("fluid.staticEnvironment"),fluid.globalThreadLocal=fluid.threadLocal(function(){return fluid.typeTag("fluid.dynamicEnvironment")}),fluid.withEnvironment=function(envAdd,func,root){return root=root||fluid.globalThreadLocal(),fluid.tryCatch(function(){for(var key in envAdd)root[key]=envAdd[key];return $.extend(root,envAdd),func()},null,function(){for(var key in envAdd)delete root[key]})},fluid.makeEnvironmentFetcher=function(directModel,elResolver,envGetter){return envGetter=envGetter||fluid.globalThreadLocal,function(parsed){var env=envGetter();return fluid.fetchContextReference(parsed,directModel,env,elResolver)}},fluid.extractEL=function(string,options){if("ALL"===options.ELstyle)return string;if(1===options.ELstyle.length){if(string.charAt(0)===options.ELstyle)return string.substring(1)}else if("${}"===options.ELstyle){var i1=string.indexOf("${"),i2=string.lastIndexOf("}");if(0===i1&&-1!==i2)return string.substring(2,i2)}},fluid.extractELWithContext=function(string,options){var EL=fluid.extractEL(string,options);return EL&&"{"===EL.charAt(0)?fluid.parseContextReference(EL,0):EL?{path:EL}:EL},fluid.parseContextReference=function(reference,index,delimiter){var endcpos=reference.indexOf("}",index+1);-1===endcpos&&fluid.fail('Cannot parse context reference "'+reference+'": Malformed context reference without }');var context=reference.substring(index+1,endcpos),endpos=delimiter?reference.indexOf(delimiter,endcpos+1):reference.length,path=reference.substring(endcpos+1,endpos);return"."===path.charAt(0)&&(path=path.substring(1)),{context:context,path:path,endpos:endpos}},fluid.renderContextReference=function(parsed){return"{"+parsed.context+"}."+parsed.path},fluid.fetchContextReference=function(parsed,directModel,env,elResolver){elResolver&&(parsed=elResolver(parsed,env));var base=parsed.context?env[parsed.context]:directModel;return base?parsed.noDereference?parsed.path:fluid.get(base,parsed.path):base},fluid.resolveContextValue=function(string,options){if(options.bareContextRefs&&"{"===string.charAt(0)){var parsed=fluid.parseContextReference(string,0);return options.fetcher(parsed)}if(options.ELstyle&&"${}"!==options.ELstyle){var parsed=fluid.extractELWithContext(string,options);if(parsed)return options.fetcher(parsed)}for(;"string"==typeof string;){var i1=string.indexOf("${"),i2=string.indexOf("}",i1+2);if(-1===i1||-1===i2)break;var parsed;"{"===string.charAt(i1+2)?(parsed=fluid.parseContextReference(string,i1+2,"}"),i2=parsed.endpos):parsed={path:string.substring(i1+2,i2)
};var subs=options.fetcher(parsed),all=0===i1&&i2===string.length-1;if(void 0===subs||null===subs)return subs;string=all?subs:string.substring(0,i1)+subs+string.substring(i2+1)}return string},fluid.resolveContextValue=fluid.wrapActivity(fluid.resolveContextValue,["    while resolving context value ","arguments.0"]),fluid.defaults("fluid.resolveEnvironment",{ELstyle:"${}",seenIds:{},bareContextRefs:!0}),fluid.resolveEnvironment=function(obj,options){return options=$.extend({},fluid.rawDefaults("fluid.resolveEnvironment"),options),options.seenIds={},resolveEnvironmentImpl(obj,options)},fluid.expander.deferredCall=function(target,source,recurse){var expander=source.expander,args=!expander.args||fluid.isArrayable(expander.args)?expander.args:fluid.makeArray(expander.args);return args=recurse(args),fluid.invokeGlobalFunction(expander.func,args)},fluid.deferredCall=fluid.expander.deferredCall,fluid.deferredInvokeCall=function(target,source,recurse){var expander=source.expander,args=!expander.args||fluid.isArrayable(expander.args)?expander.args:fluid.makeArray(expander.args);return args=recurse(args),fluid.invoke(expander.func,args)},fluid.expander.noexpand=function(target,source){return $.extend(target,source.expander.tree)},fluid.noexpand=fluid.expander.noexpand,fluid.expander.lightFilter=function(obj,recurse,options){var togo;if(fluid.isArrayable(obj))togo=options.noCopy?obj:[],fluid.each(obj,function(value,key){togo[key]=recurse(value)});else{togo=options.noCopy?obj:{};for(var key in obj){var expander,value=obj[key];if(!("expander"!==key||options.expandOnly&&options.expandOnly[value.type])&&(expander=fluid.getGlobalValue(value.type)))return expander.call(null,togo,obj,recurse,options);"expander"===key&&expander||(togo[key]=recurse(value))}}return options.noCopy?obj:togo},fluid.expander.expandLight=function(source,expandOptions){var options=$.extend({},expandOptions);return options.filter=fluid.expander.lightFilter,fluid.resolveEnvironment(source,options)}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){function canonUrl(url){return url}var resourceCache={},pendingClass={};fluid.fetchResources=function(resourceSpecs,callback,options){var that=fluid.initLittleComponent("fluid.fetchResources",options);return that.resourceSpecs=resourceSpecs,that.callback=callback,that.operate=function(){fluid.fetchResources.fetchResourcesImpl(that)},fluid.each(resourceSpecs,function(resourceSpec,key){resourceSpec.recurseFirer=fluid.event.getEventFirer(null,null,'I/O completion for resource "'+key+'"'),resourceSpec.recurseFirer.addListener(that.operate),resourceSpec.url&&!resourceSpec.href&&(resourceSpec.href=resourceSpec.url)}),that.options.amalgamateClasses&&fluid.fetchResources.amalgamateClasses(resourceSpecs,that.options.amalgamateClasses,that.operate),that.operate(),that},fluid.fetchResources.amalgamateClasses=function(specs,classes,operator){fluid.each(classes,function(clazz){var pending=pendingClass[clazz];fluid.each(pending,function(pendingrec,canon){specs[clazz+"!"+canon]=pendingrec,pendingrec.recurseFirer.addListener(operator)})})},fluid.fetchResources.timeSuccessCallback=function(resourceSpec){if(resourceSpec.timeSuccess&&resourceSpec.options&&resourceSpec.options.success){var success=resourceSpec.options.success;resourceSpec.options.success=function(){var startTime=new Date,ret=success.apply(null,arguments);return fluid.log("External callback for URL "+resourceSpec.href+" completed - callback time: "+((new Date).getTime()-startTime.getTime())+"ms"),ret}}},fluid.fetchResources.clearResourceCache=function(url){url?delete resourceCache[canonUrl(url)]:fluid.clear(resourceCache)},fluid.fetchResources.handleCachedRequest=function(resourceSpec,response){var canon=canonUrl(resourceSpec.href),cached=resourceCache[canon];if(cached.$$firer$$){fluid.log("Handling request for "+canon+" from cache");var fetchClass=resourceSpec.fetchClass;fetchClass&&pendingClass[fetchClass]&&(fluid.log("Clearing pendingClass entry for class "+fetchClass),delete pendingClass[fetchClass][canon]),resourceCache[canon]=response,cached.fire(response)}},fluid.fetchResources.completeRequest=function(thisSpec,recurseCall){thisSpec.queued=!1,thisSpec.completeTime=new Date,fluid.log("Request to URL "+thisSpec.href+" completed - total elapsed time: "+(thisSpec.completeTime.getTime()-thisSpec.initTime.getTime())+"ms"),thisSpec.recurseFirer.fire()},fluid.fetchResources.makeResourceCallback=function(thisSpec){return{success:function(response){thisSpec.resourceText=response,thisSpec.resourceKey=thisSpec.href,thisSpec.forceCache&&fluid.fetchResources.handleCachedRequest(thisSpec,response),fluid.fetchResources.completeRequest(thisSpec)},error:function(response,textStatus,errorThrown){thisSpec.fetchError={status:response.status,textStatus:response.textStatus,errorThrown:errorThrown},fluid.fetchResources.completeRequest(thisSpec)}}},fluid.fetchResources.issueCachedRequest=function(resourceSpec,options){var canon=canonUrl(resourceSpec.href),cached=resourceCache[canon];if(cached)cached.$$firer$$?(fluid.log("Request for cached resource which is in flight: url "+canon),cached.addListener(function(response){options.success(response)})):options.success(cached);else{fluid.log("First request for cached resource with url "+canon),cached=fluid.event.getEventFirer(null,null,"cache notifier for resource URL "+canon),cached.$$firer$$=!0,resourceCache[canon]=cached;var fetchClass=resourceSpec.fetchClass;fetchClass&&(pendingClass[fetchClass]||(pendingClass[fetchClass]={}),pendingClass[fetchClass][canon]=resourceSpec),options.cache=!1,$.ajax(options)}},fluid.fetchResources.composeCallbacks=function(internal,external){return external?function(){try{external.apply(null,arguments)}catch(e){fluid.log("Exception applying external fetchResources callback: "+e)}internal.apply(null,arguments)}:internal},fluid.fetchResources.composePolicy=function(target,source,key){return fluid.fetchResources.composeCallbacks(target,source)},fluid.defaults("fluid.fetchResources.issueRequest",{mergePolicy:{success:fluid.fetchResources.composePolicy,error:fluid.fetchResources.composePolicy,url:"reverse"}}),fluid.fetchResources.issueRequest=function(resourceSpec,key){var thisCallback=fluid.fetchResources.makeResourceCallback(resourceSpec),options={url:resourceSpec.href,success:thisCallback.success,error:thisCallback.error,dataType:"text"};fluid.fetchResources.timeSuccessCallback(resourceSpec),fluid.merge(fluid.defaults("fluid.fetchResources.issueRequest").mergePolicy,options,resourceSpec.options),resourceSpec.queued=!0,resourceSpec.initTime=new Date,fluid.log("Request with key "+key+" queued for "+resourceSpec.href),resourceSpec.forceCache?fluid.fetchResources.issueCachedRequest(resourceSpec,options):$.ajax(options)},fluid.fetchResources.fetchResourcesImpl=function(that){var complete=!0,allSync=!0,resourceSpecs=that.resourceSpecs;for(var key in resourceSpecs){var resourceSpec=resourceSpecs[key];if((!resourceSpec.options||resourceSpec.options.async)&&(allSync=!1),resourceSpec.href&&!resourceSpec.completeTime)resourceSpec.queued||fluid.fetchResources.issueRequest(resourceSpec,key),resourceSpec.queued&&(complete=!1);else if(resourceSpec.nodeId&&!resourceSpec.resourceText){var node=document.getElementById(resourceSpec.nodeId);resourceSpec.resourceText=fluid.dom.getElementText(node),resourceSpec.resourceKey=resourceSpec.nodeId}}complete&&that.callback&&!that.callbackCalled&&(that.callbackCalled=!0,$.browser.mozilla&&!allSync?setTimeout(function(){that.callback(resourceSpecs)},1):that.callback(resourceSpecs))},fluid.fetchResources.primeCacheFromResources=function(componentName){var resources=fluid.defaults(componentName).resources,that={typeName:"fluid.fetchResources.primeCacheFromResources"},expanded=(fluid.expandOptions?fluid.expandOptions:fluid.identity)(fluid.copy(resources),that);fluid.fetchResources(expanded)},fluid.registerNamespace("fluid.expander"),fluid.expander.makeDefaultFetchOptions=function(successdisposer,failid,options){return $.extend(!0,{dataType:"text"},options,{success:function(response,environmentdisposer){var json=JSON.parse(response);environmentdisposer(successdisposer(json))},error:function(response,textStatus){fluid.log("Error fetching "+failid+": "+textStatus)}})},fluid.expander.makeFetchExpander=function(options){return{expander:{type:"fluid.expander.deferredFetcher",href:options.url,options:fluid.expander.makeDefaultFetchOptions(options.disposer,options.url,options.options),resourceSpecCollector:"{resourceSpecCollector}",fetchKey:options.fetchKey}}},fluid.expander.deferredFetcher=function(target,source,recurse,expandOptions){var expander=source.expander,spec=fluid.copy(expander),collector=fluid.resolveEnvironment(expander.resourceSpecCollector,expandOptions);delete spec.type,delete spec.resourceSpecCollector,delete spec.fetchKey;var environmentdisposer=function(disposed){$.extend(target,disposed)};spec.options.success=function(response){expander.options.success(response,environmentdisposer)};var key=expander.fetchKey||fluid.allocateGuid();return collector[key]=spec,target}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.registerNamespace("fluid.enhance"),fluid.enhance.isBrowser=function(){return"undefined"!=typeof window&&window.document},fluid.enhance.supportsBinaryXHR=function(){return window.FormData||window.XMLHttpRequest&&window.XMLHttpRequest.prototype&&window.XMLHttpRequest.prototype.sendAsBinary},fluid.enhance.supportsFormData=function(){return!!window.FormData},fluid.enhance.supportsFlash=function(){return"undefined"!=typeof swfobject&&swfobject.getFlashPlayerVersion().major>8},fluid.enhance.checked={},fluid.enhance.sep="--",fluid.enhance.typeToKey=function(typeName){return typeName.replace(/[.]/gi,fluid.enhance.sep)},fluid.enhance.check=function(stuffToCheck){fluid.each(stuffToCheck,function(val,key){var staticKey=fluid.enhance.typeToKey(key);if(void 0===fluid.enhance.checked[staticKey]){var results="string"==typeof val?fluid.invokeGlobalFunction(val):val();fluid.enhance.checked[staticKey]=results,results&&(fluid.staticEnvironment[staticKey]=fluid.typeTag(key))}})},fluid.enhance.forget=function(typeName){var key=fluid.enhance.typeToKey(typeName);void 0!==fluid.enhance.checked[key]&&(delete fluid.staticEnvironment[key],delete fluid.enhance.checked[key])},fluid.enhance.forgetAll=function(){fluid.each(fluid.enhance.checked,function(val,key){fluid.enhance.forget(key)})},fluid.progressiveChecker=function(options){var that=fluid.initLittleComponent("fluid.progressiveChecker",options);return fluid.typeTag(fluid.find(that.options.checks,function(check){return check.feature?check.contextName:void 0},that.options.defaultContextName))},fluid.defaults("fluid.progressiveChecker",{gradeNames:"fluid.typeFount",checks:[],defaultContextName:void 0}),fluid.progressiveCheckerForComponent=function(options){var that=fluid.initLittleComponent("fluid.progressiveCheckerForComponent",options),defaults=fluid.defaults(that.options.componentName);return fluid.progressiveChecker(fluid.expandOptions(fluid.copy(defaults.progressiveCheckerOptions),that))},fluid.defaults("fluid.progressiveCheckerForComponent",{gradeNames:"fluid.typeFount"}),fluid.enhance.isBrowser()&&$("head").append("<style type='text/css'>.fl-progEnhance-basic, .fl-ProgEnhance-basic { display: none; } .fl-progEnhance-enhanced, .fl-ProgEnhance-enhanced { display: block; }</style>")}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.XMLP=function(strXML){return fluid.XMLP.XMLPImpl(strXML)},fluid.XMLP.closedTags={abbr:!0,br:!0,col:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,hr:!0,area:!0,embed:!0},fluid.XMLP._NONE=0,fluid.XMLP._ELM_B=1,fluid.XMLP._ELM_E=2,fluid.XMLP._ELM_EMP=3,fluid.XMLP._ATT=4,fluid.XMLP._TEXT=5,fluid.XMLP._ENTITY=6,fluid.XMLP._PI=7,fluid.XMLP._CDATA=8,fluid.XMLP._COMMENT=9,fluid.XMLP._DTD=10,fluid.XMLP._ERROR=11,fluid.XMLP._CONT_XML=0,fluid.XMLP._CONT_ALT=1,fluid.XMLP._ATT_NAME=0,fluid.XMLP._ATT_VAL=1,fluid.XMLP._STATE_PROLOG=1,fluid.XMLP._STATE_DOCUMENT=2,fluid.XMLP._STATE_MISC=3,fluid.XMLP._errs=[],fluid.XMLP._errs[fluid.XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence",fluid.XMLP._errs[fluid.XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence",fluid.XMLP._errs[fluid.XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence",fluid.XMLP._errs[fluid.XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence",fluid.XMLP._errs[fluid.XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence",fluid.XMLP._errs[fluid.XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence",fluid.XMLP._errs[fluid.XMLP.ERR_PI_TARGET=6]="PI: target is required",fluid.XMLP._errs[fluid.XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing",fluid.XMLP._errs[fluid.XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"',fluid.XMLP._errs[fluid.XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names',fluid.XMLP._errs[fluid.XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes",fluid.XMLP._errs[fluid.XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names',fluid.XMLP._errs[fluid.XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values',fluid.XMLP._errs[fluid.XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed",fluid.XMLP._errs[fluid.XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity",fluid.XMLP._errs[fluid.XMLP.ERR_INFINITELOOP=15]="Infinite loop",fluid.XMLP._errs[fluid.XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element",fluid.XMLP._errs[fluid.XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly",fluid.XMLP._checkStructure=function(that,iEvent){var stack=that.m_stack;if(fluid.XMLP._STATE_PROLOG==that.m_iState&&(that.m_iState=fluid.XMLP._STATE_DOCUMENT),fluid.XMLP._STATE_DOCUMENT===that.m_iState&&((fluid.XMLP._ELM_B==iEvent||fluid.XMLP._ELM_EMP==iEvent)&&(that.m_stack[stack.length]=that.getName()),fluid.XMLP._ELM_E==iEvent||fluid.XMLP._ELM_EMP==iEvent)){if(0===stack.length)return fluid.XMLP._NONE;var strTop=stack[stack.length-1];if(that.m_stack.length--,null===strTop||strTop!==that.getName())return that._setErr(that,fluid.XMLP.ERR_ELM_NESTING)}return iEvent},fluid.XMLP._parseCDATA=function(that,iB){var iE=that.m_xml.indexOf("]]>",iB);return-1==iE?fluid.XMLP._setErr(that,fluid.XMLP.ERR_CLOSE_CDATA):(fluid.XMLP._setContent(that,fluid.XMLP._CONT_XML,iB,iE),that.m_iP=iE+3,fluid.XMLP._CDATA)},fluid.XMLP._parseComment=function(that,iB){var iE=that.m_xml.indexOf("-->",iB);return-1==iE?fluid.XMLP._setErr(that,fluid.XMLP.ERR_CLOSE_COMMENT):(fluid.XMLP._setContent(that,fluid.XMLP._CONT_XML,iB-4,iE+3),that.m_iP=iE+3,fluid.XMLP._COMMENT)},fluid.XMLP._parseDTD=function(that,iB){var iE,strClose,iInt,iLast;if(iE=that.m_xml.indexOf(">",iB),-1==iE)return fluid.XMLP._setErr(that,fluid.XMLP.ERR_CLOSE_DTD);for(iInt=that.m_xml.indexOf("[",iB),strClose=-1!=iInt&&iE>iInt?"]>":">";;){if(iE==iLast)return fluid.XMLP._setErr(that,fluid.XMLP.ERR_INFINITELOOP);if(iLast=iE,iE=that.m_xml.indexOf(strClose,iB),-1==iE)return fluid.XMLP._setErr(that,fluid.XMLP.ERR_CLOSE_DTD);if("]]>"!=that.m_xml.substring(iE-1,iE+2))break}return that.m_iP=iE+strClose.length,fluid.XMLP._DTD},fluid.XMLP._parsePI=function(that,iB){var iE,iTB,iTE,iCB,iCE;return iE=that.m_xml.indexOf("?>",iB),-1==iE?fluid.XMLP._setErr(that,fluid.XMLP.ERR_CLOSE_PI):(iTB=fluid.SAXStrings.indexOfNonWhitespace(that.m_xml,iB,iE),-1==iTB?fluid.XMLP._setErr(that,fluid.XMLP.ERR_PI_TARGET):(iTE=fluid.SAXStrings.indexOfWhitespace(that.m_xml,iTB,iE),-1==iTE&&(iTE=iE),iCB=fluid.SAXStrings.indexOfNonWhitespace(that.m_xml,iTE,iE),-1==iCB&&(iCB=iE),iCE=fluid.SAXStrings.lastIndexOfNonWhitespace(that.m_xml,iCB,iE),-1==iCE&&(iCE=iE-1),that.m_name=that.m_xml.substring(iTB,iTE),fluid.XMLP._setContent(that,fluid.XMLP._CONT_XML,iCB,iCE+1),that.m_iP=iE+2,fluid.XMLP._PI))},fluid.XMLP._parseText=function(that,iB){var iE=that.m_xml.indexOf("<",iB);return-1==iE&&(iE=that.m_xml.length),fluid.XMLP._setContent(that,fluid.XMLP._CONT_XML,iB,iE),that.m_iP=iE,fluid.XMLP._TEXT},fluid.XMLP._setContent=function(that,iSrc){var args=arguments;fluid.XMLP._CONT_XML==iSrc?(that.m_cAlt=null,that.m_cB=args[2],that.m_cE=args[3]):(that.m_cAlt=args[2],that.m_cB=0,that.m_cE=args[2].length),that.m_cSrc=iSrc},fluid.XMLP._setErr=function(that,iErr){var strErr=fluid.XMLP._errs[iErr];return that.m_cAlt=strErr,that.m_cB=0,that.m_cE=strErr.length,that.m_cSrc=fluid.XMLP._CONT_ALT,fluid.XMLP._ERROR},fluid.XMLP._parseElement=function(that,iB){var iE,iDE,iType,strN;if(iDE=iE=that.m_xml.indexOf(">",iB),-1==iE)return that._setErr(that,fluid.XMLP.ERR_CLOSE_ELM);if("/"==that.m_xml.charAt(iB)?(iType=fluid.XMLP._ELM_E,iB++):iType=fluid.XMLP._ELM_B,"/"==that.m_xml.charAt(iE-1)){if(iType==fluid.XMLP._ELM_E)return fluid.XMLP._setErr(that,fluid.XMLP.ERR_ELM_EMPTY);iType=fluid.XMLP._ELM_EMP,iDE--}that.nameRegex.lastIndex=iB;var nameMatch=that.nameRegex.exec(that.m_xml);if(!nameMatch)return fluid.XMLP._setErr(that,fluid.XMLP.ERR_ELM_NAME);if(strN=nameMatch[1].toLowerCase(),"li"===strN&&iType!==fluid.XMLP._ELM_E&&that.m_stack.length>0&&"li"===that.m_stack[that.m_stack.length-1]&&!that.m_emitSynthetic)return that.m_name="li",that.m_emitSynthetic=!0,fluid.XMLP._ELM_E;if(that.m_attributes={},that.m_cAlt="",that.nameRegex.lastIndex<iDE)for(that.m_iP=that.nameRegex.lastIndex;that.m_iP<iDE;){that.attrStartRegex.lastIndex=that.m_iP;var attrMatch=that.attrStartRegex.exec(that.m_xml);if(!attrMatch)return fluid.XMLP._setErr(that,fluid.XMLP.ERR_ATT_VALUES);var attrval,attrname=attrMatch[1].toLowerCase();if(61===that.m_xml.charCodeAt(that.attrStartRegex.lastIndex)){var valRegex=34===that.m_xml.charCodeAt(that.attrStartRegex.lastIndex+1)?that.attrValRegex:that.attrValIERegex;if(valRegex.lastIndex=that.attrStartRegex.lastIndex+1,attrMatch=valRegex.exec(that.m_xml),!attrMatch)return fluid.XMLP._setErr(that,fluid.XMLP.ERR_ATT_VALUES);attrval=attrMatch[1]}else attrval=attrname,valRegex=that.attrStartRegex;if(that.m_attributes[attrname])return fluid.XMLP._setErr(that,fluid.XMLP.ERR_ATT_DUP);that.m_attributes[attrname]=attrval,that.m_iP=valRegex.lastIndex}if(-1!=strN.indexOf("<"))return fluid.XMLP._setErr(that,fluid.XMLP.ERR_ELM_LT_NAME);if(that.m_name=strN,that.m_iP=iE+1,fluid.XMLP.closedTags[strN]){that.closeRegex.lastIndex=iE+1;var closeMatch=that.closeRegex.exec;if(closeMatch){var matchclose=that.m_xml.indexOf(strN,closeMatch.lastIndex);return matchclose===closeMatch.lastIndex?iType:fluid.XMLP._ELM_EMP}}return that.m_emitSynthetic=!1,iType},fluid.XMLP._parse=function(that){var iP=that.m_iP,xml=that.m_xml;if(iP===xml.length)return fluid.XMLP._NONE;var c=xml.charAt(iP);if("<"!==c)return fluid.XMLP._parseText(that,iP);var c2=xml.charAt(iP+1);return"?"===c2?fluid.XMLP._parsePI(that,iP+2):"!"!==c2?fluid.XMLP._parseElement(that,iP+1):iP===xml.indexOf("<!DOCTYPE",iP)?fluid.XMLP._parseDTD(that,iP+9):iP===xml.indexOf("<!--",iP)?fluid.XMLP._parseComment(that,iP+4):iP===xml.indexOf("<![CDATA[",iP)?fluid.XMLP._parseCDATA(that,iP+9):void 0},fluid.XMLP.XMLPImpl=function(strXML){var that={};return that.m_xml=strXML,that.m_iP=0,that.m_iState=fluid.XMLP._STATE_PROLOG,that.m_stack=[],that.m_attributes={},that.m_emitSynthetic=!1,that.getColumnNumber=function(){return fluid.SAXStrings.getColumnNumber(that.m_xml,that.m_iP)},that.getContent=function(){return that.m_cSrc==fluid.XMLP._CONT_XML?that.m_xml:that.m_cAlt},that.getContentBegin=function(){return that.m_cB},that.getContentEnd=function(){return that.m_cE},that.getLineNumber=function(){return fluid.SAXStrings.getLineNumber(that.m_xml,that.m_iP)},that.getName=function(){return that.m_name},that.next=function(){return fluid.XMLP._checkStructure(that,fluid.XMLP._parse(that))},that.nameRegex=/([^\s\/>]+)/g,that.attrStartRegex=/\s*([\w:_][\w:_\-\.]*)/gm,that.attrValRegex=/\"([^\"]*)\"\s*/gm,that.attrValIERegex=/([^\>\s]+)\s*/gm,that.closeRegex=/\s*<\//g,that},fluid.SAXStrings={},fluid.SAXStrings.WHITESPACE=" 	\n\r",fluid.SAXStrings.QUOTES="\"'",fluid.SAXStrings.getColumnNumber=function(strD,iP){if(!strD)return-1;iP=iP||strD.length;var arrD=strD.substring(0,iP).split("\n");arrD.length--;var iLinePos=arrD.join("\n").length;return iP-iLinePos},fluid.SAXStrings.getLineNumber=function(strD,iP){return strD?(iP=iP||strD.length,strD.substring(0,iP).split("\n").length):-1},fluid.SAXStrings.indexOfNonWhitespace=function(strD,iB,iE){if(!strD)return-1;iB=iB||0,iE=iE||strD.length;for(var i=iB;iE>i;++i){var c=strD.charAt(i);if(" "!==c&&"	"!==c&&"\n"!==c&&"\r"!==c)return i}return-1},fluid.SAXStrings.indexOfWhitespace=function(strD,iB,iE){if(!strD)return-1;iB=iB||0,iE=iE||strD.length;for(var i=iB;iE>i;i++)if(-1!=fluid.SAXStrings.WHITESPACE.indexOf(strD.charAt(i)))return i;return-1},fluid.SAXStrings.lastIndexOfNonWhitespace=function(strD,iB,iE){if(!strD)return-1;iB=iB||0,iE=iE||strD.length;for(var i=iE-1;i>=iB;i--)if(-1==fluid.SAXStrings.WHITESPACE.indexOf(strD.charAt(i)))return i;return-1},fluid.SAXStrings.replace=function(strD,iB,iE,strF,strR){return strD?(iB=iB||0,iE=iE||strD.length,strD.substring(iB,iE).split(strF).join(strR)):""}}(jQuery,fluid_1_5),fluid_1_5=fluid_1_5||{},function($,fluid){fluid.parseTemplate=function(template,baseURL,scanStart,cutpoints_in,opts){function isSimpleClassCutpoint(tree){return 1===tree.length&&1===tree[0].predList.length&&tree[0].predList[0].clazz}function init(baseURLin,debugModeIn,cutpointsIn){if(t.rootlump=XMLLump(0,-1),tagstack=[t.rootlump],lumpindex=0,nestingdepth=0,justended=!1,defstart=-1,defend=-1,baseURL=baseURLin,debugMode=debugModeIn,cutpointsIn)for(var i=0;i<cutpointsIn.length;++i){var tree=fluid.parseSelector(cutpointsIn[i].selector),clazz=isSimpleClassCutpoint(tree);clazz?simpleClassCutpoints[clazz]=cutpointsIn[i].id:(cutstatus.push([]),cutpoints.push($.extend({},cutpointsIn[i],{tree:tree})))}}function findTopContainer(){for(var i=tagstack.length-1;i>=0;--i){var lump=tagstack[i];if(void 0!==lump.rsfID)return lump}return t.rootlump}function newLump(){var togo=XMLLump(lumpindex,nestingdepth);return debugMode&&(togo.line=parser.getLineNumber(),togo.column=parser.getColumnNumber()),t.lumps[lumpindex]=togo,++lumpindex,togo}function addLump(mmap,ID,lump){var list=mmap[ID];list||(list=[],mmap[ID]=list),list[list.length]=lump}function checkContribute(ID,lump){if(-1!==ID.indexOf("scr=contribute-")){var scr=ID.substring("scr=contribute-".length);addLump(t.collectmap,scr,lump)}}function debugLump(lump){return"<"+lump.tagname+">"}function hasCssClass(clazz,totest){return totest?-1!==(" "+totest+" ").indexOf(" "+clazz+" "):!1}function matchNode(term,headlump,headclazz){if(term.predList){for(var i=0;i<term.predList.length;++i){var pred=term.predList[i];if(pred.id&&headlump.attributemap.id!==pred.id)return!1;if(pred.clazz&&!hasCssClass(pred.clazz,headclazz))return!1;if(pred.tag&&headlump.tagname!==pred.tag)return!1}return!0}}function tagStartCut(headlump){var togo,headclazz=headlump.attributemap["class"];if(headclazz)for(var split=headclazz.split(" "),i=0;i<split.length;++i){var simpleCut=simpleClassCutpoints[$.trim(split[i])];if(simpleCut)return simpleCut}for(var i=0;i<cutpoints.length;++i){var cut=cutpoints[i],cutstat=cutstatus[i],nextterm=cutstat.length;if(nextterm<cut.tree.length){var term=cut.tree[nextterm];if(nextterm>0&&cut.tree[nextterm-1].child&&cutstat[nextterm-1]!==headlump.nestingdepth-1)continue;var isMatch=matchNode(term,headlump,headclazz);isMatch&&(cutstat[cutstat.length]=headlump.nestingdepth,cutstat.length===cut.tree.length&&(void 0!==togo&&fluid.fail("Cutpoint specification error - node "+debugLump(headlump)+" has already matched with rsf:id of "+togo),(void 0===cut.id||null===cut.id)&&fluid.fail("Error in cutpoints list - entry at position "+i+" does not have an id set"),togo=cut.id))}}return togo}function tagEndCut(){if(cutpoints)for(var i=0;i<cutpoints.length;++i){var cutstat=cutstatus[i];cutstat.length>0&&cutstat[cutstat.length-1]===nestingdepth&&cutstat.length--}}function processTagEnd(){tagEndCut();var endlump=newLump();--nestingdepth,endlump.text="</"+parser.getName()+">";var oldtop=tagstack[tagstack.length-1];oldtop.close_tag=t.lumps[lumpindex-1],tagstack.length--,justended=!0}function processTagStart(isempty,text){if(++nestingdepth,justended){justended=!1;var backlump=newLump();backlump.nestingdepth--}-1===t.firstdocumentindex&&(t.firstdocumentindex=lumpindex);var headlump=newLump(),stacktop=tagstack[tagstack.length-1];headlump.uplump=stacktop;var tagname=parser.getName();headlump.tagname=tagname;var attrs=headlump.attributemap=parser.m_attributes,ID=attrs[fluid.ID_ATTRIBUTE];void 0===ID&&(ID=tagStartCut(headlump));for(var attrname in attrs)void 0===ID&&(/href|src|codebase|action/.test(attrname)?ID="scr=rewrite-url":void 0===ID&&/for|headers/.test(attrname)&&(ID="scr=null"));if(ID){126===ID.charCodeAt(0)&&(ID=ID.substring(1),headlump.elide=!0),checkContribute(ID,headlump),headlump.rsfID=ID;var downreg=findTopContainer();for(downreg.downmap||(downreg.downmap={});downreg;)downreg.downmap&&addLump(downreg.downmap,ID,headlump),downreg=downreg.uplump;addLump(t.globalmap,ID,headlump);var colpos=ID.indexOf(":");if(-1!==colpos){var prefix=ID.substring(0,colpos);stacktop.finallump||(stacktop.finallump={}),stacktop.finallump[prefix]=headlump}}headlump.text="<"+tagname+fluid.dumpAttributes(attrs)+(isempty&&!ID?"/>":">"),tagstack[tagstack.length]=headlump,isempty&&(ID?processTagEnd():(--nestingdepth,tagstack.length--))}function processDefaultTag(){if(-1!==defstart){-1===t.firstdocumentindex&&(t.firstdocumentindex=lumpindex);var text=parser.getContent().substr(defstart,defend-defstart);justended=!1;var newlump=newLump();newlump.text=text,defstart=-1}}opts=opts||{},template||fluid.fail("empty template supplied to fluid.parseTemplate");var t,parser,tagstack,lumpindex=0,nestingdepth=0,justended=!1,defstart=-1,defend=-1,debugMode=!1,cutpoints=[],simpleClassCutpoints={},cutstatus=[],XMLLump=function(lumpindex,nestingdepth){return{nestingdepth:nestingdepth,lumpindex:lumpindex,parent:t}};t=fluid.XMLViewTemplate(),init(baseURL,opts.debugMode,cutpoints_in);var idpos=template.indexOf(fluid.ID_ATTRIBUTE);if(scanStart){var brackpos=template.indexOf(">",idpos);parser=fluid.XMLP(template.substring(brackpos+1))}else parser=fluid.XMLP(template);parseloop:for(;;){var iEvent=parser.next();switch(iEvent){case fluid.XMLP._ELM_B:processDefaultTag(),processTagStart(!1,"");break;case fluid.XMLP._ELM_E:processDefaultTag(),processTagEnd();break;case fluid.XMLP._ELM_EMP:processDefaultTag(),processTagStart(!0,"");break;case fluid.XMLP._PI:case fluid.XMLP._DTD:defstart=-1;continue;case fluid.XMLP._TEXT:case fluid.XMLP._ENTITY:case fluid.XMLP._CDATA:case fluid.XMLP._COMMENT:-1===defstart&&(defstart=parser.m_cB),defend=parser.m_cE;break;case fluid.XMLP._ERROR:fluid.setLogging(!0);var message="Error parsing template: "+parser.m_cAlt+" at line "+parser.getLineNumber();fluid.log(message),fluid.log("Just read: "+parser.m_xml.substring(parser.m_iP-30,parser.m_iP)),fluid.log("Still to read: "+parser.m_xml.substring(parser.m_iP,parser.m_iP+30)),fluid.fail(message);break parseloop;case fluid.XMLP._NONE:break parseloop}}processDefaultTag();var excess=tagstack.length-1;return excess&&fluid.fail("Error parsing template - unclosed tag(s) of depth "+excess+": "+fluid.transform(tagstack.splice(1,excess),function(lump){return debugLump(lump)}).join(", ")),t},fluid.debugLump=function(lump){var togo=lump.text;return togo+=" at ",togo+="lump line "+lump.line+" column "+lump.column+" index "+lump.lumpindex,togo+=null===lump.parent.href?"":" in file "+lump.parent.href},fluid.ID_ATTRIBUTE="rsf:id",fluid.getPrefix=function(id){var colpos=id.indexOf(":");return-1===colpos?id:id.substring(0,colpos)},fluid.SplitID=function(id){var that={},colpos=id.indexOf(":");return-1===colpos?that.prefix=id:(that.prefix=id.substring(0,colpos),that.suffix=id.substring(colpos+1)),that},fluid.XMLViewTemplate=function(){return{globalmap:{},collectmap:{},lumps:[],firstdocumentindex:-1}},fluid.XMLEncode=function(text){return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")},fluid.dumpAttributes=function(attrcopy){var togo="";for(var attrname in attrcopy){var attrvalue=attrcopy[attrname];null!==attrvalue&&void 0!==attrvalue&&(togo+=" "+attrname+'="'+attrvalue+'"')}return togo},fluid.aggregateMMap=function(target,source){for(var key in source){var targhas=target[key];targhas||(target[key]=[]),target[key]=target[key].concat(source[key])}},fluid.parseTemplates=function(resourceSpec,templateList,opts){var togo=[];opts=opts||{},togo.globalmap={};for(var i=0;i<templateList.length;++i){var resource=resourceSpec[templateList[i]],lastslash=resource.href.lastIndexOf("/"),baseURL=-1===lastslash?"":resource.href.substring(0,lastslash+1),template=fluid.parseTemplate(resource.resourceText,baseURL,opts.scanStart&&0===i,resource.cutpoints,opts);0===i&&fluid.aggregateMMap(togo.globalmap,template.globalmap),template.href=resource.href,template.baseURL=baseURL,template.resourceKey=resource.resourceKey,togo[i]=template,fluid.aggregateMMap(togo.globalmap,template.rootlump.downmap)}return togo};var chars="(?:[\\wĨ-￿*_-]|\\\\.)",quickClass=new RegExp("([#.]?)("+chars+"+)","g"),childSeg=new RegExp("\\s*(>)?\\s*","g");fluid.parseSelector=function(selstring){var togo=[];selstring=$.trim(selstring),quickClass.lastIndex=0;for(var lastIndex=0;;){for(var atNode=[];;){var segMatch=quickClass.exec(selstring);if(!segMatch||segMatch.index!==lastIndex)break;var thisNode={},text=segMatch[2];""===segMatch[1]?thisNode.tag=text:"#"===segMatch[1]?thisNode.id=text:"."===segMatch[1]&&(thisNode.clazz=text),atNode[atNode.length]=thisNode,lastIndex=quickClass.lastIndex}childSeg.lastIndex=lastIndex;var fullAtNode={predList:atNode},childMatch=childSeg.exec(selstring);if(!childMatch||childMatch.index!==lastIndex){var remainder=selstring.substring(lastIndex);fluid.fail("Error in selector string - can not match child selector expression at "+remainder)}if(">"===childMatch[1]&&(fullAtNode.child=!0),togo[togo.length]=fullAtNode,childSeg.lastIndex>=selstring.length)break;lastIndex=childSeg.lastIndex,quickClass.lastIndex=childSeg.lastIndex}return togo}}(jQuery,fluid_1_5),fluid_1_5=fluid_1_5||{},function($,fluid){function debugPosition(component){return"as child of "+(component.parent.fullID?"component with full ID "+component.parent.fullID:"root")}function computeFullID(component){var togo="",move=component;for(void 0===component.children&&(togo=component.ID+(void 0!==component.localID?component.localID:""),move=component.parent);move.parent;){var parent=move.parent;if(void 0!==move.fullID)return togo=move.fullID+togo;if(void 0===move.noID){var ID=move.ID;void 0===ID&&fluid.fail("Error in component tree - component found with no ID "+debugPosition(parent)+": please check structure");var colpos=ID.indexOf(":"),prefix=-1===colpos?ID:ID.substring(0,colpos);togo=prefix+":"+(void 0===move.localID?"":move.localID)+":"+togo}move=parent}return togo}function processChild(value,key){if(renderer.isBoundPrimitive(value))return{componentType:"UIBound",value:value,ID:key};var unzip=unzipComponent(value);return unzip.ID?{ID:key,componentType:"UIContainer",children:[unzip]}:(unzip.ID=key,unzip)}function fixChildren(children){if(fluid.isArrayable(children))return children;var togo=[];for(var key in children){var value=children[key];if(fluid.isArrayable(value))for(var i=0;i<value.length;++i){var processed=processChild(value[i],key);togo[togo.length]=processed}else togo[togo.length]=processChild(value,key)}return togo}function fixupValue(uibound,model,resolverGetConfig){void 0===uibound.value&&void 0!==uibound.valuebinding&&(model||fluid.fail("Cannot perform value fixup for valuebinding "+uibound.valuebinding+" since no model was supplied to rendering"),uibound.value=fluid.get(model,uibound.valuebinding,resolverGetConfig))}function upgradeBound(holder,property,model,resolverGetConfig){void 0!==holder[property]?renderer.isBoundPrimitive(holder[property])?holder[property]={value:holder[property]
}:holder[property].messagekey&&(holder[property].componentType="UIMessage"):holder[property]={value:null},fixupValue(holder[property],model,resolverGetConfig)}function fixupTree(tree,model,resolverGetConfig){if(void 0===tree.componentType&&(tree=unzipComponent(tree,model,resolverGetConfig)),"UIContainer"===tree.componentType||tree.parent||(tree={children:[tree]}),tree.children){tree.childmap={};for(var i=0;i<tree.children.length;++i){var child=tree.children[i];void 0===child.componentType&&(child=unzipComponent(child,model,resolverGetConfig),tree.children[i]=child),child.parent=tree,void 0===child.ID&&fluid.fail("Error in component tree: component found with no ID "+debugPosition(child)),tree.childmap[child.ID]=child;var colpos=child.ID.indexOf(":");if(-1===colpos);else{var prefix=child.ID.substring(0,colpos),childlist=tree.childmap[prefix];childlist||(childlist=[],tree.childmap[prefix]=childlist),void 0===child.localID&&0!==childlist.length&&(child.localID=childlist.length),childlist[childlist.length]=child}child.fullID=computeFullID(child);var componentType=child.componentType;if("UISelect"===componentType)child.selection.fullID=child.fullID+"-selection";else if("UIInitBlock"===componentType){for(var call=child.functionname+"(",j=0;j<child.arguments.length;++j)child.arguments[j]instanceof fluid.ComponentReference&&(child.arguments[j]=child.parent.fullID+child.arguments[j].reference),call+=JSON.stringify(child.arguments[j]),j<child.arguments.length-1&&(call+=", ");child.markup={value:call+")\n"},child.componentType="UIVerbatim"}else"UIBound"===componentType&&fixupValue(child,model,resolverGetConfig);fixupTree(child,model,resolverGetConfig)}}return tree}function findNodeValue(rootNode){var node=fluid.dom.iterateDom(rootNode,function(node){return 8===node.nodeType||4===node.nodeType?"stop":null},!0),value=node.nodeValue;return 0===value.indexOf("[CDATA[")?value.substring(6,value.length-2):value}var renderer={};renderer.isBoundPrimitive=function(value){return fluid.isPrimitive(value)||fluid.isArrayable(value)&&(0===value.length||"string"==typeof value[0])};var unzipComponent;renderer.duckMap={children:"UIContainer",value:"UIBound",valuebinding:"UIBound",messagekey:"UIMessage",markup:"UIVerbatim",selection:"UISelect",target:"UILink",choiceindex:"UISelectChoice",functionname:"UIInitBlock"};var boundMap={UISelect:["selection","optionlist","optionnames"],UILink:["target","linktext"],UIVerbatim:["markup"],UIMessage:["messagekey"]};renderer.boundMap=fluid.transform(boundMap,fluid.arrayToHash),renderer.inferComponentType=function(component){for(var key in renderer.duckMap)if(void 0!==component[key])return renderer.duckMap[key]},renderer.applyComponentType=function(component){component.componentType=renderer.inferComponentType(component),void 0===component.componentType&&void 0!==component.ID&&(component.componentType="UIBound")},unzipComponent=function(component,model,resolverGetConfig){if(component&&renderer.applyComponentType(component),!component||void 0===component.componentType){var decorators=component.decorators;decorators&&delete component.decorators,component={componentType:"UIContainer",children:component},component.decorators=decorators}var cType=component.componentType;if("UIContainer"===cType)component.children=fixChildren(component.children);else{var map=renderer.boundMap[cType];map&&fluid.each(map,function(value,key){upgradeBound(component,key,model,resolverGetConfig)})}return component},fluid.NULL_STRING="▩null▩";var LINK_ATTRIBUTES={a:"href",link:"href",img:"src",frame:"src",script:"src",style:"src",input:"src",embed:"src",form:"action",applet:"codebase",object:"codebase"};renderer.decoratorComponentPrefix="**-renderer-",renderer.IDtoComponentName=function(ID,num){return renderer.decoratorComponentPrefix+ID.replace(/\./g,"")+"-"+num},renderer.invokeFluidDecorator=function(func,args,ID,num,options){var that;if(options.instantiator&&options.parentComponent){var parent=options.parentComponent,name=renderer.IDtoComponentName(ID,num);fluid.set(parent,fluid.path("options","components",name),{type:func}),that=fluid.initDependent(options.parentComponent,name,options.instantiator,args)}else that=fluid.invokeGlobalFunction(func,args);return that},fluid.renderer=function(templates,tree,options,fossilsIn){function getRewriteKey(template,parent,id){return template.resourceKey+parent.fullID+id}function resolveInScope(searchID,defprefix,scope,child){var deflump,scopelook=scope?scope[searchID]:null;if(scopelook)for(var i=0;i<scopelook.length;++i){var scopelump=scopelook[i];if(deflump||scopelump.rsfID!==defprefix||(deflump=scopelump),scopelump.rsfID===searchID)return scopelump}return deflump}function resolveCall(sourcescope,child){var searchID=child.jointID?child.jointID:child.ID,split=fluid.SplitID(searchID),defprefix=split.prefix+":",match=resolveInScope(searchID,defprefix,sourcescope.downmap,child);return match?match:child.children&&(match=resolveInScope(searchID,defprefix,globalmap,child))?match:null}function noteCollected(template){seenset[template.href]||(fluid.aggregateMMap(collected,template.collectmap),seenset[template.href]=!0)}function resolveRecurse(basecontainer,parentlump){for(var i=0;i<basecontainer.children.length;++i){var branch=basecontainer.children[i];if(branch.children){var resolved=resolveCall(parentlump,branch);if(resolved){branchmap[branch.fullID]=resolved;var id=resolved.attributemap.id;void 0!==id&&(rewritemap[getRewriteKey(parentlump.parent,basecontainer,id)]=branch.fullID),noteCollected(resolved.parent),resolveRecurse(branch,resolved)}}}if(parentlump.downmap)for(var id in parentlump.downmap)for(var lumps=parentlump.downmap[id],i=0;i<lumps.length;++i){var lump=lumps[i],lumpid=lump.attributemap.id;if(void 0!==lumpid&&void 0!==lump.rsfID){var resolved=fetchComponent(basecontainer,lump.rsfID);if(null!==resolved){var resolveID=resolved.fullID;"UISelect"===resolved.componentType&&(resolveID+="-selection"),rewritemap[getRewriteKey(parentlump.parent,basecontainer,lumpid)]=resolveID}}}}function resolveBranches(globalmapp,basecontainer,parentlump){branchmap={},rewritemap={},seenset={},collected={},globalmap=globalmapp,branchmap[basecontainer.fullID]=parentlump,resolveRecurse(basecontainer,parentlump)}function dumpTillLump(lumps,start,limit){for(;limit>start;++start){var text=lumps[start].text;text&&(out+=lumps[start].text)}}function dumpScan(lumps,renderindex,basedepth,closeparent,insideleaf){for(var start=renderindex;;){if(renderindex===lumps.length)break;var lump=lumps[renderindex];if(lump.nestingdepth<basedepth)break;if(void 0!==lump.rsfID){if(!insideleaf)break;if(!(insideleaf&&lump.nestingdepth>basedepth+(closeparent?0:1)))break;fluid.log("Error in component tree - leaf component found to contain further components - at "+lump.toString())}++renderindex}return closeparent||renderindex!==lumps.length&&lumps[renderindex].rsfID||--renderindex,dumpTillLump(lumps,start,renderindex),renderindex}function isPlaceholder(value){return!1}function isValue(value){return null!==value&&void 0!==value&&!isPlaceholder(value)}function openTag(){trc.iselide||(out+="<"+trc.uselump.tagname)}function closeTag(){trc.iselide||(out+="</"+trc.uselump.tagname+">")}function renderUnchanged(){dumpTillLump(trc.uselump.parent.lumps,trc.uselump.lumpindex+1,trc.close.lumpindex+(trc.iselide?0:1))}function isSelfClose(){return trc.endopen.lumpindex===trc.close.lumpindex&&fluid.XMLP.closedTags[trc.uselump.tagname]}function dumpTemplateBody(){isSelfClose()?trc.iselide||(out+="/>"):(trc.iselide||(out+=">"),dumpTillLump(trc.uselump.parent.lumps,trc.endopen.lumpindex,trc.close.lumpindex+(trc.iselide?0:1)))}function replaceAttributes(){trc.iselide||(out+=fluid.dumpAttributes(trc.attrcopy)),dumpTemplateBody()}function replaceAttributesOpen(){if(trc.iselide)replaceAttributes();else{out+=fluid.dumpAttributes(trc.attrcopy);var selfClose=isSelfClose();out+=selfClose?"/>":">",trc.nextpos=selfClose?trc.close.lumpindex+1:trc.endopen.lumpindex}}function replaceBody(value){out+=fluid.dumpAttributes(trc.attrcopy),trc.iselide||(out+=">"),out+=fluid.XMLEncode(value.toString()),closeTag()}function rewriteLeaf(value){isValue(value)?replaceBody(value):replaceAttributes()}function rewriteLeafOpen(value){trc.iselide?rewriteLeaf(trc.value):isValue(value)?replaceBody(value):replaceAttributesOpen()}function rewriteUrl(template,url){if(renderOptions.urlRewriter){var rewritten=renderOptions.urlRewriter(url);if(rewritten)return rewritten}if(!renderOptions.rebaseURLs)return url;var protpos=url.indexOf(":/");return"/"===url.charAt(0)||-1!==protpos&&7>protpos?url:renderOptions.baseURL+url}function dumpHiddenField(todump){out+='<input type="hidden" ';var isvirtual=todump.virtual,outattrs={};outattrs[isvirtual?"id":"name"]=todump.name,outattrs.value=todump.value,out+=fluid.dumpAttributes(outattrs),out+=" />\n"}function applyAutoBind(torender,finalID){function applyFunc(){fluid.applyBoundChange(fluid.byId(finalID,renderOptions.document),void 0,applier)}if(finalID){var tagname=trc.uselump.tagname,applier=renderOptions.applier;if(renderOptions.autoBind&&/input|select|textarea/.test(tagname)&&!renderedbindings[finalID]){var decorators=[{jQuery:["change",applyFunc]}];$.browser.msie&&"input"===tagname&&/radio|checkbox/.test(trc.attrcopy.type)&&decorators.push({jQuery:["click",applyFunc]}),$.browser.safari&&"input"===tagname&&"radio"===trc.attrcopy.type&&decorators.push({jQuery:["keyup",applyFunc]}),outDecoratorsImpl(torender,decorators,trc.attrcopy,finalID)}}}function dumpBoundFields(torender,parent){if(torender){var holder=parent?parent:torender;if(renderOptions.fossils&&holder.valuebinding){var fossilKey=holder.submittingname||torender.finalID;renderOptions.fossils[fossilKey]={name:fossilKey,EL:holder.valuebinding,oldvalue:holder.value},applyAutoBind(torender,torender.finalID)}torender.fossilizedbinding&&dumpHiddenField(torender.fossilizedbinding),torender.fossilizedshaper&&dumpHiddenField(torender.fossilizedshaper)}}function dumpSelectionBindings(uiselect){renderedbindings[uiselect.selection.fullID]||(renderedbindings[uiselect.selection.fullID]=!0,dumpBoundFields(uiselect.selection),dumpBoundFields(uiselect.optionlist),dumpBoundFields(uiselect.optionnames))}function isSelectedValue(torender,value){var selection=torender.selection;return selection.value&&"string"!=typeof selection.value&&"number"==typeof selection.value.length?-1!==$.inArray(value,selection.value):selection.value===value}function getRelativeComponent(component,relativeID){for(component=component.parent;0===relativeID.indexOf("..::");)relativeID=relativeID.substring(4),component=component.parent;return component.childmap[relativeID]}function adjustForID(attrcopy,component,late,forceID){late||delete attrcopy["rsf:id"],void 0!==component.finalID?attrcopy.id=component.finalID:void 0!==forceID?attrcopy.id=forceID:(attrcopy.id||late)&&(attrcopy.id=component.fullID);for(var count=1,baseid=attrcopy.id;renderOptions.document.getElementById(attrcopy.id)||usedIDs[attrcopy.id];)attrcopy.id=baseid+"-"+count++;return component.finalID=attrcopy.id,attrcopy.id}function assignSubmittingName(attrcopy,component,parent){var submitting=parent||component;return adjustForID(attrcopy,component,!0,component.fullID),void 0===submitting.submittingname&&submitting.willinput!==!1&&(submitting.submittingname=submitting.finalID||submitting.fullID),submitting.submittingname}function explodeDecorators(decorators){var togo=[];if(decorators.type)togo[0]=decorators;else for(var key in decorators){"$"===key&&(key="jQuery");var value=decorators[key],decorator={type:key};"jQuery"===key?(decorator.func=value[0],decorator.args=value.slice(1)):"addClass"===key||"removeClass"===key?decorator.classes=value:"attrs"===key?decorator.attributes=value:"identify"===key&&(decorator.key=value),togo[togo.length]=decorator}return togo}function outDecorators(torender,attrcopy){torender.decorators&&(void 0===torender.decorators.length&&(torender.decorators=explodeDecorators(torender.decorators)),outDecoratorsImpl(torender,torender.decorators,attrcopy))}function dumpBranchHead(branch,targetlump){if(!targetlump.elide){var attrcopy={};$.extend(!0,attrcopy,targetlump.attributemap),adjustForID(attrcopy,branch),outDecorators(branch,attrcopy),out+="<"+targetlump.tagname+" ",out+=fluid.dumpAttributes(attrcopy),out+=">"}}function resolveArgs(args){return args?(args=fluid.copy(args),fluid.transform(args,function(arg,index){return upgradeBound(args,index,renderOptions.model,renderOptions.resolverGetConfig),args[index].value})):args}function degradeMessage(torender){if("UIMessage"===torender.componentType)if(torender.componentType="UIBound",renderOptions.messageLocator){upgradeBound(torender,"messagekey",renderOptions.model,renderOptions.resolverGetConfig);var resArgs=resolveArgs(torender.args);torender.value=renderOptions.messageLocator(torender.messagekey.value,resArgs)}else torender.value="[No messageLocator is configured in options - please consult documentation on options.messageSource]"}function renderComponent(torender){function makeFail(torender,end){fluid.fail("Error in component tree - UISelectChoice with id "+torender.fullID+end)}var attrcopy=trc.attrcopy;degradeMessage(torender);var componentType=torender.componentType,tagname=trc.uselump.tagname;if(outDecorators(torender,attrcopy),"UIBound"===componentType||"UISelectChoice"===componentType){var parent;void 0!==torender.choiceindex&&(void 0!==torender.parentRelativeID?(parent=getRelativeComponent(torender,torender.parentRelativeID),parent||makeFail(torender," has parentRelativeID of "+torender.parentRelativeID+" which cannot be resolved")):makeFail(torender," does not have parentRelativeID set"),assignSubmittingName(attrcopy,torender,parent.selection),dumpSelectionBindings(parent));var submittingname=parent?parent.selection.submittingname:torender.submittingname;if(!parent&&torender.valuebinding&&(submittingname=assignSubmittingName(attrcopy,torender)),("input"===tagname||"textarea"===tagname)&&void 0!==submittingname&&(attrcopy.name=submittingname),dumpBoundFields(torender,parent?parent.selection:null),"boolean"==typeof torender.value||"radio"===attrcopy.type||"checkbox"===attrcopy.type){var underlyingValue,directValue=torender.value;void 0!==torender.choiceindex&&(parent.optionlist.value||fluid.fail("Error in component tree - selection control with full ID "+parent.fullID+" has no values"),underlyingValue=parent.optionlist.value[torender.choiceindex],directValue=isSelectedValue(parent,underlyingValue)),isValue(directValue)&&(directValue?attrcopy.checked="checked":delete attrcopy.checked),attrcopy.value=fluid.XMLEncode(underlyingValue?underlyingValue:"true"),rewriteLeaf(null)}else if(fluid.isArrayable(torender.value))renderUnchanged();else{var value=parent?parent["textarea"===tagname||"input"===tagname?"optionlist":"optionnames"].value[torender.choiceindex]:torender.value;"textarea"===tagname?(isPlaceholder(value)&&torender.willinput&&(value=""),rewriteLeaf(value)):"input"===tagname?((torender.willinput||isValue(value))&&(attrcopy.value=fluid.XMLEncode(String(value))),rewriteLeaf(null)):(delete attrcopy.name,rewriteLeafOpen(value))}}else if("UISelect"===componentType){var ishtmlselect="select"===tagname,ismultiple=!1;fluid.isArrayable(torender.selection.value)&&(ismultiple=!0,ishtmlselect&&(attrcopy.multiple="multiple"));var oldid=attrcopy.id;if(assignSubmittingName(attrcopy,torender.selection),void 0!==oldid&&(attrcopy.id=oldid),ishtmlselect&&(torender.selection.willinput!==!1&&(attrcopy.name=torender.selection.submittingname),applyAutoBind(torender,attrcopy.id)),out+=fluid.dumpAttributes(attrcopy),ishtmlselect){out+=">";var values=torender.optionlist.value,names=null!==torender.optionnames&&void 0!==torender.optionnames&&torender.optionnames.value?torender.optionnames.value:values;names&&names.length||fluid.fail("Error in component tree - UISelect component with fullID "+torender.fullID+" does not have optionnames set");for(var i=0;i<names.length;++i){out+='<option value="';var value=values[i];null===value&&(value=fluid.NULL_STRING),out+=fluid.XMLEncode(value),isSelectedValue(torender,value)&&(out+='" selected="selected'),out+='">',out+=fluid.XMLEncode(names[i]),out+="</option>\n"}closeTag()}else dumpTemplateBody();dumpSelectionBindings(torender)}else if("UILink"===componentType){var attrname=LINK_ATTRIBUTES[tagname];if(attrname){degradeMessage(torender.target);var target=torender.target.value;isValue(target)||(target=attrcopy[attrname]),target=rewriteUrl(trc.uselump.parent,target),attrcopy[attrname]=fluid.XMLEncode(target)}var value;torender.linktext&&(degradeMessage(torender.linktext),value=torender.linktext.value),isValue(value)?rewriteLeaf(value):replaceAttributesOpen()}else if(void 0!==torender.markup){degradeMessage(torender.markup);var rendered=torender.markup.value;null===rendered?(out+=fluid.dumpAttributes(attrcopy),out+=">",renderUnchanged()):(trc.iselide||(out+=fluid.dumpAttributes(attrcopy),out+=">"),out+=rendered,closeTag())}void 0!==attrcopy.id&&(usedIDs[attrcopy.id]=!0)}function rewriteIDRelation(context){var attrname,attrval=trc.attrcopy["for"];if(void 0!==attrval?attrname="for":(attrval=trc.attrcopy.headers,void 0!==attrval&&(attrname="headers")),attrname){var tagname=trc.uselump.tagname;if(!("for"===attrname&&"label"!==tagname||"headers"===attrname&&"td"!==tagname&&"th"!==tagname)){var rewritten=rewritemap[getRewriteKey(trc.uselump.parent,context,attrval)];void 0!==rewritten&&(trc.attrcopy[attrname]=rewritten)}}}function renderComment(message){out+="<!-- "+fluid.XMLEncode(message)+"-->"}function renderDebugMessage(message){out+='<span style="background-color:#FF466B;color:white;padding:1px;">',out+=message,out+="</span><br/>"}function reportPath(branch){var path=branch.fullID;return path?"full path "+path:"component tree root"}function renderComponentSystem(context,torendero,lump){var lumpindex=lump.lumpindex,lumps=lump.parent.lumps,nextpos=-1,outerendopen=lumps[lumpindex+1],outerclose=lump.close_tag;nextpos=outerclose.lumpindex+1;var payloadlist=lump.downmap?lump.downmap["payload-component"]:null,payload=payloadlist?payloadlist[0]:null,iselide=126===lump.rsfID.charCodeAt(0),endopen=outerendopen,close=outerclose,uselump=lump,attrcopy={};if($.extend(!0,attrcopy,(null===payload?lump:payload).attributemap),trc.attrcopy=attrcopy,trc.uselump=uselump,trc.endopen=endopen,trc.close=close,trc.nextpos=nextpos,trc.iselide=iselide,rewriteIDRelation(context),null===torendero&&lump.rsfID.indexOf("scr=")===(iselide?1:0)){var scrname=lump.rsfID.substring(4+(iselide?1:0));"ignore"===scrname?nextpos=trc.close.lumpindex+1:"rewrite-url"===scrname?torendero={componentType:"UILink",target:{}}:(openTag(),replaceAttributesOpen(),nextpos=trc.endopen.lumpindex)}return null!==torendero&&(payload&&(trc.endopen=lumps[payload.lumpindex+1],trc.close=payload.close_tag,trc.uselump=payload,dumpTillLump(lumps,lumpindex,payload.lumpindex),lumpindex=payload.lumpindex),adjustForID(attrcopy,torendero),openTag(),renderComponent(torendero),null!==payload&&trc.nextpos===nextpos&&dumpTillLump(lumps,trc.close.lumpindex+1,outerclose.lumpindex+1),nextpos=trc.nextpos),nextpos}function renderContainer(child,targetlump){var t2=targetlump.parent,firstchild=t2.lumps[targetlump.lumpindex+1];void 0!==child.children?dumpBranchHead(child,targetlump):renderComponentSystem(child.parent,child,targetlump),renderRecurse(child,targetlump,firstchild)}function fetchComponents(basecontainer,id){for(var togo;basecontainer&&!(togo=basecontainer.childmap[id]);)basecontainer=basecontainer.parent;return togo}function findChild(sourcescope,child){var split=fluid.SplitID(child.ID),headlumps=sourcescope.downmap[child.ID];return headlumps||(headlumps=sourcescope.downmap[split.prefix+":"]),headlumps?headlumps[0]:null}function renderCollect(collump){dumpTillLump(collump.parent.lumps,collump.lumpindex,collump.close_tag.lumpindex+1)}function renderCollects(){for(var key in collected)for(var collist=collected[key],i=0;i<collist.length;++i)renderCollect(collist[i])}function processDecoratorQueue(){for(var i=0;i<decoratorQueue.length;++i)for(var decorator=decoratorQueue[i],j=0;j<decorator.ids.length;++j){var id=decorator.ids[j],node=fluid.byId(id,renderOptions.document);if(node||fluid.fail("Error during rendering - component with id "+id+" which has a queued decorator was not found in the output markup"),"jQuery"===decorator.type){var jnode=renderOptions.jQuery(node);jnode[decorator.func].apply(jnode,fluid.makeArray(decorator.args))}else if("fluid"===decorator.type){var args=decorator.args;if(!args){var thisContainer=renderOptions.jQuery(node);decorator.container?decorator.container.push(node):decorator.container=thisContainer,args=[thisContainer,decorator.options]}var that=renderer.invokeFluidDecorator(decorator.func,args,id,i,options);decorator.that=that}else"event"===decorator.type&&(node[decorator.event]=decorator.handler)}}options=options||{},tree=tree||{};var debugMode=options.debugMode;!options.messageLocator&&options.messageSource&&(options.messageLocator=fluid.resolveMessageSource(options.messageSource)),options.document=options.document||document,options.jQuery=options.jQuery||$,options.fossils=options.fossils||fossilsIn||{};var fetchComponent,outDecoratorsImpl,globalmap={},branchmap={},rewritemap={},seenset={},collected={},out="",renderOptions=options,decoratorQueue=[],renderedbindings={},usedIDs={},that={options:options},trc={};outDecoratorsImpl=function(torender,decorators,attrcopy,finalID){renderOptions.idMap=renderOptions.idMap||{};for(var i=0;i<decorators.length;++i){var decorator=decorators[i],type=decorator.type;if(type)if("$"===type&&(type=decorator.type="jQuery"),"jQuery"===type||"event"===type||"fluid"===type){var id=adjustForID(attrcopy,torender,!0,finalID);void 0===decorator.ids&&(decorator.ids=[],decoratorQueue[decoratorQueue.length]=decorator),decorator.ids.push(id)}else if("attrs"===type)fluid.each(decorator.attributes,function(value,key){null===value||void 0===value?delete attrcopy[key]:attrcopy[key]=fluid.XMLEncode(value)});else if("addClass"===type||"removeClass"===type){var fakeNode={nodeType:1,className:attrcopy["class"]||""};renderOptions.jQuery(fakeNode)[type](decorator.classes),attrcopy["class"]=fakeNode.className}else if("identify"===type){var id=adjustForID(attrcopy,torender,!0,finalID);renderOptions.idMap[decorator.key]=id}else"null"!==type&&fluid.log("Unrecognised decorator of type "+type+" found at component of ID "+finalID);else{var explodedDecorators=explodeDecorators(decorator);outDecoratorsImpl(torender,explodedDecorators,attrcopy,finalID)}}};var renderRecurse;return fetchComponent=function(basecontainer,id,lump){if(0===id.indexOf("msg=")){var key=id.substring(4);return{componentType:"UIMessage",messagekey:key}}for(;basecontainer;){var togo=basecontainer.childmap[id];if(togo)return togo;basecontainer=basecontainer.parent}return null},renderRecurse=function(basecontainer,parentlump,baselump){var rendered,renderindex=baselump.lumpindex,basedepth=parentlump.nestingdepth,t1=parentlump.parent;for(debugMode&&(rendered={});;){if(renderindex=dumpScan(t1.lumps,renderindex,basedepth,!parentlump.elide,!1),renderindex===t1.lumps.length)break;var lump=t1.lumps[renderindex],id=lump.rsfID;if(lump.nestingdepth<basedepth||void 0===id)break;if(126===id.charCodeAt(0)&&(id=id.substring(1)),-1!==id.indexOf(":")){var prefix=fluid.getPrefix(id),children=fetchComponents(basecontainer,prefix),finallump=lump.uplump.finallump[prefix],closefinal=finallump.close_tag;if(children)for(var i=0;i<children.length;++i){var child=children[i];if(child.children){debugMode&&(rendered[child.fullID]=!0);var targetlump=branchmap[child.fullID];targetlump?(debugMode&&renderComment("Branching for "+child.fullID+" from "+fluid.debugLump(lump)+" to "+fluid.debugLump(targetlump)),renderContainer(child,targetlump),debugMode&&renderComment("Branch returned for "+child.fullID+fluid.debugLump(lump)+" to "+fluid.debugLump(targetlump))):debugMode&&renderDebugMessage("No matching template branch found for branch container with full ID "+child.fullID+" rendering from parent template branch "+fluid.debugLump(baselump))}else{var targetlump=findChild(parentlump,child);if(!targetlump){debugMode&&renderDebugMessage("Repetitive leaf with full ID "+child.fullID+" could not be rendered from parent template branch "+fluid.debugLump(baselump));continue}var renderend=renderComponentSystem(basecontainer,child,targetlump),wasopentag=renderend<t1.lumps.lengtn&&t1.lumps[renderend].nestingdepth>=targetlump.nestingdepth,newbase=child.children?child:basecontainer;wasopentag&&(renderRecurse(newbase,targetlump,t1.lumps[renderend]),renderend=targetlump.close_tag.lumpindex+1),i!==children.length-1?renderend<closefinal.lumpindex&&dumpScan(t1.lumps,renderend,targetlump.nestingdepth-1,!1,!1):dumpScan(t1.lumps,renderend,targetlump.nestingdepth,!0,!1)}}else debugMode&&renderDebugMessage("No branch container with prefix "+prefix+": found in container "+reportPath(basecontainer)+" rendering at template position "+fluid.debugLump(baselump)+", skipping");renderindex=closefinal.lumpindex+1,debugMode&&renderComment("Stack returned from branch for ID "+id+" to "+fluid.debugLump(baselump)+": skipping from "+fluid.debugLump(lump)+" to "+fluid.debugLump(closefinal))}else{var component;id&&(component=fetchComponent(basecontainer,id,lump),debugMode&&component&&(rendered[component.fullID]=!0)),component&&void 0!==component.children?(renderContainer(component),renderindex=lump.close_tag.lumpindex+1):renderindex=renderComponentSystem(basecontainer,component,lump)}if(renderindex===t1.lumps.length)break}if(debugMode)for(var children=basecontainer.children,key=0;key<children.length;++key){var child=children[key];rendered[child.fullID]||renderDebugMessage("Component "+child.componentType+" with full ID "+child.fullID+" could not be found within template "+fluid.debugLump(baselump))}},that.renderTemplates=function(){tree=fixupTree(tree,options.model,options.resolverGetConfig);var template=templates[0];return resolveBranches(templates.globalmap,tree,template.rootlump),renderedbindings={},renderCollects(),renderRecurse(tree,template.rootlump,template.lumps[template.firstdocumentindex]),out},that.processDecoratorQueue=function(){processDecoratorQueue()},that},jQuery.extend(!0,fluid.renderer,renderer),fluid.ComponentReference=function(reference){this.reference=reference},fluid.explode=function(hash,basepath){var togo=[];for(var key in hash){var binding=void 0===basepath?key:basepath+"."+key;togo[togo.length]={ID:key,value:hash[key],valuebinding:binding}}return togo},fluid.explodeSelectionToInputs=function(optionlist,opts){return fluid.transform(optionlist,function(option,index){return{ID:opts.rowID,children:[{ID:opts.inputID,parentRelativeID:"..::"+opts.selectID,choiceindex:index},{ID:opts.labelID,parentRelativeID:"..::"+opts.selectID,choiceindex:index}]}})},fluid.resolveMessageSource=function(messageSource){if("data"===messageSource.type){if(void 0===messageSource.url)return fluid.messageLocator(messageSource.messages,messageSource.resolveFunc)}else if("resolver"===messageSource.type)return messageSource.resolver.resolve},fluid.renderTemplates=function(templates,tree,options,fossilsIn){var renderer=fluid.renderer(templates,tree,options,fossilsIn),rendered=renderer.renderTemplates();return rendered},fluid.reRender=function(templates,node,tree,options){options=options||{};var renderer=fluid.renderer(templates,tree,options,options.fossils);options=renderer.options,node=fluid.unwrap(node);var lastId,lastFocusedElement=fluid.getLastFocusedElement?fluid.getLastFocusedElement():null;lastFocusedElement&&fluid.dom.isContainer(node,lastFocusedElement)&&(lastId=lastFocusedElement.id),$.browser.msie?options.jQuery(node).empty():node.innerHTML="";var rendered=renderer.renderTemplates();if(options.renderRaw&&(rendered=fluid.XMLEncode(rendered),rendered=rendered.replace(/\n/g,"<br/>")),options.model&&fluid.bindFossils(node,options.model,options.fossils),$.browser.msie?options.jQuery(node).html(rendered):node.innerHTML=rendered,renderer.processDecoratorQueue(),lastId){var element=fluid.byId(lastId,options.document);element&&options.jQuery(element).focus()}return templates},fluid.extractTemplate=function(node,armouring){return armouring?findNodeValue(node):node.innerHTML},fluid.render=function(source,target,tree,options){options=options||{};var template=source;"object"==typeof source&&(template=fluid.extractTemplate(fluid.unwrap(source.node),source.armouring)),target=fluid.unwrap(target);var resourceSpec={base:{resourceText:template,href:".",resourceKey:".",cutpoints:options.cutpoints}},templates=fluid.parseTemplates(resourceSpec,["base"],options);return fluid.reRender(templates,target,tree,options)},fluid.selfRender=function(node,tree,options){return options=options||{},fluid.render({node:node,armouring:options.armouring},node,tree,options)}}(jQuery,fluid_1_5),fluid_1_5=fluid_1_5||{},function($,fluid){fluid.renderer||fluid.fail("fluidRenderer.js is a necessary dependency of RendererUtilities"),fluid.iota=function(count,first){first=first||0;for(var togo=[],i=0;count>i;++i)togo[togo.length]=first++;return togo},fluid.renderer.visitDecorators=function(that,visitor,instantiator){fluid.visitComponentChildren(that,function(component,name){0===name.indexOf(fluid.renderer.decoratorComponentPrefix)&&visitor(component,name)},{flat:!0,instantiator:instantiator})},fluid.renderer.clearDecorators=function(instantiator,that){fluid.renderer.visitDecorators(that,function(component,name){instantiator.clearComponent(that,name)},instantiator)},fluid.renderer.getDecoratorComponents=function(that,instantiator){var togo={};return fluid.renderer.visitDecorators(that,function(component,name){togo[name]=component},instantiator),togo},fluid.renderer.modeliseOptions=function(options,defaults,baseOptions){return $.extend({},defaults,options,fluid.filterKeys(baseOptions,["model","applier"]))},fluid.renderer.reverseMerge=function(target,source,names){names=fluid.makeArray(names),fluid.each(names,function(name){void 0===target[name]&&void 0!==source[name]&&(target[name]=source[name])})},fluid.renderer.createRendererSubcomponent=function(container,selectors,options,baseObject,fossils){options=options||{};var source=options.templateSource?options.templateSource:{node:$(container)},rendererOptions=fluid.renderer.modeliseOptions(options.rendererOptions,null,baseObject);if(rendererOptions.fossils=fossils||{},container.jquery){var cascadeOptions={document:container[0].ownerDocument,jQuery:container.constructor};fluid.renderer.reverseMerge(rendererOptions,cascadeOptions,fluid.keys(cascadeOptions))}var expanderOptions=fluid.renderer.modeliseOptions(options.expanderOptions,{ELstyle:"${}"},baseObject);fluid.renderer.reverseMerge(expanderOptions,options,["resolverGetConfig","resolverSetConfig"]);var that={};options.noexpand||(that.expander=fluid.renderer.makeProtoExpander(expanderOptions));var templates=null;return that.render=function(tree){var cutpointFn=options.cutpointGenerator||"fluid.renderer.selectorsToCutpoints";rendererOptions.cutpoints=rendererOptions.cutpoints||fluid.invokeGlobalFunction(cutpointFn,[selectors,options]),container="function"==typeof container?container():$(container),templates?(fluid.clear(rendererOptions.fossils),fluid.reRender(templates,container,tree,rendererOptions)):("function"==typeof source&&(source=source()),templates=fluid.render(source,container,tree,rendererOptions))},that},fluid.defaults("fluid.rendererComponent",{gradeNames:["fluid.viewComponent"],initFunction:"fluid.initRendererComponent",mergePolicy:{protoTree:"noexpand, replace",parentBundle:"nomerge"},rendererOptions:{autoBind:!0},events:{prepareModelForRender:null,onRenderTree:null,afterRender:null,produceTree:"unicast"}}),fluid.initRendererComponent=function(componentName,container,options){var that=fluid.initView(componentName,container,options,{gradeNames:["fluid.rendererComponent"]});fluid.fetchResources(that.options.resources);var rendererOptions=fluid.renderer.modeliseOptions(that.options.rendererOptions,null,that);
that.options.noUpgradeDecorators||fluid.withInstantiator(that,function(currentInst){rendererOptions.instantiator=currentInst,rendererOptions.parentComponent=that});var messageResolver;!rendererOptions.messageSource&&that.options.strings&&(messageResolver=fluid.messageResolver({messageBase:that.options.strings,resolveFunc:that.options.messageResolverFunction,parents:fluid.makeArray(that.options.parentBundle)}),rendererOptions.messageSource={type:"resolver",resolver:messageResolver}),fluid.renderer.reverseMerge(rendererOptions,that.options,["resolverGetConfig","resolverSetConfig"]);var rendererFnOptions=$.extend({},that.options.rendererFnOptions,{rendererOptions:rendererOptions,repeatingSelectors:that.options.repeatingSelectors,selectorsToIgnore:that.options.selectorsToIgnore,expanderOptions:{envAdd:{styles:that.options.styles}}});that.options.resources&&that.options.resources.template&&(rendererFnOptions.templateSource=function(){return that.options.resources.template.resourceText});var produceTree=that.events.produceTree;produceTree.addListener(function(){return that.options.protoTree}),that.options.produceTree&&produceTree.addListener(that.options.produceTree),fluid.renderer.reverseMerge(rendererFnOptions,that.options,["resolverGetConfig","resolverSetConfig"]),rendererFnOptions.rendererTargetSelector&&(container=function(){return that.dom.locate(rendererFnOptions.rendererTargetSelector)});var renderer={fossils:{},boundPathForNode:function(node){return fluid.boundPathForNode(node,renderer.fossils)}},rendererSub=fluid.renderer.createRendererSubcomponent(container,that.options.selectors,rendererFnOptions,that,renderer.fossils);return that.renderer=$.extend(renderer,rendererSub),messageResolver&&(that.messageResolver=messageResolver),that.refreshView=renderer.refreshView=function(){rendererOptions.instantiator&&rendererOptions.parentComponent&&fluid.renderer.clearDecorators(rendererOptions.instantiator,rendererOptions.parentComponent),that.events.prepareModelForRender.fire(that.model,that.applier,that);var tree=produceTree.fire(that);that.renderer.expander&&(tree=that.renderer.expander(tree)),that.events.onRenderTree.fire(that,tree),that.renderer.render(tree),that.events.afterRender.fire(that)},that.options.renderOnInit&&that.refreshView(),that};var removeSelectors=function(selectors,selectorsToIgnore){return fluid.each(fluid.makeArray(selectorsToIgnore),function(selectorToIgnore){delete selectors[selectorToIgnore]}),selectors},markRepeated=function(selectorKey,repeatingSelectors){return repeatingSelectors&&fluid.each(repeatingSelectors,function(repeatingSelector){selectorKey===repeatingSelector&&(selectorKey+=":")}),selectorKey};fluid.renderer.selectorsToCutpoints=function(selectors,options){var togo=[];options=options||{},selectors=fluid.copy(selectors),options.selectorsToIgnore&&(selectors=removeSelectors(selectors,options.selectorsToIgnore));for(var selectorKey in selectors)togo.push({id:markRepeated(selectorKey,options.repeatingSelectors),selector:selectors[selectorKey]});return togo},fluid.renderer.NO_COMPONENT={},fluid.renderer.mergeComponents=function(target,source){for(var key in source)target[key]=source[key];return target},fluid.registerNamespace("fluid.renderer.selection"),fluid.renderer.selection.inputs=function(options,container,key,config){fluid.expect("Selection to inputs expander",["selectID","inputID","labelID","rowID"],options);var selection=config.expander(options.tree),rows=fluid.transform(selection.optionlist.value,function(option,index){var togo={},element={parentRelativeID:"..::"+options.selectID,choiceindex:index};return togo[options.inputID]=element,togo[options.labelID]=fluid.copy(element),togo}),togo={};return togo[options.selectID]=selection,togo[options.rowID]={children:rows},togo=config.expander(togo)},fluid.renderer.repeat=function(options,container,key,config){fluid.expect("Repetition expander",["controlledBy","tree"],options);var env=config.threadLocal(),path=fluid.extractContextualPath(options.controlledBy,{ELstyle:"ALL"},env),list=fluid.get(config.model,path,config.resolverGetConfig),togo={};if(!list||0===list.length)return options.ifEmpty?config.expander(options.ifEmpty):togo;var expanded=[];fluid.each(list,function(element,i){var EL=fluid.model.composePath(path,i),envAdd={};options.pathAs&&(envAdd[options.pathAs]="${"+EL+"}"),options.valueAs&&(envAdd[options.valueAs]=fluid.get(config.model,EL,config.resolverGetConfig));var expandrow=fluid.withEnvironment(envAdd,function(){return config.expander(options.tree)},env);fluid.isArrayable(expandrow)?expandrow.length>0&&expanded.push({children:expandrow}):expandrow!==fluid.renderer.NO_COMPONENT&&expanded.push(expandrow)});var repeatID=options.repeatID;return-1===repeatID.indexOf(":")&&(repeatID+=":"),fluid.each(expanded,function(entry){entry.ID=repeatID}),expanded},fluid.renderer.condition=function(options,container,key,config){fluid.expect("Selection to condition expander",["condition"],options);var condition;if(options.condition.funcName){var args=config.expandLight(options.condition.args);condition=fluid.invoke(options.condition.funcName,args)}else condition=options.condition.expander?config.expander(options.condition):config.expandLight(options.condition);var tree=condition?options.trueTree:options.falseTree;return tree||(tree=fluid.renderer.NO_COMPONENT),config.expander(tree)},fluid.extractContextualPath=function(string,options,env){var parsed=fluid.extractELWithContext(string,options);return parsed?parsed.context?fluid.transformContextPath(parsed,env).path:parsed.path:void 0},fluid.transformContextPath=function(parsed,env){if(parsed.context){var EL,fetched=env[parsed.context];if("string"==typeof fetched&&(EL=fluid.extractEL(fetched,{ELstyle:"${}"})),EL)return{noDereference:""===parsed.path,path:fluid.model.composePath(EL,parsed.path)}}return parsed},fluid.renderer.makeProtoExpander=function(expandOptions){function fetchEL(string){var env=threadLocal();return fluid.extractContextualPath(string,options,env)}function detectBareBound(entry){return fluid.find(entry,function(value,key){return"decorators"===key})!==!1}var threadLocal,options=$.extend({ELstyle:"${}"},expandOptions),IDescape=options.IDescape||"\\",expandLight=function(source){return fluid.resolveEnvironment(source,options)},expandBound=function(value,concrete){if(void 0!==value.messagekey)return{componentType:"UIMessage",messagekey:expandBound(value.messagekey),args:expandLight(value.args)};var proto;fluid.isPrimitive(value)||fluid.isArrayable(value)?proto={}:(proto=$.extend({},value),proto.decorators&&(proto.decorators=expandLight(proto.decorators)),value=proto.value,delete proto.value);var EL="string"==typeof value?fetchEL(value):null;return EL?proto.valuebinding=EL:void 0!==value&&(proto.value=value),options.model&&proto.valuebinding&&void 0===proto.value&&(proto.value=fluid.get(options.model,proto.valuebinding,options.resolverGetConfig)),concrete&&(proto.componentType="UIBound"),proto};options.filter=fluid.expander.lightFilter;var expandCond,expandLeafOrCond,expandEntry=function(entry){var comp=[];return expandCond(entry,comp),{children:comp}},expandExternal=function(entry){if(entry===fluid.renderer.NO_COMPONENT)return entry;var singleTarget,target=[],pusher=function(comp){singleTarget=comp};return expandLeafOrCond(entry,target,pusher),singleTarget||target},expandConfig={model:options.model,resolverGetConfig:options.resolverGetConfig,resolverSetConfig:options.resolverSetConfig,expander:expandExternal,expandLight:expandLight},expandLeaf=function(leaf,componentType){var togo={componentType:componentType},map=fluid.renderer.boundMap[componentType]||{};for(var key in leaf)/decorators|args/.test(key)?togo[key]=expandLight(leaf[key]):map[key]?togo[key]=expandBound(leaf[key]):togo[key]=leaf[key];return togo},expandChildren=function(entry,pusher){for(var children=entry.children,i=0;i<children.length;++i){var target=[],comp={children:target},child=children[i],childPusher=function(comp){target[target.length]=comp};expandLeafOrCond(child,target,childPusher),1!==comp.children.length||comp.children[0].ID||(comp=comp.children[0]),pusher(comp)}},expandLeafOrCond=function(entry,target,pusher){var componentType=fluid.renderer.inferComponentType(entry);componentType||!fluid.isPrimitive(entry)&&!detectBareBound(entry)||(componentType="UIBound"),componentType?pusher("UIBound"===componentType?expandBound(entry,!0):expandLeaf(entry,componentType)):(target||fluid.fail("Illegal cond->cond transition"),expandCond(entry,target))};return expandCond=function(proto,target){for(var key in proto){var entry=proto[key];if(key.charAt(0)===IDescape&&(key=key.substring(1)),"expander"===key){var expanders=fluid.makeArray(entry);fluid.each(expanders,function(expander){var expanded=fluid.invokeGlobalFunction(expander.type,[expander,proto,key,expandConfig]);expanded!==fluid.renderer.NO_COMPONENT&&fluid.each(expanded,function(el){target[target.length]=el})})}else if(entry){var condPusher=function(comp){comp.ID=key,target[target.length]=comp};entry.children?(-1===key.indexOf(":")&&(key+=":"),expandChildren(entry,condPusher)):fluid.renderer.isBoundPrimitive(entry)?condPusher(expandBound(entry,!0)):expandLeafOrCond(entry,null,condPusher)}}},function(entry){return threadLocal=fluid.threadLocal(function(){return $.extend({},options.envAdd)}),options.fetcher=fluid.makeEnvironmentFetcher(options.model,fluid.transformContextPath,threadLocal),expandConfig.threadLocal=threadLocal,expandEntry(entry)}}}(jQuery,fluid_1_5),function($,undefined){$.widget("ui.draggable",$.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(event){var o=this.options;return this.helper||o.disabled||$(event.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(event),this.handle?(o.iframeFix&&$(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),o.containment&&this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_mouseDrag:function(event,noPropagation){if(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var dropped=!1;if($.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!dropped||"valid"==this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)){var self=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){self._trigger("stop",event)!==!1&&self._clear()})}else this._trigger("stop",event)!==!1&&this._clear();return!1},_mouseUp:function(event){return this.options.iframeFix===!0&&$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){var handle=this.options.handle&&$(this.options.handle,this.element).length?!1:!0;return $(this.options.handle,this.element).find("*").andSelf().each(function(){this==event.target&&(handle=!0)}),handle},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):"clone"==o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"==o.appendTo?this.element[0].parentNode:o.appendTo),helper[0]==this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&$.browser.msie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o=this.options;if("parent"==o.containment&&(o.containment=this.helper[0].parentNode),("document"==o.containment||"window"==o.containment)&&(this.containment=["document"==o.containment?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==o.containment?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==o.containment?0:$(window).scrollLeft())+$("document"==o.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==o.containment?0:$(window).scrollTop())+($("document"==o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||o.containment.constructor==Array)o.containment.constructor==Array&&(this.containment=o.containment);else{var c=$(o.containment),ce=c[0];if(!ce)return;var over=(c.offset(),"hidden"!=$(ce).css("overflow"));this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"==d?1:-1,scroll=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-($.browser.safari&&$.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod),left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-($.browser.safari&&$.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod)}},_generatePosition:function(event){var o=this.options,scroll="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName),pageX=event.pageX,pageY=event.pageY;if(this.originalPosition){var containment;if(this.containment){if(this.relative_container){var co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]}else containment=this.containment;event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)}if(o.grid){var top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment&&(top-this.offset.click.top<containment[1]||top-this.offset.click.top>containment[3])?top-this.offset.click.top<containment[1]?top+o.grid[1]:top-o.grid[1]:top;var left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment&&(left-this.offset.click.left<containment[0]||left-this.offset.click.left>containment[2])?left-this.offset.click.left<containment[0]?left+o.grid[0]:left-o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&$.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+($.browser.safari&&$.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui]),"drag"==type&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.extend($.ui.draggable,{version:"@VERSION"}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[],$(o.connectToSortable).each(function(){var sortable=$.data(this,"sortable");sortable&&!sortable.options.disabled&&(inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert}),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui){var inst=$(this).data("draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){this.instance.isOver?(this.instance.isOver=0,inst.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(event),this.instance.options.helper=this.instance.options._helper,"original"==inst.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",event,uiSortable))})},drag:function(event,ui){var inst=$(this).data("draggable"),self=this;$.each(inst.sortables,function(i){this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(self).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return ui.helper[0]},event.target=this.instance.currentItem[0],this.instance._mouseCapture(event,!0),this.instance._mouseStart(event,!0,!0),this.instance.offset.click.top=inst.offset.click.top,this.instance.offset.click.left=inst.offset.click.left,this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top,inst._trigger("toSortable",event),inst.dropped=this.instance.element,inst.currentItem=inst.element,this.instance.fromOutside=inst),this.instance.currentItem&&this.instance._mouseDrag(event)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",event,this.instance._uiHash(this.instance)),this.instance._mouseStop(event,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),inst._trigger("fromSortable",event),inst.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(event,ui){var t=$("body"),o=$(this).data("draggable").options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(event,ui){var o=$(this).data("draggable").options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("draggable").options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(event,ui){var i=$(this).data("draggable");i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(event,ui){var i=$(this).data("draggable"),o=i.options,scrolled=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(o.axis&&"x"==o.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"==o.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"==o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"==o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(event,ui){var i=$(this).data("draggable"),o=i.options;i.snapElements=[],$(o.snap.constructor!=String?o.snap.items||":data(draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){for(var inst=$(this).data("draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height,i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(x1>l-d&&r+d>x1&&y1>t-d&&b+d>y1||x1>l-d&&r+d>x1&&y2>t-d&&b+d>y2||x2>l-d&&r+d>x2&&y1>t-d&&b+d>y1||x2>l-d&&r+d>x2&&y2>t-d&&b+d>y2){if("inner"!=o.snapMode){var ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d;ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left)}var first=ts||bs||ls||rs;if("outer"!=o.snapMode){var ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d;ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left)}!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first}else inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1}}}),$.ui.plugin.add("draggable","stack",{start:function(event,ui){var o=$(this).data("draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(group.length){var min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i}),this[0].style.zIndex=min+group.length}}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("draggable").options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}})}(jQuery),function($,undefined){var uiDialogClasses="ui-dialog ui-widget ui-widget-content ui-corner-all ",sizeRelatedOptions={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},attrFn=$.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};$.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;0>topOffset&&$(this).css("top",pos.top-topOffset)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var self=this,options=self.options,title=options.title||"&#160;",titleId=$.ui.dialog.getTitleId(self.element),uiDialog=(self.uiDialog=$("<div></div>")).appendTo(document.body).hide().addClass(uiDialogClasses+options.dialogClass).css({zIndex:options.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(event){options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE&&(self.close(event),event.preventDefault())}).attr({role:"dialog","aria-labelledby":titleId}).mousedown(function(event){self.moveToTop(!1,event)}),uiDialogTitlebar=(self.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(uiDialog),(self.uiDialogTitlebar=$("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(uiDialog)),uiDialogTitlebarClose=$('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){uiDialogTitlebarClose.addClass("ui-state-hover")},function(){uiDialogTitlebarClose.removeClass("ui-state-hover")}).focus(function(){uiDialogTitlebarClose.addClass("ui-state-focus")}).blur(function(){uiDialogTitlebarClose.removeClass("ui-state-focus")}).click(function(event){return self.close(event),!1}).appendTo(uiDialogTitlebar);(self.uiDialogTitlebarCloseText=$("<span></span>")).addClass("ui-icon ui-icon-closethick").text(options.closeText).appendTo(uiDialogTitlebarClose),$("<span></span>").addClass("ui-dialog-title").attr("id",titleId).html(title).prependTo(uiDialogTitlebar);$.isFunction(options.beforeclose)&&!$.isFunction(options.beforeClose)&&(options.beforeClose=options.beforeclose),uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection(),options.draggable&&$.fn.draggable&&self._makeDraggable(),
options.resizable&&$.fn.resizable&&self._makeResizable(),self._createButtons(options.buttons),self._isOpen=!1,$.fn.bgiframe&&uiDialog.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var self=this;return self.overlay&&self.overlay.destroy(),self.uiDialog.hide(),self.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),self.uiDialog.remove(),self.originalTitle&&self.element.attr("title",self.originalTitle),self},widget:function(){return this.uiDialog},close:function(event){var maxZ,thisZ,self=this;if(!1!==self._trigger("beforeClose",event))return self.overlay&&self.overlay.destroy(),self.uiDialog.unbind("keypress.ui-dialog"),self._isOpen=!1,self.options.hide?self.uiDialog.hide(self.options.hide,function(){self._trigger("close",event)}):(self.uiDialog.hide(),self._trigger("close",event)),$.ui.dialog.overlay.resize(),self.options.modal&&(maxZ=0,$(".ui-dialog").each(function(){this!==self.uiDialog[0]&&(thisZ=$(this).css("z-index"),isNaN(thisZ)||(maxZ=Math.max(maxZ,thisZ)))}),$.ui.dialog.maxZ=maxZ),self},isOpen:function(){return this._isOpen},moveToTop:function(force,event){var saveScroll,self=this,options=self.options;return options.modal&&!force||!options.stack&&!options.modal?self._trigger("focus",event):(options.zIndex>$.ui.dialog.maxZ&&($.ui.dialog.maxZ=options.zIndex),self.overlay&&($.ui.dialog.maxZ+=1,self.overlay.$el.css("z-index",$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ)),saveScroll={scrollTop:self.element.scrollTop(),scrollLeft:self.element.scrollLeft()},$.ui.dialog.maxZ+=1,self.uiDialog.css("z-index",$.ui.dialog.maxZ),self.element.attr(saveScroll),self._trigger("focus",event),self)},open:function(){if(!this._isOpen){var self=this,options=self.options,uiDialog=self.uiDialog;return self.overlay=options.modal?new $.ui.dialog.overlay(self):null,self._size(),self._position(options.position),uiDialog.show(options.show),self.moveToTop(!0),options.modal&&uiDialog.bind("keydown.ui-dialog",function(event){if(event.keyCode===$.ui.keyCode.TAB){var tabbables=$(":tabbable",this),first=tabbables.filter(":first"),last=tabbables.filter(":last");return event.target!==last[0]||event.shiftKey?event.target===first[0]&&event.shiftKey?(last.focus(1),!1):void 0:(first.focus(1),!1)}}),$(self.element.find(":tabbable").get().concat(uiDialog.find(".ui-dialog-buttonpane :tabbable").get().concat(uiDialog.get()))).eq(0).focus(),self._isOpen=!0,self._trigger("open"),self}},_createButtons:function(buttons){var self=this,hasButtons=!1,uiDialogButtonPane=$("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),uiButtonSet=$("<div></div>").addClass("ui-dialog-buttonset").appendTo(uiDialogButtonPane);self.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof buttons&&null!==buttons&&$.each(buttons,function(){return!(hasButtons=!0)}),hasButtons&&($.each(buttons,function(name,props){props=$.isFunction(props)?{click:props,text:name}:props;var button=$('<button type="button"></button>').click(function(){props.click.apply(self.element[0],arguments)}).appendTo(uiButtonSet);$.each(props,function(key,value){"click"!==key&&(key in attrFn?button[key](value):button.attr(key,value))}),$.fn.button&&button.button()}),uiDialogButtonPane.appendTo(self.uiDialog))},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var heightBeforeDrag,self=this,options=self.options,doc=$(document);self.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){heightBeforeDrag="auto"===options.height?"auto":$(this).height(),$(this).height($(this).height()).addClass("ui-dialog-dragging"),self._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){self._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-doc.scrollLeft(),ui.position.top-doc.scrollTop()],$(this).removeClass("ui-dialog-dragging").height(heightBeforeDrag),self._trigger("dragStop",event,filteredUi(ui)),$.ui.dialog.overlay.resize()}})},_makeResizable:function(handles){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}handles=handles===undefined?this.options.resizable:handles;var self=this,options=self.options,position=self.uiDialog.css("position"),resizeHandles="string"==typeof handles?handles:"n,e,s,w,se,sw,ne,nw";self.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:self.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:self._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),self._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){self._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing"),options.height=$(this).height(),options.width=$(this).width(),self._trigger("resizeStop",event,filteredUi(ui)),$.ui.dialog.overlay.resize()}}).css("position",position).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var options=this.options;return"auto"===options.height?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(position){var isVisible,myAt=[],offset=[0,0];position?(("string"==typeof position||"object"==typeof position&&"0"in position)&&(myAt=position.split?position.split(" "):[position[0],position[1]],1===myAt.length&&(myAt[1]=myAt[0]),$.each(["left","top"],function(i,offsetPosition){+myAt[i]===myAt[i]&&(offset[i]=myAt[i],myAt[i]=offsetPosition)}),position={my:myAt.join(" "),at:myAt.join(" "),offset:offset.join(" ")}),position=$.extend({},$.ui.dialog.prototype.options.position,position)):position=$.ui.dialog.prototype.options.position,isVisible=this.uiDialog.is(":visible"),isVisible||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position($.extend({of:window},position)),isVisible||this.uiDialog.hide()},_setOptions:function(options){var self=this,resizableOptions={},resize=!1;$.each(options,function(key,value){self._setOption(key,value),key in sizeRelatedOptions&&(resize=!0),key in resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var self=this,uiDialog=self.uiDialog;switch(key){case"beforeclose":key="beforeClose";break;case"buttons":self._createButtons(value);break;case"closeText":self.uiDialogTitlebarCloseText.text(""+value);break;case"dialogClass":uiDialog.removeClass(self.options.dialogClass).addClass(uiDialogClasses+value);break;case"disabled":value?uiDialog.addClass("ui-dialog-disabled"):uiDialog.removeClass("ui-dialog-disabled");break;case"draggable":var isDraggable=uiDialog.is(":data(draggable)");isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&self._makeDraggable();break;case"position":self._position(value);break;case"resizable":var isResizable=uiDialog.is(":data(resizable)");isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&"string"==typeof value&&uiDialog.resizable("option","handles",value),isResizable||value===!1||self._makeResizable(value);break;case"title":$(".ui-dialog-title",self.uiDialogTitlebar).html(""+(value||"&#160;"))}$.Widget.prototype._setOption.apply(self,arguments)},_size:function(){var nonContentHeight,minContentHeight,options=this.options,isVisible=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).height(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),"auto"===options.height)if($.support.minHeight)this.element.css({minHeight:minContentHeight,height:"auto"});else{this.uiDialog.show();var autoHeight=this.element.css("height","auto").height();isVisible||this.uiDialog.hide(),this.element.height(Math.max(autoHeight,minContentHeight))}else this.element.height(Math.max(options.height-nonContentHeight,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),$.extend($.ui.dialog,{version:"@VERSION",uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr("id");return id||(this.uuid+=1,id=this.uuid),"ui-dialog-title-"+id},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog)}}),$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(event){return event+".dialog-overlay"}).join(" "),create:function(dialog){0===this.instances.length&&(setTimeout(function(){$.ui.dialog.overlay.instances.length&&$(document).bind($.ui.dialog.overlay.events,function(event){return $(event.target).zIndex()<$.ui.dialog.overlay.maxZ?!1:void 0})},1),$(document).bind("keydown.dialog-overlay",function(event){dialog.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE&&(dialog.close(event),event.preventDefault())}),$(window).bind("resize.dialog-overlay",$.ui.dialog.overlay.resize));var $el=(this.oldInstances.pop()||$("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return $.fn.bgiframe&&$el.bgiframe(),this.instances.push($el),$el},destroy:function($el){var indexOf=$.inArray($el,this.instances);-1!=indexOf&&this.oldInstances.push(this.instances.splice(indexOf,1)[0]),0===this.instances.length&&$([document,window]).unbind(".dialog-overlay"),$el.remove();var maxZ=0;$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css("z-index"))}),this.maxZ=maxZ},height:function(){var scrollHeight,offsetHeight;return $.browser.msie&&$.browser.version<7?(scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),offsetHeight>scrollHeight?$(window).height()+"px":scrollHeight+"px"):$(document).height()+"px"},width:function(){var scrollWidth,offsetWidth;return $.browser.msie?(scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),offsetWidth>scrollWidth?$(window).width()+"px":scrollWidth+"px"):$(document).width()+"px"},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this)}),$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()})}}),$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var self=this,o=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handleCount=o.values&&o.values.length||1,handles=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(o.disabled?" ui-slider-disabled ui-disabled":"")),this.range=$([]),o.range&&(o.range===!0&&(o.values||(o.values=[this._valueMin(),this._valueMin()]),o.values.length&&2!==o.values.length&&(o.values=[o.values[0],o.values[0]])),this.range=$("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===o.range||"max"===o.range?" ui-slider-range-"+o.range:"")));for(var i=existingHandles.length;handleCount>i;i+=1)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(self.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(event){event.preventDefault()}).hover(function(){o.disabled||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).focus(function(){o.disabled?$(this).blur():($(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),$(this).addClass("ui-state-focus"))}).blur(function(){$(this).removeClass("ui-state-focus")}),this.handles.each(function(i){$(this).data("index.ui-slider-handle",i)}),this.handles.keydown(function(event){var allowed,curVal,newVal,step,index=$(this).data("index.ui-slider-handle");if(!self.options.disabled){switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(event.preventDefault(),!self._keySliding&&(self._keySliding=!0,$(this).addClass("ui-state-active"),allowed=self._start(event,index),allowed===!1))return}switch(step=self.options.step,curVal=newVal=self.options.values&&self.options.values.length?self.values(index):self.value(),event.keyCode){case $.ui.keyCode.HOME:newVal=self._valueMin();break;case $.ui.keyCode.END:newVal=self._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=self._trimAlignValue(curVal+(self._valueMax()-self._valueMin())/numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=self._trimAlignValue(curVal-(self._valueMax()-self._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===self._valueMax())return;newVal=self._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===self._valueMin())return;newVal=self._trimAlignValue(curVal-step)}self._slide(event,index,newVal)}}).keyup(function(event){var index=$(this).data("index.ui-slider-handle");self._keySliding&&(self._keySliding=!1,self._stop(event,index),self._change(event,index),$(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(event){var position,normValue,distance,closestHandle,self,index,allowed,offset,mouseOverHandle,o=this.options;return o.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position),distance=this._valueMax()-this._valueMin()+1,self=this,this.handles.each(function(i){var thisDistance=Math.abs(normValue-self.values(i));distance>thisDistance&&(distance=thisDistance,closestHandle=$(this),index=i)}),o.range===!0&&this.values(1)===o.min&&(index+=1,closestHandle=$(this.handles[index])),allowed=this._start(event,index),allowed===!1?!1:(this._mouseSliding=!0,self._handleIndex=index,closestHandle.addClass("ui-state-active").focus(),offset=closestHandle.offset(),mouseOverHandle=!$(event.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(event,index,normValue),this._animateOff=!0,!0))},_mouseStart:function(event){return!0},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);return this._slide(event,this._handleIndex,normValue),!1},_mouseStop:function(event){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(event,this._handleIndex),this._change(event,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;return"horizontal"===this.orientation?(pixelTotal=this.elementSize.width,pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(pixelTotal=this.elementSize.height,pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),percentMouse=pixelMouse/pixelTotal,percentMouse>1&&(percentMouse=1),0>percentMouse&&(percentMouse=0),"vertical"===this.orientation&&(percentMouse=1-percentMouse),valueTotal=this._valueMax()-this._valueMin(),valueMouse=this._valueMin()+percentMouse*valueTotal,this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};return this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;this.options.values&&this.options.values.length?(otherVal=this.values(index?0:1),2===this.options.values.length&&this.options.range===!0&&(0===index&&newVal>otherVal||1===index&&otherVal>newVal)&&(newVal=otherVal),newVal!==this.values(index)&&(newValues=this.values(),newValues[index]=newVal,allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues}),otherVal=this.values(index?0:1),allowed!==!1&&this.values(index,newVal,!0))):newVal!==this.value()&&(allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal}),allowed!==!1&&this.value(newVal))},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("change",event,uiHash)}},value:function(newValue){return arguments.length?(this.options.value=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,0)):this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1)return this.options.values[index]=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,index);if(!arguments.length)return this._values();if(!$.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(index):this.value();for(vals=this.options.values,newValues=arguments[0],i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(newValues[i]),this._change(null,i);this._refreshValue()},_setOption:function(key,value){var i,valsLength=0;switch($.isArray(this.options.values)&&(valsLength=this.options.values.length),$.Widget.prototype._setOption.apply(this,arguments),key){case"disabled":value?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;valsLength>i;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var val=this.options.value;return val=this._trimAlignValue(val)},_values:function(index){var val,vals,i;if(arguments.length)return val=this.options.values[index],val=this._trimAlignValue(val);for(vals=this.options.values.slice(),i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;return 2*Math.abs(valModStep)>=step&&(alignValue+=valModStep>0?step:-step),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var valPercent,lastValPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,self=this,animate=this._animateOff?!1:o.animate,_set={};this.options.values&&this.options.values.length?this.handles.each(function(i,j){valPercent=(self.values(i)-self._valueMin())/(self._valueMax()-self._valueMin())*100,_set["horizontal"===self.orientation?"left":"bottom"]=valPercent+"%",$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate),self.options.range===!0&&("horizontal"===self.orientation?(0===i&&self.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate),1===i&&self.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})):(0===i&&self.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate),1===i&&self.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate}))),lastValPercent=valPercent}):(value=this.value(),valueMin=this._valueMin(),valueMax=this._valueMax(),valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0,_set["horizontal"===self.orientation?"left":"bottom"]=valPercent+"%",this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate),"min"===oRange&&"horizontal"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate),"max"===oRange&&"horizontal"===this.orientation&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:!1,duration:o.animate}),"min"===oRange&&"vertical"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate),"max"===oRange&&"vertical"===this.orientation&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:!1,duration:o.animate}))}}),$.extend($.ui.slider,{version:"@VERSION"})}(jQuery),function($,undefined){function getNextTabId(){return++tabId}function getNextListId(){return++listId}var tabId=0,listId=0;$.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(key,value){if("selected"==key){if(this.options.collapsible&&value==this.options.selected)return;this.select(value)}else this.options[key]=value,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+getNextTabId()},_sanitizeSelector:function(hash){return hash.replace(/:/g,"\\:")},_cookie:function(){var cookie=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+getNextListId());return $.cookie.apply(null,[cookie].concat($.makeArray(arguments)))},_ui:function(tab,panel){return{tab:tab,panel:panel,index:this.anchors.index(tab)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var el=$(this);el.html(el.data("label.tabs")).removeData("label.tabs")})},_tabify:function(init){function resetStyle($el,fx){$el.css("display",""),!$.support.opacity&&fx.opacity&&$el[0].style.removeAttribute("filter")}var self=this,o=this.options,fragmentId=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=$(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return $("a",this)[0]}),this.panels=$([]),this.anchors.each(function(i,a){var baseEl,href=$(a).attr("href"),hrefBase=href.split("#")[0];if(hrefBase&&(hrefBase===location.toString().split("#")[0]||(baseEl=$("base")[0])&&hrefBase===baseEl.href)&&(href=a.hash,a.href=href),fragmentId.test(href))self.panels=self.panels.add(self.element.find(self._sanitizeSelector(href)));else if(href&&"#"!==href){$.data(a,"href.tabs",href),$.data(a,"load.tabs",href.replace(/#.*$/,""));var id=self._tabId(a);a.href="#"+id;var $panel=self.element.find("#"+id);$panel.length||($panel=$(o.panelTemplate).attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(self.panels[i-1]||self.list),$panel.data("destroy.tabs",!0)),self.panels=self.panels.add($panel)}else o.disabled.push(i)}),init?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),o.selected===undefined?(location.hash&&this.anchors.each(function(i,a){return a.hash==location.hash?(o.selected=i,!1):void 0}),"number"!=typeof o.selected&&o.cookie&&(o.selected=parseInt(self._cookie(),10)),"number"!=typeof o.selected&&this.lis.filter(".ui-tabs-selected").length&&(o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),o.selected=o.selected||(this.lis.length?0:-1)):null===o.selected&&(o.selected=-1),o.selected=o.selected>=0&&this.anchors[o.selected]||o.selected<0?o.selected:0,o.disabled=$.unique(o.disabled.concat($.map(this.lis.filter(".ui-state-disabled"),function(n,i){return self.lis.index(n)}))).sort(),-1!=$.inArray(o.selected,o.disabled)&&o.disabled.splice($.inArray(o.selected,o.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),o.selected>=0&&this.anchors.length&&(self.element.find(self._sanitizeSelector(self.anchors[o.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(o.selected).addClass("ui-tabs-selected ui-state-active"),self.element.queue("tabs",function(){self._trigger("show",null,self._ui(self.anchors[o.selected],self.element.find(self._sanitizeSelector(self.anchors[o.selected].hash))[0]))}),this.load(o.selected)),$(window).bind("unload",function(){self.lis.add(self.anchors).unbind(".tabs"),self.lis=self.anchors=self.panels=null})):o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[o.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),o.cookie&&this._cookie(o.selected,o.cookie);for(var li,i=0;li=this.lis[i];i++)$(li)[-1==$.inArray(i,o.disabled)||$(li).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(o.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==o.event){var addState=function(state,el){el.is(":not(.ui-state-disabled)")&&el.addClass("ui-state-"+state)},removeState=function(state,el){el.removeClass("ui-state-"+state)};this.lis.bind("mouseover.tabs",function(){addState("hover",$(this))}),this.lis.bind("mouseout.tabs",function(){removeState("hover",$(this))}),this.anchors.bind("focus.tabs",function(){addState("focus",$(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){removeState("focus",$(this).closest("li"))})}var hideFx,showFx;o.fx&&($.isArray(o.fx)?(hideFx=o.fx[0],showFx=o.fx[1]):hideFx=showFx=o.fx);var showTab=showFx?function(clicked,$show){$(clicked).closest("li").addClass("ui-tabs-selected ui-state-active"),$show.hide().removeClass("ui-tabs-hide").animate(showFx,showFx.duration||"normal",function(){resetStyle($show,showFx),self._trigger("show",null,self._ui(clicked,$show[0]))})}:function(clicked,$show){$(clicked).closest("li").addClass("ui-tabs-selected ui-state-active"),$show.removeClass("ui-tabs-hide"),self._trigger("show",null,self._ui(clicked,$show[0]))},hideTab=hideFx?function(clicked,$hide){$hide.animate(hideFx,hideFx.duration||"normal",function(){self.lis.removeClass("ui-tabs-selected ui-state-active"),$hide.addClass("ui-tabs-hide"),resetStyle($hide,hideFx),self.element.dequeue("tabs")})}:function(clicked,$hide,$show){self.lis.removeClass("ui-tabs-selected ui-state-active"),$hide.addClass("ui-tabs-hide"),self.element.dequeue("tabs")};this.anchors.bind(o.event+".tabs",function(){var el=this,$li=$(el).closest("li"),$hide=self.panels.filter(":not(.ui-tabs-hide)"),$show=self.element.find(self._sanitizeSelector(el.hash));if($li.hasClass("ui-tabs-selected")&&!o.collapsible||$li.hasClass("ui-state-disabled")||$li.hasClass("ui-state-processing")||self.panels.filter(":animated").length||self._trigger("select",null,self._ui(this,$show[0]))===!1)return this.blur(),!1;if(o.selected=self.anchors.index(this),self.abort(),o.collapsible){if($li.hasClass("ui-tabs-selected"))return o.selected=-1,o.cookie&&self._cookie(o.selected,o.cookie),self.element.queue("tabs",function(){hideTab(el,$hide)}).dequeue("tabs"),this.blur(),!1;if(!$hide.length)return o.cookie&&self._cookie(o.selected,o.cookie),self.element.queue("tabs",function(){showTab(el,$show)}),self.load(self.anchors.index(this)),this.blur(),!1}if(o.cookie&&self._cookie(o.selected,o.cookie),!$show.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";$hide.length&&self.element.queue("tabs",function(){hideTab(el,$hide)}),self.element.queue("tabs",function(){showTab(el,$show)}),self.load(self.anchors.index(this)),$.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(index){return"string"==typeof index&&(index=this.anchors.index(this.anchors.filter("[href$="+index+"]"))),index},destroy:function(){var o=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var href=$.data(this,"href.tabs");href&&(this.href=href);var $this=$(this).unbind(".tabs");$.each(["href","load","cache"],function(i,prefix){$this.removeData(prefix+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){$.data(this,"destroy.tabs")?$(this).remove():$(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),o.cookie&&this._cookie(null,o.cookie),this},add:function(url,label,index){index===undefined&&(index=this.anchors.length);var self=this,o=this.options,$li=$(o.tabTemplate.replace(/#\{href\}/g,url).replace(/#\{label\}/g,label)),id=url.indexOf("#")?this._tabId($("a",$li)[0]):url.replace("#","");$li.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var $panel=self.element.find("#"+id);return $panel.length||($panel=$(o.panelTemplate).attr("id",id).data("destroy.tabs",!0)),$panel.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),index>=this.lis.length?($li.appendTo(this.list),$panel.appendTo(this.list[0].parentNode)):($li.insertBefore(this.lis[index]),$panel.insertBefore(this.panels[index])),o.disabled=$.map(o.disabled,function(n,i){return n>=index?++n:n}),this._tabify(),1==this.anchors.length&&(o.selected=0,$li.addClass("ui-tabs-selected ui-state-active"),$panel.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){self._trigger("show",null,self._ui(self.anchors[0],self.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[index],this.panels[index])),this},remove:function(index){index=this._getIndex(index);var o=this.options,$li=this.lis.eq(index).remove(),$panel=this.panels.eq(index).remove();
return $li.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(index+(index+1<this.anchors.length?1:-1)),o.disabled=$.map($.grep(o.disabled,function(n,i){return n!=index}),function(n,i){return n>=index?--n:n}),this._tabify(),this._trigger("remove",null,this._ui($li.find("a")[0],$panel[0])),this},enable:function(index){index=this._getIndex(index);var o=this.options;if(-1!=$.inArray(index,o.disabled))return this.lis.eq(index).removeClass("ui-state-disabled"),o.disabled=$.grep(o.disabled,function(n,i){return n!=index}),this._trigger("enable",null,this._ui(this.anchors[index],this.panels[index])),this},disable:function(index){index=this._getIndex(index);var o=this.options;return index!=o.selected&&(this.lis.eq(index).addClass("ui-state-disabled"),o.disabled.push(index),o.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[index],this.panels[index]))),this},select:function(index){if(index=this._getIndex(index),-1==index){if(!this.options.collapsible||-1==this.options.selected)return this;index=this.options.selected}return this.anchors.eq(index).trigger(this.options.event+".tabs"),this},load:function(index){index=this._getIndex(index);var self=this,o=this.options,a=this.anchors.eq(index)[0],url=$.data(a,"load.tabs");if(this.abort(),!url||0!==this.element.queue("tabs").length&&$.data(a,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(index).addClass("ui-state-processing"),o.spinner){var span=$("span",a);span.data("label.tabs",span.html()).html(o.spinner)}return this.xhr=$.ajax($.extend({},o.ajaxOptions,{url:url,success:function(r,s){self.element.find(self._sanitizeSelector(a.hash)).html(r),self._cleanup(),o.cache&&$.data(a,"cache.tabs",!0),self._trigger("load",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.success(r,s)}catch(e){}},error:function(xhr,s,e){self._cleanup(),self._trigger("load",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.error(xhr,s,index,a)}catch(e){}}})),self.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(index,url){return this.anchors.eq(index).removeData("cache.tabs").data("load.tabs",url),this},length:function(){return this.anchors.length}}),$.extend($.ui.tabs,{version:"@VERSION"}),$.extend($.ui.tabs.prototype,{rotation:null,rotate:function(ms,continuing){var self=this,o=this.options,rotate=self._rotate||(self._rotate=function(e){clearTimeout(self.rotation),self.rotation=setTimeout(function(){var t=o.selected;self.select(++t<self.anchors.length?t:0)},ms),e&&e.stopPropagation()}),stop=self._unrotate||(self._unrotate=continuing?function(e){t=o.selected,rotate()}:function(e){e.clientX&&self.rotate(null)});return ms?(this.element.bind("tabsshow",rotate),this.anchors.bind(o.event+".tabs",stop),rotate()):(clearTimeout(self.rotation),this.element.unbind("tabsshow",rotate),this.anchors.unbind(o.event+".tabs",stop),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($){$.fn.extend($.ui.tabs.prototype,{_create:function(){var self=this,options=this.options;if($.address){var jqAddressDefOpt={enable:!0,title:{enable:!0,split:" | "}};$.isEmptyObject(options.jqAddress)?options.jqAddress={}:$.extend(!0,jqAddressDefOpt,options.jqAddress),$.extend(!0,options.jqAddress,jqAddressDefOpt)}if($.address&&options.jqAddress.enable)var anchorId="#"+$.address.value().replace("/","");self._tabify(!0),this.anchors.bind(options.event+".tabs-accessibility",function(){this.focus()}),self.list.attr("role","tablist");for(var x=0;x<self.anchors.length;x++)$.address&&options.jqAddress.enable&&"#"!=anchorId&&$(self.anchors[x]).attr("href")==anchorId&&self.select(x),self._ariaInit(x);self.list.keydown(function(event){switch(event.keyCode){case $.ui.keyCode.RIGHT:return self.select(options.selected+1),!1;case $.ui.keyCode.DOWN:self.select(options.selected+1);break;case $.ui.keyCode.UP:return self.select(options.selected-1),!1;case $.ui.keyCode.LEFT:return self.select(options.selected-1),!1;case $.ui.keyCode.END:return self.select(self.anchors.length-1),!1;case $.ui.keyCode.HOME:return self.select(0),!1}}),$.address&&this.options.jqAddress.enable&&$.address.externalChange(function(event){for(var anchorId="#"+event.value.replace("/",""),x=0;x<self.anchors.length;){if($(self.anchors[x]).attr("href")==anchorId)return void self.select(x);x++}})},_original_load:$.ui.tabs.prototype.load,load:function(index){$.address&&this.options.jqAddress.enable&&(void 0!==$(this.anchors[0]).attr("aria-selected")?(0===this.options.forceFirst&&0!==index&&(""==$.address.value()&&$.address.history(!1),$.address.value($(this.anchors[0]).attr("href").replace(/^#/,"")),$.address.history(!0),this.options.forceFirst=!1),this.options.jqAddress.title.enable&&$.address.title($.address.title().split(this.options.jqAddress.title.split)[0]+this.options.jqAddress.title.split+$(this.anchors[index]).text()),$.address.value($(this.anchors[index]).attr("href").replace(/^#/,""))):this.options.forceFirst=index);for(var x=0;x<this.anchors.length;x++)this._ariaSet(x,!1),$.data(this.anchors[x],"href.tabs")&&$(this.panels[x]).removeAttr("aria-live").removeAttr("aria-busy");$.data(this.anchors[index],"href.tabs")&&$(this.panels[index]).attr("aria-live","polite").attr("aria-busy","true"),this._original_load(index),$.data(this.anchors[index],"href.tabs")&&$(this.panels[index]).attr("aria-busy","false"),this._ariaSet(index,!0)},_ariaSet:function(index,state){var tabindex=state?0:-1,anchor=$(this.anchors[index]);anchor.attr("tabindex",tabindex).attr("aria-selected",state),state?$.browser.msie||anchor.focus():anchor.closest("li").removeClass("ui-state-focus"),$(this.panels[index]).attr("aria-hidden",!state).attr("aria-expanded",state),$.browser.msie&&(this.options.timeout=window.setTimeout(function(){anchor.focus()},100)),state&&this._updateVirtualBuffer()},_ariaInit:function(index){var self=this,panelId=$(this.panels[index]).attr("id");$(this.anchors[index]).attr("role","tab").attr("aria-controls",panelId).attr("id",panelId+"-tab").parent().attr("role","presentation"),$(this.panels[index]).attr("role","tabpanel").attr("tabindex",0).attr("aria-labelledby",panelId+"-tab"),this.options.collapsible&&$(this.anchors[index]).bind(this.options.event,function(event){self._ariaSet(index,!$(self.panels[index]).hasClass("ui-tabs-hide"))})},_original_add:$.ui.tabs.prototype.add,add:function(url,label,index){this._original_add(url,label,index),this.element.attr("aria-live","polite").attr("aria-relevant","additions"),index?(this._ariaInit(index),this._ariaSet(index,!1)):(this._ariaInit(this.anchors.length-1),this._ariaSet(this.anchors.length-1,!1))},_original_remove:$.ui.tabs.prototype.remove,remove:function(index){this._original_remove(index),this.element.attr("aria-live","polite").attr("aria-relevant","removals")},_original_destroy:$.ui.tabs.prototype.destroy,destroy:function(){var self=this;this.options;self.element.removeAttr("role").removeAttr("aria-live").removeAttr("aria-relevant"),self.list.removeAttr("role");for(var x=0;x<self.anchors.length;x++)$(self.anchors[x]).removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("role").removeAttr("id").removeAttr("tabindex").parent().removeAttr("role"),$(self.panels[x]).removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("aria-labelledby").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-relevant").removeAttr("role");$("body>form #virtualBufferForm").parent().remove(),this._original_destroy()},_updateVirtualBuffer:function(){var form=$("body>form #virtualBufferForm");form.length?("1"==form.val()?form.val("0"):form.val("1"),form.hasClass("ui-accessibility-odd")?form.addClass("ui-accessibility-even").removeClass("ui-accessibility-odd"):form.addClass("ui-accessibility-odd").removeClass("ui-accessibility-even")):$("body").append('<form><input id="virtualBufferForm" type="hidden" value="1" /></form>')}})}(jQuery);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.tabs",{gradeNames:["fluid.viewComponent","autoInit"],tabOptions:{},events:{tabsselect:"preventable",tabsload:null,tabsshow:null},finalInitFunction:"fluid.tabs.finalInit"}),fluid.tabs.finalInit=function(that){that.container.tabs(that.options.tabOptions),fluid.each(that.options.events,function(value,eventName){that.container.bind(eventName,function(event,ui){return that.events[eventName].fire(that,event,ui)})})}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.registerNamespace("fluid.tableOfContents"),fluid.tableOfContents.insertAnchor=function(name,element){var anchor=$("<a></a>",element.ownerDocument);anchor.prop({name:name,id:name}),anchor.insertBefore(element)},fluid.tableOfContents.generateGUID=function(){return fluid.allocateSimpleId()},fluid.tableOfContents.filterHeadings=function(headings){return headings.filter(":visible")},fluid.tableOfContents.finalInit=function(that){var headings=that.filterHeadings(that.locate("headings"));that.headingTextToAnchor=function(heading){var guid=that.generateGUID(),anchorInfo={id:guid,url:"#"+guid};return that.insertAnchor(anchorInfo.id,heading),anchorInfo},that.anchorInfo=fluid.transform(headings,function(heading){return that.headingTextToAnchor(heading)}),that.hide=function(){that.locate("tocContainer").hide()},that.show=function(){that.locate("tocContainer").show()},that.model=that.modelBuilder.assembleModel(headings,that.anchorInfo),that.events.onReady.fire()},fluid.defaults("fluid.tableOfContents",{gradeNames:["fluid.viewComponent","autoInit"],finalInitFunction:"fluid.tableOfContents.finalInit",components:{levels:{type:"fluid.tableOfContents.levels",container:"{tableOfContents}.dom.tocContainer",createOnEvent:"onReady",options:{model:{headings:"{tableOfContents}.model"},events:{afterRender:"{tableOfContents}.events.afterRender"}}},modelBuilder:{type:"fluid.tableOfContents.modelBuilder"}},invokers:{insertAnchor:"fluid.tableOfContents.insertAnchor",generateGUID:"fluid.tableOfContents.generateGUID",filterHeadings:"fluid.tableOfContents.filterHeadings"},selectors:{headings:":header",tocContainer:".flc-toc-tocContainer"},events:{onReady:null,afterRender:null}}),fluid.registerNamespace("fluid.tableOfContents.modelBuilder"),fluid.tableOfContents.modelBuilder.toModel=function(headingInfo,modelLevelFn){var headings=fluid.copy(headingInfo),buildModelLevel=function(headings,level){for(var modelLevel=[];headings.length>0;){var heading=headings[0];if(heading.level<level)break;if(heading.level>level){var subHeadings=buildModelLevel(headings,level+1);modelLevel.length>0?modelLevel[modelLevel.length-1].headings=subHeadings:modelLevel=modelLevelFn(modelLevel,subHeadings)}heading.level===level&&(modelLevel.push(heading),headings.shift())}return modelLevel};return buildModelLevel(headings,1)},fluid.tableOfContents.modelBuilder.gradualModelLevelFn=function(modelLevel,subHeadings){var subHeadingsClone=fluid.copy(subHeadings);return subHeadingsClone[0].level--,subHeadingsClone},fluid.tableOfContents.modelBuilder.skippedModelLevelFn=function(modelLevel,subHeadings){return modelLevel.push({headings:subHeadings}),modelLevel},fluid.tableOfContents.modelBuilder.finalInit=function(that){that.convertToHeadingObjects=function(headings,anchorInfo){return headings=$(headings),fluid.transform(headings,function(heading,index){return{level:that.headingCalculator.getHeadingLevel(heading),text:$(heading).text(),url:anchorInfo[index].url}})},that.assembleModel=function(headings,anchorInfo){var headingInfo=that.convertToHeadingObjects(headings,anchorInfo);return that.toModel(headingInfo)}},fluid.defaults("fluid.tableOfContents.modelBuilder",{gradeNames:["fluid.littleComponent","autoInit"],finalInitFunction:"fluid.tableOfContents.modelBuilder.finalInit",components:{headingCalculator:{type:"fluid.tableOfContents.modelBuilder.headingCalculator"}},invokers:{toModel:{funcName:"fluid.tableOfContents.modelBuilder.toModel",args:["{arguments}.0","{modelBuilder}.modelLevelFn"]},modelLevelFn:"fluid.tableOfContents.modelBuilder.gradualModelLevelFn"}}),fluid.registerNamespace("fluid.tableOfContents.modelBuilder.headingCalculator"),fluid.tableOfContents.modelBuilder.headingCalculator.finalInit=function(that){that.getHeadingLevel=function(heading){return $.inArray(heading.tagName,that.options.levels)+1}},fluid.defaults("fluid.tableOfContents.modelBuilder.headingCalculator",{gradeNames:["fluid.littleComponent","autoInit"],finalInitFunction:"fluid.tableOfContents.modelBuilder.headingCalculator.finalInit",levels:["H1","H2","H3","H4","H5","H6"]}),fluid.registerNamespace("fluid.tableOfContents.levels"),fluid.tableOfContents.levels.finalInit=function(that){fluid.fetchResources(that.options.resources,function(){that.container.append(that.options.resources.template.resourceText),that.refreshView()})},fluid.tableOfContents.levels.objModel=function(type,ID){var objModel={ID:type+ID+":",children:[]};return objModel},fluid.tableOfContents.levels.handleEmptyItemObj=function(itemObj){itemObj.decorators=[{type:"addClass",classes:"fl-tableOfContents-hide-bullet"}]},fluid.tableOfContents.levels.generateTree=function(headingsModel,currentLevel){currentLevel=currentLevel||0;var levelObj=fluid.tableOfContents.levels.objModel("level",currentLevel);if(0===headingsModel.headings.length)return[];if(0===currentLevel){var tree={children:[fluid.tableOfContents.levels.generateTree(headingsModel,currentLevel+1)]};return tree}return $.each(headingsModel.headings,function(index,model){var itemObj=fluid.tableOfContents.levels.objModel("items",currentLevel),linkObj={ID:"link"+currentLevel,target:model.url,linktext:model.text};model.level?itemObj.children.push(linkObj):fluid.tableOfContents.levels.handleEmptyItemObj(itemObj),model.headings&&itemObj.children.push(fluid.tableOfContents.levels.generateTree(model,currentLevel+1)),levelObj.children.push(itemObj)}),levelObj},fluid.tableOfContents.levels.produceTree=function(that){return fluid.tableOfContents.levels.generateTree(that.model)},fluid.defaults("fluid.tableOfContents.levels",{gradeNames:["fluid.rendererComponent","autoInit"],finalInitFunction:"fluid.tableOfContents.levels.finalInit",produceTree:"fluid.tableOfContents.levels.produceTree",selectors:{level1:".flc-toc-levels-level1",level2:".flc-toc-levels-level2",level3:".flc-toc-levels-level3",level4:".flc-toc-levels-level4",level5:".flc-toc-levels-level5",level6:".flc-toc-levels-level6",items1:".flc-toc-levels-items1",items2:".flc-toc-levels-items2",items3:".flc-toc-levels-items3",items4:".flc-toc-levels-items4",items5:".flc-toc-levels-items5",items6:".flc-toc-levels-items6",link1:".flc-toc-levels-link1",link2:".flc-toc-levels-link2",link3:".flc-toc-levels-link3",link4:".flc-toc-levels-link4",link5:".flc-toc-levels-link5",link6:".flc-toc-levels-link6"},repeatingSelectors:["level1","level2","level3","level4","level5","level6","items1","items2","items3","items4","items5","items6"],model:{headings:[]},resources:{template:{forceCache:!0,url:"../html/TableOfContents.html"}},rendererFnOptions:{noexpand:!0},rendererOptions:{debugMode:!1}})}(jQuery,fluid_1_5),this.JSON||(JSON=function(){function f(n){return 10>n?"0"+n:n}function stringify(value,whitelist){var a,i,k,l,v,r=/["\\\x00-\x1f\x7f-\x9f]/g;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];return c?c:(c=a.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if("function"==typeof value.toJSON)return stringify(value.toJSON());if(a=[],"number"==typeof value.length&&!value.propertyIsEnumerable("length")){for(l=value.length,i=0;l>i;i+=1)a.push(stringify(value[i],whitelist)||"null");return"["+a.join(",")+"]"}if(whitelist)for(l=whitelist.length,i=0;l>i;i+=1)k=whitelist[i],"string"==typeof k&&(v=stringify(value[k],whitelist),v&&a.push(stringify(k)+":"+v));else for(k in value)"string"==typeof k&&(v=stringify(value[k],whitelist),v&&a.push(stringify(k)+":"+v));return"{"+a.join(",")+"}"}}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return{stringify:stringify,parse:function(text,filter){function walk(k,v){var i,n;if(v&&"object"==typeof v)for(i in v)Object.prototype.hasOwnProperty.apply(v,[i])&&(n=walk(i,v[i]),void 0!==n&&(v[i]=n));return filter(k,v)}var j;if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof filter?walk("",j):j;throw new SyntaxError("parseJSON")}}}());var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.generate=function(n,generator){for(var togo=[],i=0;n>i;++i)togo[i]="function"==typeof generator?generator.call(null,i):generator;return togo},fluid.registerNamespace("fluid.url"),fluid.url.generateDepth=function(depth){return fluid.generate(depth,"../").join("")},fluid.url.parsePathInfo=function(pathInfo){var togo={},segs=pathInfo.split("/");if(segs.length>0){var top=segs.length-1,dotpos=segs[top].indexOf(".");-1!==dotpos&&(togo.extension=segs[top].substring(dotpos+1),segs[top]=segs[top].substring(0,dotpos))}return togo.pathInfo=segs,togo},fluid.url.parsePathInfoTrim=function(pathInfo){var togo=fluid.url.parsePathInfo(pathInfo);return""===togo.pathInfo[togo.pathInfo.length-1]&&togo.pathInfo.length--,togo},fluid.url.collapseSegs=function(segs,from,to){var togo="";void 0===from&&(from=0),void 0===to&&(to=segs.length);for(var i=from;to-1>i;++i)togo+=segs[i]+"/";return to>from&&(togo+=segs[to-1]),togo},fluid.url.makeRelPath=function(parsed,index){var togo=fluid.kettle.collapseSegs(parsed.pathInfo,index);return parsed.extension&&(togo+="."+parsed.extension),togo},fluid.url.cononocolosePath=function(pathInfo){for(var consume=0,i=0;i<pathInfo.length;++i)".."===pathInfo[i]?++consume:0!==consume&&(pathInfo.splice(i-2*consume,2*consume),i-=2*consume,consume=0);return pathInfo},fluid.url.parseUri=function(str){for(var o=fluid.url.parseUri.options,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;i--;)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){$1&&(uri[o.q.name][$1]=$2)}),uri},fluid.url.parseUri.options={strictMode:!0,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},fluid.url.parseSegs=function(url){var parsed=fluid.url.parseUri(url),parsedSegs=fluid.url.parsePathInfoTrim(parsed.directory);return parsedSegs.pathInfo},fluid.url.isAbsoluteUrl=function(url){var parseRel=fluid.url.parseUri(url);return parseRel.host||parseRel.protocol||"/"===parseRel.directory.charAt(0)},fluid.url.computeRelativePrefix=function(outerLocation,iframeLocation,relPath){if(fluid.url.isAbsoluteUrl(relPath))return relPath;var relSegs=fluid.url.parsePathInfo(relPath).pathInfo,parsedOuter=fluid.url.parseSegs(outerLocation),parsedRel=parsedOuter.concat(relSegs);fluid.url.cononocolosePath(parsedRel);for(var parsedInner=fluid.url.parseSegs(iframeLocation),seg=0;seg<parsedRel.length&&parsedRel[seg]==parsedInner[seg];++seg);var excess=parsedInner.length-seg,back=fluid.url.generateDepth(excess),front=fluid.url.collapseSegs(parsedRel,seg);return back+front}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.uiOptions.store",{gradeNames:["fluid.littleComponent","autoInit"],defaultSiteSettings:{textFont:"default",theme:"default",textSize:1,lineSpacing:1,layout:!1,toc:!1,links:!1,inputsLarger:!1}}),fluid.defaults("fluid.cookieStore",{gradeNames:["fluid.uiOptions.store","autoInit"],invokers:{fetch:{funcName:"fluid.cookieStore.fetch",args:["{cookieStore}.options.cookie.name","{cookieStore}.options.defaultSiteSettings"]},save:{funcName:"fluid.cookieStore.save",args:["{arguments}.0","{cookieStore}.options.cookie"]}},cookie:{name:"fluid-ui-settings",path:"/",expires:""}}),fluid.cookieStore.fetch=function(cookieName,defaults){var retObj,startIndex,endIndex,cookie=document.cookie,cookiePrefix=cookieName+"=";return cookie.length>0&&(startIndex=cookie.indexOf(cookiePrefix),startIndex>-1&&(startIndex+=cookiePrefix.length,endIndex=cookie.indexOf(";",startIndex),startIndex>endIndex&&(endIndex=cookie.length),retObj=JSON.parse(decodeURIComponent(cookie.substring(startIndex,endIndex))))),$.extend(!0,{},defaults,retObj)},fluid.cookieStore.assembleCookie=function(cookieOptions){var cookieStr=cookieOptions.name+"="+cookieOptions.data;return cookieOptions.expires&&(cookieStr+="; expires="+cookieOptions.expires),cookieOptions.path&&(cookieStr+="; path="+cookieOptions.path),cookieStr},fluid.cookieStore.save=function(settings,cookieOptions){cookieOptions.data=encodeURIComponent(JSON.stringify(settings)),document.cookie=fluid.cookieStore.assembleCookie(cookieOptions)},fluid.defaults("fluid.tempStore",{gradeNames:["fluid.uiOptions.store","autoInit"],invokers:{fetch:{funcName:"fluid.tempStore.fetch",args:["{tempStore}"]},save:{funcName:"fluid.tempStore.save",args:["{arguments}.0","{tempStore}"]}},defaultSiteSettings:{},finalInitFunction:"fluid.tempStore.finalInit"}),fluid.tempStore.finalInit=function(that){that.model=that.options.defaultSiteSettings},fluid.tempStore.fetch=function(that){return that.model},fluid.tempStore.save=function(settings,that){that.model=settings}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.registerNamespace("fluid.browser.version"),fluid.browser.msie=function(){var isIE=$.browser.msie;return isIE?fluid.typeTag("fluid.browser.msie"):void 0},fluid.browser.majorVersion=function(){var version=$.browser.version,dotpos=version.indexOf("."),majorVersion=version.substring(0,dotpos);return fluid.typeTag("fluid.browser.majorVersion."+majorVersion)};var features={browserIE:fluid.browser.msie(),browserMajorVersion:fluid.browser.majorVersion()};fluid.merge(null,fluid.staticEnvironment,features),fluid.hasFeature=function(tagName){return fluid.find(fluid.staticEnvironment,function(value){return value&&value.typeName===tagName?!0:void 0})},fluid.defaults("fluid.uiEnhancer",{gradeNames:["fluid.viewComponent","autoInit"],components:{textSize:{type:"fluid.uiEnhancer.textSizer",container:"{uiEnhancer}.container",options:{invokers:{calcInitSize:{funcName:"fluid.uiEnhancer.textSizer.calcInitSize",args:["{that}.container","{uiEnhancer}.options.fontSizeMap"]}}}},tableOfContents:{type:"fluid.tableOfContents",container:"{uiEnhancer}.container",createOnEvent:"onCreateTOCReady",options:{components:{levels:{type:"fluid.tableOfContents.levels",options:{resources:{template:{forceCache:!0,url:"{uiEnhancer}.options.tocTemplate"}}}}},listeners:{afterRender:"{uiEnhancer}.lateRefreshRelay"}}},textFont:{type:"fluid.uiEnhancer.classSwapper",container:"{uiEnhancer}.container",options:{classes:"{uiEnhancer}.options.classnameMap.textFont"}},lineSpacing:{type:"fluid.uiEnhancer.lineSpacer",container:"{uiEnhancer}.container",options:{invokers:{calcInitSize:{funcName:"fluid.uiEnhancer.lineSpacer.calcInitSize",args:["{that}.container","{uiEnhancer}.options.fontSizeMap"]}}}},theme:{type:"fluid.uiEnhancer.classSwapper",container:"{uiEnhancer}.container",options:{classes:"{uiEnhancer}.options.classnameMap.theme"}},settingsStore:{type:"fluid.uiOptions.store",options:{defaultSiteSettings:"{uiEnhancer}.options.defaultSiteSettings"}}},invokers:{updateModel:{funcName:"fluid.uiEnhancer.updateModel",args:["@0","{uiEnhancer}.applier"]},updateFromSettingsStore:{funcName:"fluid.uiEnhancer.updateFromSettingsStore",args:["{uiEnhancer}"]},refreshView:{funcName:"fluid.uiEnhancer.refreshView",args:["{uiEnhancer}"]},styleElements:"fluid.uiEnhancer.styleElements",setLayout:"fluid.uiEnhancer.setLayout",styleLinks:"fluid.uiEnhancer.styleLinks",styleInputs:"fluid.uiEnhancer.styleInputs",setIE6ColorInversion:"fluid.uiEnhancer.setIE6ColorInversion"},events:{onCreateTOCReady:null,lateRefreshView:null,modelChanged:null},listeners:{"lateRefreshView.domReading":"fluid.uiEnhancer.applyDomReadingSettings"},classnameMap:{textFont:{"default":"",times:"fl-font-uio-times",comic:"fl-font-uio-comic-sans",arial:"fl-font-uio-arial",verdana:"fl-font-uio-verdana"},theme:{"default":"fl-uio-default-theme",bw:"fl-theme-uio-bw fl-theme-bw",wb:"fl-theme-uio-wb fl-theme-wb",by:"fl-theme-uio-by fl-theme-by",yb:"fl-theme-uio-yb fl-theme-yb"},layout:"fl-layout-linear",links:"fl-link-enhanced",inputsLarger:"fl-text-larger"},fontSizeMap:{"xx-small":"9px","x-small":"11px",small:"13px",medium:"15px",large:"18px","x-large":"23px","xx-large":"30px"},selectors:{colorInversion:".fl-inverted-color"},styles:{colorInversionClass:"fl-inverted-color"},finalInitFunction:"fluid.uiEnhancer.finalInit"}),fluid.uiEnhancer.finalInit=function(that){return that.applier.modelChanged.addListener("",function(newModel,oldModel,changeRequest){that.events.modelChanged.fire(newModel,oldModel,changeRequest),that.refreshView()}),that.lateRefreshRelay=function(){that.events.lateRefreshView.fire(that)},that.updateFromSettingsStore(),that},fluid.uiEnhancer.updateFromSettingsStore=function(that){that.updateModel(that.settingsStore.fetch())},fluid.uiEnhancer.updateModel=function(newModel,applier){applier.requestChange("",newModel)},fluid.uiEnhancer.applyTocSetting=function(that){var async=!1;that.model.toc?that.tableOfContents?that.tableOfContents.show():(that.events.onCreateTOCReady.fire(),async=!0):that.tableOfContents&&that.tableOfContents.hide(),async||that.lateRefreshRelay()},fluid.uiEnhancer.applyDomReadingSettings=function(that){that.setLayout(that),that.styleLinks(that),that.styleInputs(that),that.setIE6ColorInversion(that)},fluid.uiEnhancer.refreshView=function(that){that.textSize.set(that.model.textSize),that.textFont.swap(that.model.textFont),that.lineSpacing.set(that.model.lineSpacing),that.theme.swap(that.model.theme),$(document).ready(function(){fluid.uiEnhancer.applyTocSetting(that)})},fluid.uiEnhancer.styleElements=function(elements,setting,classname){setting?elements.addClass(classname):$("."+classname,elements).andSelf().removeClass(classname)},fluid.uiEnhancer.setLayout=function(that){that.styleElements(that.container,that.model.layout,that.options.classnameMap.layout)},fluid.uiEnhancer.styleLinks=function(that){var links=$("a",that.container);that.styleElements(links,that.model.links,that.options.classnameMap.links)},fluid.uiEnhancer.styleInputs=function(that){that.styleElements($("input, button",that.container),that.model.inputsLarger,that.options.classnameMap.inputsLarger)},fluid.uiEnhancer.setIE6ColorInversion=function(that){fluid.hasFeature("fluid.browser.msie")&&fluid.hasFeature("fluid.browser.majorVersion.6")&&"default"===that.model.theme&&that.locate("colorInversion").removeClass(that.options.styles.colorInversionClass)},fluid.uiEnhancer.getTextSizeInPx=function(container,fontSizeMap){var fontSize=container.css("font-size");return fontSizeMap[fontSize]&&(fontSize=fontSizeMap[fontSize]),parseFloat(fontSize)},fluid.uiEnhancer.getTextSizeInEm=function(container,fontSizeMap){var px2emFactor=fluid.uiEnhancer.getPx2EmFactor(container,fontSizeMap);return Math.round(fluid.uiEnhancer.getTextSizeInPx(container,fontSizeMap)/px2emFactor*1e4)/1e4},fluid.uiEnhancer.getPx2EmFactor=function(container,fontSizeMap){return"HTML"!==container.get(0).tagName&&(container=container.parent()),fluid.uiEnhancer.getTextSizeInPx(container,fontSizeMap)},fluid.uiEnhancer.getLineHeight=function(container){var lineHeight;return lineHeight=container[0].currentStyle?container[0].currentStyle.lineHeight:container.css("line-height")},fluid.uiEnhancer.numerizeLineHeight=function(lineHeight,fontSize){return lineHeight?"normal"===lineHeight?1.2:lineHeight.match(/[0-9]$/)?lineHeight:Math.round(parseFloat(lineHeight)/fontSize*100)/100:0},fluid.defaults("fluid.uiEnhancer.textSizer",{gradeNames:["fluid.viewComponent","autoInit"],invokers:{set:{funcName:"fluid.uiEnhancer.textSizer.set",args:["@0","{textSizer}"]}}}),fluid.uiEnhancer.textSizer.set=function(times,that){if(that.initialSize||(that.initialSize=that.calcInitSize()),that.initialSize){var targetSize=times*that.initialSize;that.container.css("font-size",targetSize+"em")}},fluid.uiEnhancer.textSizer.calcInitSize=function(container,fontSizeMap){return fluid.uiEnhancer.getTextSizeInEm(container,fontSizeMap)},fluid.defaults("fluid.uiEnhancer.classSwapper",{gradeNames:["fluid.viewComponent","autoInit"],invokers:{clearClasses:{funcName:"fluid.uiEnhancer.classSwapper.clearClasses",args:["{classSwapper}"]},swap:{funcName:"fluid.uiEnhancer.classSwapper.swap",args:["@0","{classSwapper}"]}},classes:{},finalInitFunction:"fluid.uiEnhancer.classSwapper.finalInit"}),fluid.uiEnhancer.classSwapper.finalInit=function(that){that.classSelector="",that.classStr="",fluid.each(that.options.classes,function(className){className&&(that.classSelector+=that.classSelector?", ."+className:"."+className,that.classStr+=that.classStr?" "+className:className)})},fluid.uiEnhancer.classSwapper.clearClasses=function(that){that.container.removeClass(that.classStr)},fluid.uiEnhancer.classSwapper.swap=function(classname,that){that.clearClasses(that),that.container.addClass(that.options.classes[classname])},fluid.defaults("fluid.uiEnhancer.lineSpacer",{gradeNames:["fluid.viewComponent","autoInit"],invokers:{set:{funcName:"fluid.uiEnhancer.lineSpacer.set",args:["@0","{lineSpacer}"]}}}),fluid.uiEnhancer.lineSpacer.set=function(times,that){if(that.initialSize||(that.initialSize=that.calcInitSize()),that.initialSize){var targetLineSpacing=times*that.initialSize;that.container.css("line-height",targetLineSpacing)}},fluid.uiEnhancer.lineSpacer.calcInitSize=function(container,fontSizeMap){var lineHeight=fluid.uiEnhancer.getLineHeight(container),fontSize=fluid.uiEnhancer.getTextSizeInPx(container,fontSizeMap);return fluid.uiEnhancer.numerizeLineHeight(lineHeight,fontSize)},fluid.pageEnhancer=function(uiEnhancerOptions){var that=fluid.initLittleComponent("fluid.pageEnhancer");return uiEnhancerOptions=fluid.copy(uiEnhancerOptions),uiEnhancerOptions.originalUserOptions=fluid.copy(uiEnhancerOptions),that.uiEnhancerOptions=uiEnhancerOptions,fluid.initDependents(that),fluid.staticEnvironment.uiEnhancer=that.uiEnhancer,that},fluid.defaults("fluid.pageEnhancer",{gradeNames:["fluid.littleComponent"],components:{uiEnhancer:{type:"fluid.uiEnhancer",container:"body",options:"{pageEnhancer}.uiEnhancerOptions"}}}),fluid.demands("fluid.uiOptions.store",["fluid.uiEnhancer"],{funcName:"fluid.cookieStore"})}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.textfieldSlider",{gradeNames:["fluid.viewComponent","autoInit"],components:{textfield:{type:"fluid.textfieldSlider.textfield",container:"{textfieldSlider}.dom.textfield",options:{model:"{textfieldSlider}.model",applier:"{textfieldSlider}.applier"}},slider:{type:"fluid.textfieldSlider.slider",container:"{textfieldSlider}.dom.slider",options:{model:"{textfieldSlider}.model",applier:"{textfieldSlider}.applier",sliderOptions:"{textfieldSlider}.options.sliderOptions"}}},selectors:{textfield:".flc-textfieldSlider-field",slider:".flc-textfieldSlider-slider"},events:{modelChanged:null},model:{value:null,min:0,max:100},sliderOptions:{orientation:"horizontal",
step:1},finalInitFunction:"fluid.textfieldSlider.finalInit"}),fluid.textfieldSlider.finalInit=function(that){that.refreshView=function(){var val=that.model.value;that.textfield.container.val(val)},that.applier.modelChanged.addListener("value",function(newModel){that.events.modelChanged.fire(newModel.value)}),that.events.modelChanged.addListener(that.refreshView),that.refreshView()},fluid.defaults("fluid.textfieldSlider.textfield",{gradeNames:["fluid.viewComponent","autoInit"],finalInitFunction:"fluid.textfieldSlider.textfield.finalInit"}),fluid.textfieldSlider.validateValue=function(model,changeRequest,applier){var oldValue=model.value,newValue=changeRequest.value,isValidNum=!isNaN(parseInt(newValue,10));isValidNum?(newValue<model.min?newValue=model.min:newValue>model.max&&(newValue=model.max),changeRequest.value=newValue):changeRequest.value=oldValue},fluid.textfieldSlider.textfield.finalInit=function(that){that.applier.guards.addListener({path:"value",transactional:!0},fluid.textfieldSlider.validateValue),that.container.change(function(source){that.applier.requestChange("value",source.target.value)})},fluid.defaults("fluid.textfieldSlider.slider",{gradeNames:["fluid.viewComponent","autoInit"],finalInitFunction:"fluid.textfieldSlider.slider.finalInit",selectors:{thumb:".ui-slider-handle"},events:{modelChanged:null}});var initSliderAria=function(thumb,opts){var ariaDefaults={role:"slider","aria-valuenow":opts.value,"aria-valuemin":opts.min,"aria-valuemax":opts.max};thumb.attr(ariaDefaults)};fluid.textfieldSlider.slider.finalInit=function(that){var sliderOptions=$.extend(!0,{},that.options.sliderOptions,that.model);that.slider=that.container.slider(sliderOptions),initSliderAria(that.locate("thumb"),sliderOptions),that.setSliderValue=function(value){that.slider.slider("value",value)},that.setSliderAria=function(value){that.locate("thumb").attr("aria-valuenow",value)},that.slider.bind("slide",function(e,ui){that.applier.requestChange("value",ui.value)}),that.applier.modelChanged.addListener("value",function(newModel){that.setSliderValue(newModel.value),that.setSliderAria(newModel.value),that.events.modelChanged.fire(newModel.value)})}}(jQuery,fluid_1_5),function($,fluid){fluid.registerNamespace("fluid.uiOptions.inline"),fluid.defaults("fluid.uiOptions.inline",{gradeNames:["fluid.viewComponent"],mergePolicy:{uiOptionsTransform:"noexpand",derivedDefaults:"noexpand"},components:{uiOptionsLoader:{type:"fluid.uiOptions.loader"},templateLoader:{priority:"first",type:"fluid.uiOptions.templateLoader"}},uiOptionsTransform:{transformer:"fluid.uiOptions.mapOptions",config:{"*.templateLoader":"templateLoader","*.templateLoader.*.templatePath.options.value":"prefix","*.uiOptionsLoader":"uiOptionsLoader","*.uiOptionsLoader.container":"container","*.uiOptionsLoader.*.uiOptions":"uiOptions","*.uiOptionsLoader.*.uiOptions.*.textControls":"textControls","*.uiOptionsLoader.*.uiOptions.*.layoutControls":"layoutControls","*.uiOptionsLoader.*.uiOptions.*.linksControls":"linksControls","*.uiOptionsLoader.*.uiOptions.*.preview":"preview","*.uiOptionsLoader.*.uiOptions.*.preview.*.enhancer":"previewEnhancer"}},derivedDefaults:{uiOptions:{options:{components:{settingsStore:"{uiEnhancer}.settingsStore"},listeners:{onUIOptionsRefresh:"{uiEnhancer}.updateFromSettingsStore"}}}}}),fluid.uiOptions.inline.makeCreator=function(componentName,processor){var creator=function(container,options){var defaults=fluid.defaults(componentName);options.container=container,options=processor(options);var mappedOptions=fluid.uiOptions.mapOptions(options,defaults.uiOptionsTransform.config,defaults.mergePolicy,fluid.copy(defaults.derivedDefaults)),that=fluid.initView(componentName,container,mappedOptions);return fluid.diagnoseFailedView(componentName,that,fluid.defaults(componentName),[componentName,container,mappedOptions]),fluid.initDependents(that),that},existing=fluid.getGlobalValue(componentName);existing&&$.extend(creator,existing),fluid.setGlobalValue(componentName,creator)},fluid.uiOptions.sortByKeyLength=function(inObject){var keys=fluid.keys(inObject);return keys.sort(fluid.compareStringLength(!0))},fluid.uiOptions.mapOptionsRecord=function(options,sortedConfigKeys,config){var opRecs=[{},{},options||{}],appliers=fluid.transform(opRecs,function(opRec){return fluid.makeChangeApplier(opRec)}),toDelete=[];return fluid.each(sortedConfigKeys,function(origDest){var source=config[origDest],dest=fluid.uiOptions.expandShortPath(origDest),applier=appliers["!"===origDest.charAt(0)?0:1],value=fluid.get(options,source);value&&(applier.requestChange(dest,value,"ADD"),toDelete.push({source:source,value:value}))}),fluid.each(toDelete,function(elem){appliers[2].requestChange(elem.source,elem.value,"DELETE")}),opRecs},fluid.uiOptions.mapOptions=function(options,config,mergePolicy,derivedDefaults){var sortedConfigKeys=fluid.uiOptions.sortByKeyLength(config),optrecs=fluid.uiOptions.mapOptionsRecord(options,sortedConfigKeys,config),devrecs=fluid.uiOptions.mapOptionsRecord(derivedDefaults,sortedConfigKeys,config),mergeOpts=[mergePolicy].concat(devrecs).concat(optrecs);return fluid.merge.apply(null,mergeOpts)},fluid.uiOptions.expandShortPath=function(path){"!"===path.charAt(0)&&(path=path.substring(1));var strToreplaceFirst="components",strToreplaceRest="options.components",newPath="*"===path.charAt(0)?path.replace("*",strToreplaceFirst):path;return newPath=newPath.replace(/\*/g,strToreplaceRest)},fluid.defaults("fluid.uiOptions.templateLoader",{gradeNames:["fluid.eventedComponent","autoInit"],finalInitFunction:"fluid.uiOptions.templateLoader.resolveTemplates",templates:{uiOptions:"%prefix/FatPanelUIOptions.html",textControls:"%prefix/UIOptionsTemplate-text.html",layoutControls:"%prefix/UIOptionsTemplate-layout.html",linksControls:"%prefix/UIOptionsTemplate-links.html"},components:{templatePath:{type:"fluid.uiOptions.templatePath"}},invokers:{transformURL:{funcName:"fluid.stringTemplate",args:["{arguments}.0",{"prefix/":"{templateLoader}.templatePath.options.value"}]}}}),fluid.uiOptions.templateLoader.resolveTemplates=function(that){var mapped=fluid.transform(that.options.templates,that.transformURL);that.resources=fluid.transform(mapped,function(url){return{url:url,forceCache:!0}})},fluid.defaults("fluid.uiOptions.templatePath",{gradeNames:["fluid.littleComponent","autoInit"],value:"../html/"}),fluid.defaults("fluid.uiOptions.loader",{gradeNames:["fluid.viewComponent","autoInit"],resources:"{templateLoader}.resources",finalInitFunction:"fluid.uiOptions.loader.finalInit",events:{onUIOptionsTemplateReady:null,onUIOptionsComponentReady:null,onReady:null},listeners:{onUIOptionsComponentReady:{listener:"{loader}.events.onReady",args:["{fluid.uiOptions.loader}","{arguments}.0"],priority:"last"}},components:{uiOptions:{type:"fluid.uiOptions",container:"{loader}.container",createOnEvent:"onUIOptionsTemplateReady",options:{events:{onUIOptionsComponentReady:"{loader}.events.onUIOptionsComponentReady"}}}}}),fluid.uiOptions.loader.finalInit=function(that){fluid.fetchResources(that.options.resources,that.events.onUIOptionsTemplateReady.fire)},fluid.uiOptions.lateRefreshViewBinder=function(that){that.refreshView=function(){that.renderer.refreshView()}},fluid.uiOptions.defaultModelMerger=function(target,source){$.extend(!0,target,source)},fluid.defaults("fluid.uiOptions.ant",{gradeNames:["fluid.rendererComponent"],model:"{uiOptions}.model",applier:"{uiOptions}.applier",events:{onUIOptionsRefresh:"{uiOptions}.events.onUIOptionsRefresh"},listeners:{onUIOptionsRefresh:"{that}.refreshView","{uiOptions}.events.contributeDefaultModel":{listener:"fluid.uiOptions.defaultModelMerger",args:["{arguments}.0","{that}.options.defaultModel"]}},preInitFunction:"fluid.uiOptions.lateRefreshViewBinder",finalInitFunction:"fluid.uiOptions.controlsFinalInit"}),fluid.defaults("fluid.uiOptions",{gradeNames:["fluid.viewComponent","autoInit"],components:{textControls:{type:"fluid.uiOptions.textControls",container:"{uiOptions}.dom.textControls",createOnEvent:"onUIOptionsMarkupReady",options:{classnameMap:"{uiEnhancer}.options.classnameMap"}},layoutControls:{type:"fluid.uiOptions.layoutControls",container:"{uiOptions}.dom.layoutControls",createOnEvent:"onUIOptionsMarkupReady",options:{classnameMap:"{uiEnhancer}.options.classnameMap"}},linksControls:{type:"fluid.uiOptions.linksControls",container:"{uiOptions}.dom.linksControls",createOnEvent:"onUIOptionsMarkupReady",options:{classnameMap:"{uiEnhancer}.options.classnameMap"}},preview:{type:"fluid.uiOptions.preview",createOnEvent:"onUIOptionsComponentReady",container:"{uiOptions}.dom.previewFrame"},eventBinder:{type:"fluid.uiOptions.eventBinder"}},selectors:{textControls:".flc-uiOptions-text-controls",layoutControls:".flc-uiOptions-layout-controls",linksControls:".flc-uiOptions-links-controls",cancel:".flc-uiOptions-cancel",reset:".flc-uiOptions-reset",save:".flc-uiOptions-save",previewFrame:".flc-uiOptions-preview-frame"},events:{onSave:null,onCancel:null,onReset:null,onAutoSave:null,modelChanged:null,onUIOptionsRefresh:null,onUIOptionsMarkupReady:null,onUIOptionsComponentReady:null,contributeDefaultModel:null},listeners:{onAutoSave:"{that}.save"},preInitFunction:"fluid.uiOptions.preInit",finalInitFunction:"fluid.uiOptions.finalInit",resources:{template:"{templateLoader}.resources.uiOptions"},autoSave:!1}),fluid.uiOptions.finishInit=function(that){var bindHandlers=function(that){var saveButton=that.locate("save");if(saveButton.length>0){saveButton.click(that.saveAndApply);var form=fluid.findForm(saveButton);$(form).submit(function(){that.saveAndApply()})}that.locate("reset").click(that.reset),that.locate("cancel").click(that.cancel)};that.container.append(that.options.resources.template.resourceText),bindHandlers(that),that.events.onUIOptionsMarkupReady.fire(that),that.defaultModel={},that.events.contributeDefaultModel.fire(that.defaultModel),that.fetch(),that.events.onUIOptionsComponentReady.fire(that)},fluid.uiOptions.preInit=function(that){that.fetch=function(){var initialModel=that.settingsStore.fetch();initialModel=$.extend(!0,{},that.defaultModel,initialModel),that.updateModel(initialModel),that.events.onUIOptionsRefresh.fire()},that.save=function(){that.events.onSave.fire(that.model.selections);var savedSelections=fluid.copy(that.model.selections);that.settingsStore.save(savedSelections)},that.saveAndApply=function(){that.save(),that.events.onUIOptionsRefresh.fire()},that.reset=function(){that.updateModel(fluid.copy(that.defaultModel)),that.events.onReset.fire(that),that.events.onUIOptionsRefresh.fire()},that.cancel=function(){that.events.onCancel.fire(),that.fetch()},that.updateModel=function(newModel){that.applier.requestChange("selections",newModel)},that.applier.modelChanged.addListener("selections",function(newModel,oldModel,changeRequest){that.events.modelChanged.fire(newModel,oldModel,changeRequest.source),that.options.autoSave&&that.events.onAutoSave.fire()})},fluid.uiOptions.finalInit=function(that){fluid.fetchResources(that.options.resources,function(){setTimeout(function(){fluid.uiOptions.finishInit(that)},1)})},fluid.defaults("fluid.uiOptions.eventBinder",{gradeNames:["fluid.eventedComponent","autoInit"]});var optionsToLabelMap=function(that){fluid.each(that.options.controlValues,function(item,key){that.applier.requestChange("labelMap."+key,{values:that.options.controlValues[key],names:that.options.strings[key],classes:fluid.get(that,"options.classnameMap."+key)})})};fluid.uiOptions.createSliderNode=function(that,item,type,options){return{decorators:{type:"fluid",func:type,options:{listeners:{modelChanged:function(value){that.applier.requestChange("selections."+item,value)}},model:{min:that.options[item].min,max:that.options[item].max,value:that.model.selections[item]},sliderOptions:that.options[item].sliderOptions}}}},fluid.uiOptions.controlsFinalInit=function(that){optionsToLabelMap(that)},fluid.demands("fluid.uiOptions.selectDecorator","fluid.uiOptions",{container:"{arguments}.0"}),fluid.defaults("fluid.uiOptions.selectDecorator",{gradeNames:["fluid.viewComponent","autoInit"],finalInitFunction:"fluid.uiOptions.selectDecorator.finalInit",styles:{preview:"fl-preview-theme"}}),fluid.uiOptions.selectDecorator.finalInit=function(that){fluid.each($("option",that.container),function(option){var styles=that.options.styles;$(option).addClass(styles.preview+" "+styles[fluid.value(option)])})},fluid.defaults("fluid.uiOptions.textControls",{gradeNames:["fluid.uiOptions.ant","autoInit"],defaultModel:{textFont:"default",theme:"default",textSize:1,lineSpacing:1},strings:{textFont:["Default","Times New Roman","Comic Sans","Arial","Verdana"],theme:["Default","Black on white","White on black","Black on yellow","Yellow on black"]},controlValues:{textFont:["default","times","comic","arial","verdana"],theme:["default","bw","wb","by","yb"]},textSize:{min:1,max:2,sliderOptions:{orientation:"horizontal",step:.1}},lineSpacing:{min:1,max:2,sliderOptions:{orientation:"horizontal",step:.1}},selectors:{textFont:".flc-uiOptions-text-font",theme:".flc-uiOptions-theme",textSize:".flc-uiOptions-min-text-size",lineSpacing:".flc-uiOptions-line-spacing"},produceTree:"fluid.uiOptions.textControls.produceTree",resources:{template:"{templateLoader}.resources.textControls"}}),fluid.uiOptions.textControls.produceTree=function(that){var tree={};for(var item in that.model.selections)"textFont"===item||"theme"===item?tree[item]={optionnames:"${labelMap."+item+".names}",optionlist:"${labelMap."+item+".values}",selection:"${selections."+item+"}",decorators:{type:"fluid",func:"fluid.uiOptions.selectDecorator",options:{styles:that.options.classnameMap[item]}}}:("textSize"===item||"lineSpacing"===item)&&(tree[item]=fluid.uiOptions.createSliderNode(that,item,"fluid.textfieldSlider"));return tree},fluid.defaults("fluid.uiOptions.layoutControls",{gradeNames:["fluid.uiOptions.ant","autoInit"],defaultModel:{layout:!1,toc:!1},selectors:{layout:".flc-uiOptions-layout",toc:".flc-uiOptions-toc"},protoTree:{toc:"${selections.toc}",layout:"${selections.layout}"},resources:{template:"{templateLoader}.resources.layoutControls"}}),fluid.defaults("fluid.uiOptions.linksControls",{gradeNames:["fluid.uiOptions.ant","autoInit"],defaultModel:{links:!1,inputsLarger:!1},selectors:{links:".flc-uiOptions-links",inputsLarger:".flc-uiOptions-inputs-larger"},protoTree:{links:"${selections.links}",inputsLarger:"${selections.inputsLarger}"},resources:{template:"{templateLoader}.resources.linksControls"}}),fluid.defaults("fluid.uiOptions.preview",{gradeNames:["fluid.viewComponent","autoInit"],components:{enhancer:{type:"fluid.uiEnhancer",createOnEvent:"onReady",options:{settingsStore:{type:"fluid.uiEnhancer.tempStore"}}},eventBinder:{type:"fluid.uiOptions.preview.eventBinder",createOnEvent:"onReady"},templateLoader:"{templateLoader}"},invokers:{updateModel:{funcName:"fluid.uiOptions.preview.updateModel",args:["{preview}","{uiOptions}.model.selections"]}},finalInitFunction:"fluid.uiOptions.preview.finalInit",events:{onReady:null},templateUrl:"%prefix/UIOptionsPreview.html"}),fluid.uiOptions.preview.updateModel=function(that,selections){setTimeout(function(){that.enhancer&&that.enhancer.updateModel(selections)},0)},fluid.uiOptions.preview.finalInit=function(that){var templateUrl=that.templateLoader.transformURL(that.options.templateUrl);that.container.load(function(){that.enhancerContainer=$("body",that.container.contents()),that.events.onReady.fire()}),that.container.attr("src",templateUrl)},fluid.demands("fluid.uiEnhancer","fluid.uiOptions.preview",{funcName:"fluid.uiEnhancer",args:["{preview}.enhancerContainer","{options}"]}),fluid.defaults("fluid.uiOptions.preview.eventBinder",{gradeNames:["fluid.eventedComponent","autoInit"]}),fluid.demands("fluid.uiOptions.preview.eventBinder",["fluid.uiOptions.preview","fluid.uiOptions"],{options:{listeners:{"{uiOptions}.events.modelChanged":"{preview}.updateModel"}}})}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.registerNamespace("fluid.dom"),fluid.dom.getDocumentHeight=function(dokkument){var body=$("body",dokkument)[0];return body.offsetHeight},fluid.registerNamespace("fluid.uiOptions.fatPanel"),fluid.defaults("fluid.uiOptions.fatPanel",{gradeNames:["fluid.uiOptions.inline"],events:{afterRender:null,onReady:null},listeners:{onReady:{listener:"fluid.uiOptions.fatPanel.bindEvents",args:["{arguments}.0.uiOptions","{uiEnhancer}","{iframeRenderer}.iframeEnhancer","{fatPanel}"]}},selectors:{iframe:".flc-uiOptions-iframe"},components:{pageEnhancer:"{uiEnhancer}",slidingPanel:{type:"fluid.slidingPanel",container:"{fatPanel}.container",options:{invokers:{operateShow:{funcName:"fluid.uiOptions.fatPanel.showPanel"},operateHide:{funcName:"fluid.uiOptions.fatPanel.hidePanel"}}},createOnEvent:"afterRender"},iframeRenderer:{type:"fluid.uiOptions.fatPanel.renderIframe",container:"{fatPanel}.dom.iframe",options:{markupProps:{src:"%prefix/FatPanelUIOptionsFrame.html"},events:{afterRender:"{fatPanel}.events.afterRender"},components:{iframeEnhancer:{type:"fluid.uiEnhancer",container:"{iframeRenderer}.renderUIOContainer",createOnEvent:"afterRender",options:{components:{settingsStore:"{pageEnhancer}.settingsStore"},jQuery:"{iframeRenderer}.jQuery",tocTemplate:"{pageEnhancer}.options.tocTemplate"}}}}}},derivedDefaults:{uiOptionsLoader:{options:{events:{templatesAndIframeReady:{events:{iframeReady:"{fatPanel}.events.afterRender",templateReady:"onUIOptionsTemplateReady"}},onReady:"{fatPanel}.events.onReady"}}},uiOptions:{createOnEvent:"templatesAndIframeReady",container:"{iframeRenderer}.renderUIOContainer",options:{model:"{fatPanel}.model",applier:"{fatPanel}.applier",events:{onSignificantDOMChange:null},components:{iframeRenderer:"{fatPanel}.iframeRenderer",settingsStore:"{uiEnhancer}.settingsStore",preview:{type:"fluid.emptySubcomponent"},tabs:{type:"fluid.tabs",container:"{uiOptions}.container",createOnEvent:"onUIOptionsComponentReady",options:{listeners:{tabsshow:{listener:"{uiOptions}.events.onSignificantDOMChange"}}}}}}}},uiOptionsTransform:{config:{"!*.iframeRenderer.*.iframeEnhancer.options":"outerEnhancerOptions","*.slidingPanel":"slidingPanel","*.iframeRenderer":"iframeRenderer","*.iframeRenderer.options.prefix":"prefix","selectors.iframe":"iframe"}}}),fluid.uiOptions.fatPanel.optionsProcessor=function(options){var enhancerOptions=fluid.get(fluid,"staticEnvironment.uiEnhancer.options.originalUserOptions");return options.outerEnhancerOptions=enhancerOptions,options.nickName="fatPanel",options},fluid.uiOptions.inline.makeCreator("fluid.uiOptions.fatPanel",fluid.uiOptions.fatPanel.optionsProcessor),fluid.defaults("fluid.uiOptions.fatPanel.renderIframe",{gradeNames:["fluid.viewComponent","autoInit"],finalInitFunction:"fluid.uiOptions.fatPanel.renderIframe.finalInit",events:{afterRender:null},styles:{containerFlex:"fl-container-flex",container:"fl-uiOptions-fatPanel-iframe"},prefix:"./",markupProps:{style:"overflow-x:hidden; overflow-y:auto;","class":"flc-iframe",src:"%prefix/uiOptionsIframe.html"}}),fluid.uiOptions.fatPanel.renderIframe.finalInit=function(that){var styles=that.options.styles;that.options.markupProps.src=fluid.stringTemplate(that.options.markupProps.src,{"prefix/":that.options.prefix}),that.iframeSrc=that.options.markupProps.src,that.iframe=$("<iframe/>"),that.iframe.load(function(){var iframeWindow=that.iframe[0].contentWindow;that.iframeDocument=iframeWindow.document,that.jQuery=iframeWindow.jQuery,that.renderUIOContainer=that.jQuery("body",that.iframeDocument),that.jQuery(that.iframeDocument).ready(that.events.afterRender.fire)}),that.iframe.attr(that.options.markupProps),that.iframe.addClass(styles.containerFlex),that.iframe.addClass(styles.container),that.iframe.hide(),that.iframe.appendTo(that.container)},fluid.uiOptions.fatPanel.updateView=function(uiOptions,uiEnhancer){uiEnhancer.updateFromSettingsStore(),uiOptions.events.onSignificantDOMChange.fire()},fluid.uiOptions.fatPanel.bindEvents=function(uiOptions,uiEnhancer,iframeEnhancer,fatPanel){fatPanel.slidingPanel.events.afterPanelShow.addListener(function(){fluid.uiOptions.fatPanel.updateView(uiOptions,iframeEnhancer)}),uiOptions.events.modelChanged.addListener(function(model){uiEnhancer.updateModel(model.selections),uiOptions.save()}),uiOptions.events.onReset.addListener(function(uiOptions){fluid.uiOptions.fatPanel.updateView(uiOptions,iframeEnhancer)}),uiOptions.events.onSignificantDOMChange.addListener(function(){var dokkument=uiOptions.container[0].ownerDocument,height=fluid.dom.getDocumentHeight(dokkument),iframe=fatPanel.iframeRenderer.iframe,attrs={height:height+15},panel=fatPanel.slidingPanel.locate("panel");panel.css({height:""}),iframe.animate(attrs,400)}),fatPanel.slidingPanel.events.afterPanelHide.addListener(function(){fatPanel.iframeRenderer.iframe.height(0),fatPanel.iframeRenderer.iframe.hide()}),fatPanel.slidingPanel.events.onPanelShow.addListener(function(){fatPanel.iframeRenderer.iframe.show()})},fluid.uiOptions.fatPanel.hidePanel=function(panel,callback){$(panel).animate({height:0},{duration:400,complete:callback})},fluid.uiOptions.fatPanel.showPanel=function(panel,callback){setTimeout(callback,1)}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.uiOptions.fullNoPreview",{gradeNames:["fluid.uiOptions.inline"],container:"{fullNoPreview}.container",derivedDefaults:{templateLoader:{options:{templates:{uiOptions:"%prefix/FullNoPreviewUIOptions.html"}}},uiOptions:{options:{components:{preview:{type:"fluid.emptySubcomponent"}},listeners:{onReset:function(uiOptions){uiOptions.save()}}}}}}),fluid.uiOptions.inline.makeCreator("fluid.uiOptions.fullNoPreview",fluid.identity)}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.uiOptions.fullPreview",{gradeNames:["fluid.uiOptions.inline"],container:"{fullPreview}.container",uiOptionsTransform:{config:{"!*.uiOptionsLoader.*.uiOptions.*.preview.*.enhancer.options":"outerPreviewEnhancerOptions"}},derivedDefaults:{templateLoader:{options:{templates:{uiOptions:"%prefix/FullPreviewUIOptions.html"}}}}}),fluid.uiOptions.inline.makeCreator("fluid.uiOptions.fullPreview",function(options){var enhancerOptions=fluid.get(fluid,"staticEnvironment.uiEnhancer.options.originalUserOptions");return options.outerPreviewEnhancerOptions=enhancerOptions,options})}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.slidingPanel",{gradeNames:["fluid.viewComponent","autoInit"],selectors:{panel:".flc-slidingPanel-panel",toggleButton:".flc-slidingPanel-toggleButton"},strings:{showText:"+ Show Display Preferences",hideText:"- Hide"},events:{onPanelHide:null,onPanelShow:null,afterPanelHide:null,afterPanelShow:null},finalInitFunction:"fluid.slidingPanel.finalInit",invokers:{operateHide:"fluid.slidingPanel.slideUp",operateShow:"fluid.slidingPanel.slideDown"},model:{isShowing:!1},methods:{showPanel:{finalState:!0,name:"Show"},hidePanel:{finalState:!1,name:"Hide"}}}),fluid.slidingPanel.slideUp=function(element,callback,duration){$(element).slideUp(duration||"400",callback)},fluid.slidingPanel.slideDown=function(element,callback,duration){$(element).slideDown(duration||"400",callback)},fluid.slidingPanel.finalInit=function(that){fluid.each(that.options.methods,function(method,methodName){that[methodName]=function(){that.events["onPanel"+method.name].fire(that),that.applier.requestChange("isShowing",method.finalState),that.refreshView(),that["operate"+method.name](that.locate("panel"),that.events["afterPanel"+method.name].fire)}}),that.togglePanel=function(){that[that.model.isShowing?"hidePanel":"showPanel"]()},that.setPanelHeight=function(newHeight){that.locate("panel").height(newHeight)},that.refreshView=function(){that.locate("toggleButton").text(that.options.strings[that.model.isShowing?"hideText":"showText"])},that.locate("toggleButton").click(that.togglePanel),that.refreshView()}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){var animateDisplay=function(elm,animation,defaultAnimation){animation=animation?animation:defaultAnimation,elm.animate(animation.params,animation.duration,animation.callback)},animateProgress=function(elm,width,speed){elm.queue("fx",[]),elm.animate({width:width,queue:!1},speed)},showProgress=function(that,animation){animation===!1?that.displayElement.show():animateDisplay(that.displayElement,animation,that.options.showAnimation)},hideProgress=function(that,delay,animation){if(delay=null===delay||isNaN(delay)?that.options.delay:delay){setTimeout(function(){hideProgress(that,0,animation)},delay)}else animation===!1?that.displayElement.hide():animateDisplay(that.displayElement,animation,that.options.hideAnimation)},updateWidth=function(that,newWidth,dontAnimate){dontAnimate=dontAnimate||!1;var currWidth=that.indicator.width(),direction=that.options.animate;newWidth>currWidth&&("both"===direction||"forward"===direction)&&!dontAnimate?animateProgress(that.indicator,newWidth,that.options.speed):currWidth>newWidth&&("both"===direction||"backward"===direction)&&!dontAnimate?animateProgress(that.indicator,newWidth,that.options.speed):that.indicator.width(newWidth)},percentToPixels=function(that,percent){return Math.round(Math.min(percent,100)*that.progressBar.innerWidth()/100)},refreshRelativeWidth=function(that){var pixels=Math.max(percentToPixels(that,parseFloat(that.storedPercent)),that.options.minWidth);updateWidth(that,pixels,!0)},initARIA=function(ariaElement,ariaBusyText){ariaElement.attr("role","progressbar"),ariaElement.attr("aria-valuemin","0"),ariaElement.attr("aria-valuemax","100"),ariaElement.attr("aria-valuenow","0"),ariaBusyText&&ariaElement.attr("aria-valuetext",""),ariaElement.attr("aria-busy","false")},updateARIA=function(that,percent){var str=that.options.strings,busy=100>percent&&percent>0;if(that.ariaElement.attr("aria-busy",busy),that.ariaElement.attr("aria-valuenow",percent),str.ariaBusyText)if(busy){var busyString=fluid.stringTemplate(str.ariaBusyText,{percentComplete:percent});that.ariaElement.attr("aria-valuetext",busyString)}else 100===percent&&that.ariaElement.attr("aria-valuetext",str.ariaDoneText)},updateText=function(label,value){label.html(value)},repositionIndicator=function(that){that.indicator.css("top",that.progressBar.position().top).css("left",0).height(that.progressBar.height()),refreshRelativeWidth(that)},updateProgress=function(that,percent,labelText,animationForShow){if(showProgress(that,animationForShow),null!==percent){that.storedPercent=percent;var pixels=Math.max(percentToPixels(that,parseFloat(percent)),that.options.minWidth);updateWidth(that,pixels)}null!==labelText&&updateText(that.label,labelText),that.ariaElement&&updateARIA(that,percent)},setupProgress=function(that){that.displayElement=that.locate("displayElement"),that.options.initiallyHidden&&that.displayElement.hide(),that.progressBar=that.locate("progressBar"),that.label=that.locate("label"),that.indicator=that.locate("indicator"),that.ariaElement=that.locate("ariaElement"),that.indicator.width(that.options.minWidth),that.storedPercent=0,that.ariaElement&&initARIA(that.ariaElement,that.options.strings.ariaBusyText),that.options.hideAnimation.callback&&that.events.afterProgressHidden.addListener(that.options.hideAnimation.callback),that.options.hideAnimation.callback=that.events.afterProgressHidden.fire,that.options.showAnimation.callback&&that.events.onProgressBegin.addListener(that.options.showAnimation.callback),that.options.showAnimation.callback=that.events.onProgressBegin.fire};fluid.progress=function(container,options){var that=fluid.initView("fluid.progress",container,options);return setupProgress(that),that.show=function(animation){showProgress(that,animation)},that.hide=function(delay,animation){hideProgress(that,delay,animation)},that.update=function(percentage,labelValue,animationForShow){updateProgress(that,percentage,labelValue,animationForShow)},that.refreshView=function(){repositionIndicator(that)},that},fluid.defaults("fluid.progress",{gradeNames:"fluid.viewComponent",selectors:{displayElement:".flc-progress",progressBar:".flc-progress-bar",indicator:".flc-progress-indicator",label:".flc-progress-label",ariaElement:".flc-progress-bar"},strings:{ariaBusyText:"Progress is %percentComplete percent complete",ariaDoneText:"Progress is complete."},showAnimation:{params:{opacity:"show"},duration:"slow",callback:null},hideAnimation:{params:{opacity:"hide"},duration:"slow",callback:null},events:{onProgressBegin:null,afterProgressHidden:null},minWidth:5,delay:0,speed:200,animate:"forward",initiallyHidden:!0,updatePosition:!1})}(jQuery,fluid_1_5),function($){var increments=0;$.widget("ui.tooltip",{options:{items:"[title]",content:function(){return $(this).attr("title")},position:{my:"left center",at:"right center",offset:"15 0"}},_create:function(){var self=this;this.tooltip=$("<div></div>").attr("id","ui-tooltip-"+increments++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content").appendTo(document.body).hide(),this.tooltipContent=$("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip),this.opacity=this.tooltip.css("opacity"),this.element.bind("focus.tooltip mouseover.tooltip",function(event){self.open(event)}).bind("blur.tooltip mouseout.tooltip",function(event){self.close(event)})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.tooltip.remove(),$.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.element.pushStack(this.tooltip.get())},open:function(event){var target=$(event&&event.target||this.element).closest(this.options.items);if(!this.current||this.current[0]!=target[0]){var self=this;this.current=target,this.currentTitle=target.attr("title");var content=this.options.content.call(target[0],function(response){setTimeout(function(){self.current==target&&self._show(event,target,response)},13)});content&&self._show(event,target,content)}},_show:function(event,target,content){content&&(target.attr("title",""),this.options.disabled||(this.tooltipContent.html(content),this.tooltip.css({top:0,left:0}).show().position($.extend({of:target},this.options.position)).hide(),this.tooltip.attr("aria-hidden","false"),target.attr("aria-describedby",this.tooltip.attr("id")),this.tooltip.stop(!1,!0).fadeIn(),this._trigger("open",event)))},close:function(event){if(this.current){var current=this.current;this.current=null,current.attr("title",this.currentTitle),this.options.disabled||(current.removeAttr("aria-describedby"),this.tooltip.attr("aria-hidden","true"),this.tooltip.stop(!1,!0).fadeOut(),this._trigger("close",event))}}})}(jQuery);var fluid_1_5=fluid_1_5||{};!function($,fluid){var createContentFunc=function(content){return"function"==typeof content?content:function(){return content}},setup=function(that){that.container.tooltip({content:createContentFunc(that.options.content),position:that.options.position,items:that.options.items,open:function(event){var tt=$(event.target).tooltip("widget");tt.stop(!1,!0),tt.hide(),that.options.delay?tt.delay(that.options.delay).fadeIn("default",that.events.afterOpen.fire()):(tt.show(),that.events.afterOpen.fire())},close:function(event){var tt=$(event.target).tooltip("widget");tt.stop(!1,!0),tt.hide(),tt.clearQueue(),that.events.afterClose.fire()}}),that.elm=that.container.tooltip("widget"),that.elm.addClass(that.options.styles.tooltip)};fluid.tooltip=function(container,options){var that=fluid.initView("fluid.tooltip",container,options);return that.updateContent=function(content){that.container.tooltip("option","content",createContentFunc(content)),that.container.data("tooltip").tooltip.html(content)},that.destroy=function(){that.container.tooltip("destroy")},that.open=function(){that.container.tooltip("open")},that.close=function(){that.container.tooltip("close")},setup(that),that},fluid.defaults("fluid.tooltip",{gradeNames:["fluid.viewComponent"],styles:{tooltip:""},events:{afterOpen:null,afterClose:null
},content:"",position:{my:"left top",at:"left bottom",offset:"0 5"},items:"*",delay:300})}(jQuery,fluid_1_5),function($){function both(val){return"object"==typeof val?val:{top:val,left:val}}var $scrollTo=$.scrollTo=function(target,duration,settings){$(window).scrollTo(target,duration,settings)};$scrollTo.defaults={axis:"xy",duration:parseFloat($.fn.jquery)>=1.3?0:1},$scrollTo.window=function(scope){return $(window)._scrollable()},$.fn._scrollable=function(){return this.map(function(){var elem=this,isWin=!elem.nodeName||-1!=$.inArray(elem.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!isWin)return elem;var doc=(elem.contentWindow||elem).document||elem.ownerDocument||elem;return $.browser.safari||"BackCompat"==doc.compatMode?doc.body:doc.documentElement})},$.fn.scrollTo=function(target,duration,settings){return"object"==typeof duration&&(settings=duration,duration=0),"function"==typeof settings&&(settings={onAfter:settings}),"max"==target&&(target=9e9),settings=$.extend({},$scrollTo.defaults,settings),duration=duration||settings.speed||settings.duration,settings.queue=settings.queue&&settings.axis.length>1,settings.queue&&(duration/=2),settings.offset=both(settings.offset),settings.over=both(settings.over),this._scrollable().each(function(){function animate(callback){$elem.animate(attr,duration,settings.easing,callback&&function(){callback.call(this,target,settings)})}var toff,elem=this,$elem=$(elem),targ=target,attr={},win=$elem.is("html,body");switch(typeof targ){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);case"object":(targ.is||targ.style)&&(toff=(targ=$(targ)).offset())}$.each(settings.axis.split(""),function(i,axis){var Pos="x"==axis?"Left":"Top",pos=Pos.toLowerCase(),key="scroll"+Pos,old=elem[key],max=$scrollTo.max(elem,axis);if(toff)attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]),settings.margin&&(attr[key]-=parseInt(targ.css("margin"+Pos))||0,attr[key]-=parseInt(targ.css("border"+Pos+"Width"))||0),attr[key]+=settings.offset[pos]||0,settings.over[pos]&&(attr[key]+=targ["x"==axis?"width":"height"]()*settings.over[pos]);else{var val=targ[pos];attr[key]=val.slice&&"%"==val.slice(-1)?parseFloat(val)/100*max:val}/^\d+$/.test(attr[key])&&(attr[key]=attr[key]<=0?0:Math.min(attr[key],max)),!i&&settings.queue&&(old!=attr[key]&&animate(settings.onAfterFirst),delete attr[key])}),animate(settings.onAfter)}).end()},$scrollTo.max=function(elem,axis){var Dim="x"==axis?"Width":"Height",scroll="scroll"+Dim;if(!$(elem).is("html,body"))return elem[scroll]-$(elem)[Dim.toLowerCase()]();var size="client"+Dim,html=elem.ownerDocument.documentElement,body=elem.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[size],body[size])}}(jQuery),function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);return name&&(radios=form?$(form).find("[name='"+name+"']"):$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form})),radios};$.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",formResetHandler),"boolean"!=typeof this.options.disabled&&(this.options.disabled=this.element.attr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var self=this,options=this.options,toggleButton="checkbox"===this.type||"radio"===this.type,hoverClass="ui-state-hover"+(toggleButton?"":" ui-state-active"),focusClass="ui-state-focus";null===options.label&&(options.label=this.buttonElement.html()),this.element.is(":disabled")&&(options.disabled=!0),this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter.button",function(){options.disabled||($(this).addClass("ui-state-hover"),this===lastActive&&$(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){options.disabled||$(this).removeClass(hoverClass)}).bind("click.button",function(event){options.disabled&&(event.preventDefault(),event.stopImmediatePropagation())}),this.element.bind("focus.button",function(){self.buttonElement.addClass(focusClass)}).bind("blur.button",function(){self.buttonElement.removeClass(focusClass)}),toggleButton&&(this.element.bind("change.button",function(){clickDragged||self.refresh()}),this.buttonElement.bind("mousedown.button",function(event){options.disabled||(clickDragged=!1,startXPos=event.pageX,startYPos=event.pageY)}).bind("mouseup.button",function(event){options.disabled||(startXPos!==event.pageX||startYPos!==event.pageY)&&(clickDragged=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return options.disabled||clickDragged?!1:($(this).toggleClass("ui-state-active"),void self.buttonElement.attr("aria-pressed",self.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(options.disabled||clickDragged)return!1;$(this).addClass("ui-state-active"),self.buttonElement.attr("aria-pressed",!0);var radio=self.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",!1)}):(this.buttonElement.bind("mousedown.button",function(){return options.disabled?!1:($(this).addClass("ui-state-active"),lastActive=this,void $(document).one("mouseup",function(){lastActive=null}))}).bind("mouseup.button",function(){return options.disabled?!1:void $(this).removeClass("ui-state-active")}).bind("keydown.button",function(event){return options.disabled?!1:void((event.keyCode==$.ui.keyCode.SPACE||event.keyCode==$.ui.keyCode.ENTER)&&$(this).addClass("ui-state-active"))}).bind("keyup.button",function(){$(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(event){event.keyCode===$.ui.keyCode.SPACE&&$(this).click()})),this._setOption("disabled",options.disabled),this._resetButton()},_determineButtonType:function(){if(this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type){var ancestor=this.element.parents().filter(":last"),labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector),this.buttonElement.length||(ancestor=ancestor.length?ancestor.siblings():this.element.siblings(),this.buttonElement=ancestor.filter(labelSelector),this.buttonElement.length||(this.buttonElement=ancestor.find(labelSelector))),this.element.addClass("ui-helper-hidden-accessible");var checked=this.element.is(":checked");checked&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",checked)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),$.Widget.prototype.destroy.call(this)},_setOption:function(key,value){return $.Widget.prototype._setOption.apply(this,arguments),"disabled"===key?void(value?this.element.attr("disabled",!0):this.element.removeAttr("disabled")):void this._resetButton()},refresh:function(){var isDisabled=this.element.is(":disabled");isDisabled!==this.options.disabled&&this._setOption("disabled",isDisabled),"radio"===this.type?radioGroup(this.element[0]).each(function(){$(this).is(":checked")?$(this).button("widget").addClass("ui-state-active").attr("aria-pressed",!0):$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",!1)}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",!0):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",!1))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];icons.primary||icons.secondary?(this.options.text&&buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary")),icons.primary&&buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>"),icons.secondary&&buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>"),this.options.text||(buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||buttonElement.attr("title",buttonText))):buttonClasses.push("ui-button-text-only"),buttonElement.addClass(buttonClasses.join(" "))}}),$.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){"disabled"===key&&this.buttons.button("option",key,value),$.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var ltr="ltr"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(ltr?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(ltr?"ui-corner-right":"ui-corner-left").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),$.Widget.prototype.destroy.call(this)}})}(jQuery);var mejs=mejs||{};mejs.version="2.9.1",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo"]}]},mejs.Utility={encodeUrl:function(url){return encodeURIComponent(url)},escapeHTML:function(s){return s.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(url){var el=document.createElement("div");return el.innerHTML='<a href="'+this.escapeHTML(url)+'">x</a>',el.firstChild.href},getScriptPath:function(scriptNames){for(var j,script,i=0,path="",name="",scripts=document.getElementsByTagName("script"),il=scripts.length,jl=scriptNames.length;il>i;i++){for(script=scripts[i].src,j=0;jl>j;j++)if(name=scriptNames[j],script.indexOf(name)>-1){path=script.substring(0,script.indexOf(name));break}if(""!==path)break}return path},secondsToTimeCode:function(time,forceHours,showFrameCount,fps){"undefined"==typeof showFrameCount?showFrameCount=!1:"undefined"==typeof fps&&(fps=25);var hours=Math.floor(time/3600)%24,minutes=Math.floor(time/60)%60,seconds=Math.floor(time%60),frames=Math.floor((time%1*fps).toFixed(3)),result=(forceHours||hours>0?(10>hours?"0"+hours:hours)+":":"")+(10>minutes?"0"+minutes:minutes)+":"+(10>seconds?"0"+seconds:seconds)+(showFrameCount?":"+(10>frames?"0"+frames:frames):"");return result},timeCodeToSeconds:function(hh_mm_ss_ff,forceHours,showFrameCount,fps){"undefined"==typeof showFrameCount?showFrameCount=!1:"undefined"==typeof fps&&(fps=25);var tc_array=hh_mm_ss_ff.split(":"),tc_hh=parseInt(tc_array[0],10),tc_mm=parseInt(tc_array[1],10),tc_ss=parseInt(tc_array[2],10),tc_ff=0,tc_in_seconds=0;return showFrameCount&&(tc_ff=parseInt(tc_array[3])/fps),tc_in_seconds=3600*tc_hh+60*tc_mm+tc_ss+tc_ff},removeSwf:function(id){var obj=document.getElementById(id);obj&&"OBJECT"==obj.nodeName&&(mejs.MediaFeatures.isIE?(obj.style.display="none",function(){4==obj.readyState?mejs.Utility.removeObjectInIE(id):setTimeout(arguments.callee,10)}()):obj.parentNode.removeChild(obj))},removeObjectInIE:function(id){var obj=document.getElementById(id);if(obj){for(var i in obj)"function"==typeof obj[i]&&(obj[i]=null);obj.parentNode.removeChild(obj)}}},mejs.PluginDetector={hasPluginVersion:function(plugin,v){var pv=this.plugins[plugin];return v[1]=v[1]||0,v[2]=v[2]||0,pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(p,pluginName,mimeType,activeX,axDetect){this.plugins[p]=this.detectPlugin(pluginName,mimeType,activeX,axDetect)},detectPlugin:function(pluginName,mimeType,activeX,axDetect){var description,i,ax,version=[0,0,0];if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[pluginName]){if(description=this.nav.plugins[pluginName].description,description&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[mimeType]||this.nav.mimeTypes[mimeType].enabledPlugin))for(version=description.replace(pluginName,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),i=0;i<version.length;i++)version[i]=parseInt(version[i].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{ax=new ActiveXObject(activeX),ax&&(version=axDetect(ax))}catch(e){}return version}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(ax){var version=[],d=ax.GetVariable("$version");return d&&(d=d.split(" ")[1].split(","),version=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]),version}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(ax){var v=[0,0,0,0],loopMatch=function(ax,v,i,n){for(;ax.isVersionSupported(v[0]+"."+v[1]+"."+v[2]+"."+v[3]);)v[i]+=n;v[i]-=n};return loopMatch(ax,v,0,1),loopMatch(ax,v,1,1),loopMatch(ax,v,2,1e4),loopMatch(ax,v,2,1e3),loopMatch(ax,v,2,100),loopMatch(ax,v,2,10),loopMatch(ax,v,2,1),loopMatch(ax,v,3,1),v}),mejs.MediaFeatures={init:function(){var i,v,t=this,d=document,nav=mejs.PluginDetector.nav,ua=mejs.PluginDetector.ua.toLowerCase(),html5Elements=["source","track","audio","video"];t.isiPad=null!==ua.match(/ipad/i),t.isiPhone=null!==ua.match(/iphone/i),t.isiOS=t.isiPhone||t.isiPad,t.isAndroid=null!==ua.match(/android/i),t.isBustedAndroid=null!==ua.match(/android 2\.[12]/),t.isIE=-1!=nav.appName.toLowerCase().indexOf("microsoft"),t.isChrome=null!==ua.match(/chrome/gi),t.isFirefox=null!==ua.match(/firefox/gi),t.isWebkit=null!==ua.match(/webkit/gi),t.isGecko=null!==ua.match(/gecko/gi)&&!t.isWebkit,t.isOpera=null!==ua.match(/opera/gi),t.hasTouch="ontouchstart"in window;for(i=0;i<html5Elements.length;i++)v=document.createElement(html5Elements[i]);t.supportsMediaTag="undefined"!=typeof v.canPlayType||t.isBustedAndroid,t.hasSemiNativeFullScreen="undefined"!=typeof v.webkitEnterFullscreen,t.hasWebkitNativeFullScreen="undefined"!=typeof v.webkitRequestFullScreen,t.hasMozNativeFullScreen="undefined"!=typeof v.mozRequestFullScreen,t.hasTrueNativeFullScreen=t.hasWebkitNativeFullScreen||t.hasMozNativeFullScreen,t.nativeFullScreenEnabled=t.hasTrueNativeFullScreen,t.hasMozNativeFullScreen&&(t.nativeFullScreenEnabled=v.mozFullScreenEnabled),this.isChrome&&(t.hasSemiNativeFullScreen=!1),t.hasTrueNativeFullScreen&&(t.fullScreenEventName=t.hasWebkitNativeFullScreen?"webkitfullscreenchange":"mozfullscreenchange",t.isFullScreen=function(){return v.mozRequestFullScreen?d.mozFullScreen:v.webkitRequestFullScreen?d.webkitIsFullScreen:void 0},t.requestFullScreen=function(el){t.hasWebkitNativeFullScreen?el.webkitRequestFullScreen():t.hasMozNativeFullScreen&&el.mozRequestFullScreen()},t.cancelFullScreen=function(){t.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():t.hasMozNativeFullScreen&&document.mozCancelFullScreen()}),t.hasSemiNativeFullScreen&&ua.match(/mac os x 10_5/i)&&(t.hasNativeFullScreen=!1,t.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(time){this.currentTime=time},setMuted:function(muted){this.muted=muted},setVolume:function(volume){this.volume=volume},stop:function(){this.pause()},setSrc:function(url){for(var existingSources=this.getElementsByTagName("source");existingSources.length>0;)this.removeChild(existingSources[0]);if("string"==typeof url)this.src=url;else{var i,media;for(i=0;i<url.length;i++)media=url[i],this.canPlayType(media.type)&&(this.src=media.src)}},setVideoSize:function(width,height){this.width=width,this.height=height}},mejs.PluginMediaElement=function(pluginid,pluginType,mediaUrl){this.id=pluginid,this.pluginType=pluginType,this.src=mediaUrl,this.events={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(type){var i,j,pluginInfo,pluginVersions=mejs.plugins[this.pluginType];for(i=0;i<pluginVersions.length;i++)if(pluginInfo=pluginVersions[i],mejs.PluginDetector.hasPluginVersion(this.pluginType,pluginInfo.version))for(j=0;j<pluginInfo.types.length;j++)if(type==pluginInfo.types[j])return!0;return!1},positionFullscreenButton:function(x,y,visibleAndAbove){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(x,y,visibleAndAbove)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(url){if("string"==typeof url)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(url)),this.src=mejs.Utility.absolutizeUrl(url);else{var i,media;for(i=0;i<url.length;i++)media=url[i],this.canPlayType(media.type)&&(this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(media.src)),this.src=mejs.Utility.absolutizeUrl(url))}},setCurrentTime:function(time){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.seekTo(time):this.pluginApi.setCurrentTime(time),this.currentTime=time)},setVolume:function(volume){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*volume):this.pluginApi.setVolume(volume),this.volume=volume)},setMuted:function(muted){null!=this.pluginApi&&("youtube"==this.pluginType?(muted?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=muted,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(muted),this.muted=muted)},setVideoSize:function(width,height){this.pluginElement.style&&(this.pluginElement.style.width=width+"px",this.pluginElement.style.height=height+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(width,height)},setFullscreen:function(fullscreen){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(fullscreen)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(eventName,callback,bubble){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(callback)},removeEventListener:function(eventName,callback){if(!eventName)return this.events={},!0;var callbacks=this.events[eventName];if(!callbacks)return!0;if(!callback)return this.events[eventName]=[],!0;for(i=0;i<callbacks.length;i++)if(callbacks[i]===callback)return this.events[eventName].splice(i,1),!0;return!1},dispatchEvent:function(eventName){var i,args,callbacks=this.events[eventName];if(callbacks)for(args=Array.prototype.slice.call(arguments,1),i=0;i<callbacks.length;i++)callbacks[i].apply(null,args)},attributes:{},hasAttribute:function(name){return name in this.attributes},removeAttribute:function(name){delete this.attributes[name]},getAttribute:function(name){return this.hasAttribute(name)?this.attributes[name]:""},setAttribute:function(name,value){this.attributes[name]=value},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(id,pluginMediaElement,htmlMediaElement){this.pluginMediaElements[id]=pluginMediaElement,this.htmlMediaElements[id]=htmlMediaElement},initPlugin:function(id){var pluginMediaElement=this.pluginMediaElements[id],htmlMediaElement=this.htmlMediaElements[id];if(pluginMediaElement){switch(pluginMediaElement.pluginType){case"flash":pluginMediaElement.pluginElement=pluginMediaElement.pluginApi=document.getElementById(id);break;case"silverlight":pluginMediaElement.pluginElement=document.getElementById(pluginMediaElement.id),pluginMediaElement.pluginApi=pluginMediaElement.pluginElement.Content.MediaElementJS}null!=pluginMediaElement.pluginApi&&pluginMediaElement.success&&pluginMediaElement.success(pluginMediaElement,htmlMediaElement)}},fireEvent:function(id,eventName,values){var e,i,bufferedTime,pluginMediaElement=this.pluginMediaElements[id];pluginMediaElement.ended=!1,pluginMediaElement.paused=!0,e={type:eventName,target:pluginMediaElement};for(i in values)pluginMediaElement[i]=values[i],e[i]=values[i];bufferedTime=values.bufferedTime||0,e.target.buffered=e.buffered={start:function(index){return 0},end:function(index){return bufferedTime},length:1},pluginMediaElement.dispatchEvent(e.type,e)}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",enablePluginSmoothing:!1,silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(el,o){return mejs.HtmlMediaElementShim.create(el,o)},mejs.HtmlMediaElementShim={create:function(el,o){var playback,prop,options=mejs.MediaElementDefaults,htmlMediaElement="string"==typeof el?document.getElementById(el):el,tagName=htmlMediaElement.tagName.toLowerCase(),isMediaTag="audio"===tagName||"video"===tagName,src=isMediaTag?htmlMediaElement.getAttribute("src"):htmlMediaElement.getAttribute("href"),poster=htmlMediaElement.getAttribute("poster"),autoplay=htmlMediaElement.getAttribute("autoplay"),preload=htmlMediaElement.getAttribute("preload"),controls=htmlMediaElement.getAttribute("controls");for(prop in o)options[prop]=o[prop];return src="undefined"==typeof src||null===src||""==src?null:src,poster="undefined"==typeof poster||null===poster?"":poster,preload="undefined"==typeof preload||null===preload||"false"===preload?"none":preload,autoplay=!("undefined"==typeof autoplay||null===autoplay||"false"===autoplay),controls=!("undefined"==typeof controls||null===controls||"false"===controls),playback=this.determinePlayback(htmlMediaElement,options,mejs.MediaFeatures.supportsMediaTag,isMediaTag,src),playback.url=null!==playback.url?mejs.Utility.absolutizeUrl(playback.url):"","native"==playback.method?(mejs.MediaFeatures.isBustedAndroid&&(htmlMediaElement.src=playback.url,htmlMediaElement.addEventListener("click",function(){htmlMediaElement.play()},!1)),this.updateNative(playback,options,autoplay,preload)):""!==playback.method?this.createPlugin(playback,options,poster,autoplay,preload,controls):(this.createErrorMessage(playback,options,poster),this)},determinePlayback:function(htmlMediaElement,options,supportsMediaTag,isMediaTag,src){var i,j,k,l,n,type,pluginName,pluginVersions,pluginInfo,dummy,mediaFiles=[],result={method:"",url:"",htmlMediaElement:htmlMediaElement,isVideo:"audio"!=htmlMediaElement.tagName.toLowerCase()};if("undefined"!=typeof options.type&&""!==options.type)if("string"==typeof options.type)mediaFiles.push({type:options.type,url:src});else for(i=0;i<options.type.length;i++)mediaFiles.push({type:options.type[i],url:src});else if(null!==src)type=this.formatType(src,htmlMediaElement.getAttribute("type")),mediaFiles.push({type:type,url:src});else for(i=0;i<htmlMediaElement.childNodes.length;i++)n=htmlMediaElement.childNodes[i],1==n.nodeType&&"source"==n.tagName.toLowerCase()&&(src=n.getAttribute("src"),type=this.formatType(src,n.getAttribute("type")),mediaFiles.push({type:type,url:src}));if(!isMediaTag&&mediaFiles.length>0&&null!==mediaFiles[0].url&&this.getTypeFromFile(mediaFiles[0].url).indexOf("audio")>-1&&(result.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(htmlMediaElement.canPlayType=function(type){return null!==type.match(/video\/(mp4|m4v)/gi)?"maybe":""}),supportsMediaTag&&("auto"===options.mode||"auto_plugin"===options.mode||"native"===options.mode)){for(isMediaTag||(dummy=document.createElement(result.isVideo?"video":"audio"),htmlMediaElement.parentNode.insertBefore(dummy,htmlMediaElement),htmlMediaElement.style.display="none",result.htmlMediaElement=htmlMediaElement=dummy),i=0;i<mediaFiles.length;i++)if(""!==htmlMediaElement.canPlayType(mediaFiles[i].type).replace(/no/,"")||""!==htmlMediaElement.canPlayType(mediaFiles[i].type.replace(/mp3/,"mpeg")).replace(/no/,"")){result.method="native",result.url=mediaFiles[i].url;break}if("native"===result.method&&(null!==result.url&&(htmlMediaElement.src=result.url),"auto_plugin"!==options.mode))return result}if("auto"===options.mode||"auto_plugin"===options.mode||"shim"===options.mode)for(i=0;i<mediaFiles.length;i++)for(type=mediaFiles[i].type,j=0;j<options.plugins.length;j++)for(pluginName=options.plugins[j],pluginVersions=mejs.plugins[pluginName],k=0;k<pluginVersions.length;k++)if(pluginInfo=pluginVersions[k],null==pluginInfo.version||mejs.PluginDetector.hasPluginVersion(pluginName,pluginInfo.version))for(l=0;l<pluginInfo.types.length;l++)if(type==pluginInfo.types[l])return result.method=pluginName,result.url=mediaFiles[i].url,result;return"auto_plugin"===options.mode&&"native"===result.method?result:(""===result.method&&mediaFiles.length>0&&(result.url=mediaFiles[0].url),result)},formatType:function(url,type){return url&&!type?this.getTypeFromFile(url):type&&~type.indexOf(";")?type.substr(0,type.indexOf(";")):type},getTypeFromFile:function(url){var ext=url.substring(url.lastIndexOf(".")+1);return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(ext)?"video":"audio")+"/"+this.getTypeFromExtension(ext)},getTypeFromExtension:function(ext){var ext_types={mp4:["mp4","m4v"],ogg:["ogg","ogv","oga"],webm:["webm","webmv","webma"]},r=ext;return $.each(ext_types,function(key,value){return value.indexOf(ext)>-1?void(r=key):void 0}),r},createErrorMessage:function(playback,options,poster){var htmlMediaElement=playback.htmlMediaElement,errorContainer=document.createElement("div");errorContainer.className="me-cannotplay";try{errorContainer.style.width=htmlMediaElement.width+"px",errorContainer.style.height=htmlMediaElement.height+"px"}catch(e){}errorContainer.innerHTML=""!==poster?'<a href="'+playback.url+'"><img src="'+poster+'" width="100%" height="100%" /></a>':'<a href="'+playback.url+'"><span>Download File</span></a>',htmlMediaElement.parentNode.insertBefore(errorContainer,htmlMediaElement),htmlMediaElement.style.display="none",options.error(htmlMediaElement)},createPlugin:function(playback,options,poster,autoplay,preload,controls){var specialIEContainer,node,initVars,htmlMediaElement=playback.htmlMediaElement,width=1,height=1,pluginid="me_"+playback.method+"_"+mejs.meIndex++,pluginMediaElement=new mejs.PluginMediaElement(pluginid,playback.method,playback.url),container=document.createElement("div");pluginMediaElement.tagName=htmlMediaElement.tagName;for(var i=0;i<htmlMediaElement.attributes.length;i++){var attribute=htmlMediaElement.attributes[i];1==attribute.specified&&pluginMediaElement.setAttribute(attribute.name,attribute.value)}for(node=htmlMediaElement.parentNode;null!==node&&"body"!=node.tagName.toLowerCase();){if("p"==node.parentNode.tagName.toLowerCase()){node.parentNode.parentNode.insertBefore(node,node.parentNode);break}node=node.parentNode}switch(playback.isVideo?(width=options.videoWidth>0?options.videoWidth:null!==htmlMediaElement.getAttribute("width")?htmlMediaElement.getAttribute("width"):options.defaultVideoWidth,height=options.videoHeight>0?options.videoHeight:null!==htmlMediaElement.getAttribute("height")?htmlMediaElement.getAttribute("height"):options.defaultVideoHeight,width=mejs.Utility.encodeUrl(width),height=mejs.Utility.encodeUrl(height)):options.enablePluginDebug&&(width=320,height=240),pluginMediaElement.success=options.success,mejs.MediaPluginBridge.registerPluginElement(pluginid,pluginMediaElement,htmlMediaElement),container.className="me-plugin",container.id=pluginid+"_container",playback.isVideo?htmlMediaElement.parentNode.insertBefore(container,htmlMediaElement):document.body.insertBefore(container,document.body.childNodes[0]),initVars=["id="+pluginid,"isvideo="+(playback.isVideo?"true":"false"),"autoplay="+(autoplay?"true":"false"),"preload="+preload,"width="+width,"startvolume="+options.startVolume,"timerrate="+options.timerRate,"height="+height],null!==playback.url&&("flash"==playback.method?initVars.push("file="+mejs.Utility.encodeUrl(playback.url)):initVars.push("file="+playback.url)),options.enablePluginDebug&&initVars.push("debug=true"),options.enablePluginSmoothing&&initVars.push("smoothing=true"),controls&&initVars.push("controls=true"),options.pluginVars&&(initVars=initVars.concat(options.pluginVars)),playback.method){case"silverlight":container.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+pluginid+'" name="'+pluginid+'" width="'+width+'" height="'+height+'"><param name="initParams" value="'+initVars.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+options.pluginPath+options.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(specialIEContainer=document.createElement("div"),container.appendChild(specialIEContainer),specialIEContainer.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+pluginid+'" width="'+width+'" height="'+height+'"><param name="movie" value="'+options.pluginPath+options.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+initVars.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):container.innerHTML='<embed id="'+pluginid+'" name="'+pluginid+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+options.pluginPath+options.flashName+'" flashvars="'+initVars.join("&")+'" width="'+width+'" height="'+height+'"></embed>';
break;case"youtube":var videoId=playback.url.substr(playback.url.lastIndexOf("=")+1);youtubeSettings={container:container,containerId:container.id,pluginMediaElement:pluginMediaElement,pluginId:pluginid,videoId:videoId,height:height,width:width},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":pluginMediaElement.vimeoid=playback.url.substr(playback.url.lastIndexOf("/")+1),container.innerHTML='<object width="'+width+'" height="'+height+'"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="flashvars" value="api=1" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id='+pluginMediaElement.vimeoid+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" /><embed src="//vimeo.com/moogaloop.swf?api=1&amp;clip_id='+pluginMediaElement.vimeoid+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+width+'" height="'+height+'"></embed></object>'}return htmlMediaElement.style.display="none",pluginMediaElement},updateNative:function(playback,options,autoplay,preload){var m,htmlMediaElement=playback.htmlMediaElement;for(m in mejs.HtmlMediaElement)htmlMediaElement[m]=mejs.HtmlMediaElement[m];return options.success(htmlMediaElement,htmlMediaElement),htmlMediaElement}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var tag=document.createElement("script");tag.src="http://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(yt){this.isLoaded?this.createIframe(yt):(this.loadIframeApi(),this.iframeQueue.push(yt))},createIframe:function(settings){var pluginMediaElement=settings.pluginMediaElement,player=new YT.Player(settings.containerId,{height:settings.height,width:settings.width,videoId:settings.videoId,playerVars:{controls:0},events:{onReady:function(){settings.pluginMediaElement.pluginApi=player,mejs.MediaPluginBridge.initPlugin(settings.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(player,pluginMediaElement,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,player,pluginMediaElement)}}})},createEvent:function(player,pluginMediaElement,eventName){var obj={type:eventName,target:pluginMediaElement};if(player&&player.getDuration){pluginMediaElement.currentTime=obj.currentTime=player.getCurrentTime(),pluginMediaElement.duration=obj.duration=player.getDuration(),obj.paused=pluginMediaElement.paused,obj.ended=pluginMediaElement.ended,obj.muted=player.isMuted(),obj.volume=player.getVolume()/100,obj.bytesTotal=player.getVideoBytesTotal(),obj.bufferedBytes=player.getVideoBytesLoaded();var bufferedTime=obj.bufferedBytes/obj.bytesTotal*obj.duration;obj.target.buffered=obj.buffered={start:function(index){return 0},end:function(index){return bufferedTime},length:1}}pluginMediaElement.dispatchEvent(obj.type,obj)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var settings=this.iframeQueue.pop();this.createIframe(settings)}},flashPlayers:{},createFlash:function(settings){this.flashPlayers[settings.pluginId]=settings;var specialIEContainer,youtubeUrl="http://www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+settings.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(specialIEContainer=document.createElement("div"),settings.container.appendChild(specialIEContainer),specialIEContainer.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+settings.pluginId+'" width="'+settings.width+'" height="'+settings.height+'"><param name="movie" value="'+youtubeUrl+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):settings.container.innerHTML='<object type="application/x-shockwave-flash" id="'+settings.pluginId+'" data="'+youtubeUrl+'" width="'+settings.width+'" height="'+settings.height+'" style="visibility: visible; "><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'},flashReady:function(id){var settings=this.flashPlayers[id],player=document.getElementById(id),pluginMediaElement=settings.pluginMediaElement;pluginMediaElement.pluginApi=pluginMediaElement.pluginElement=player,mejs.MediaPluginBridge.initPlugin(id),player.cueVideoById(settings.videoId);var callbackName=settings.containerId+"_callback";window[callbackName]=function(e){mejs.YouTubeApi.handleStateChange(e,player,pluginMediaElement)},player.addEventListener("onStateChange",callbackName),setInterval(function(){mejs.YouTubeApi.createEvent(player,pluginMediaElement,"timeupdate")},250)},handleStateChange:function(youTubeState,player,pluginMediaElement){switch(youTubeState){case-1:pluginMediaElement.paused=!0,pluginMediaElement.ended=!0,mejs.YouTubeApi.createEvent(player,pluginMediaElement,"loadedmetadata");break;case 0:pluginMediaElement.paused=!1,pluginMediaElement.ended=!0,mejs.YouTubeApi.createEvent(player,pluginMediaElement,"ended");break;case 1:pluginMediaElement.paused=!1,pluginMediaElement.ended=!1,mejs.YouTubeApi.createEvent(player,pluginMediaElement,"play"),mejs.YouTubeApi.createEvent(player,pluginMediaElement,"playing");break;case 2:pluginMediaElement.paused=!0,pluginMediaElement.ended=!1,mejs.YouTubeApi.createEvent(player,pluginMediaElement,"pause");break;case 3:mejs.YouTubeApi.createEvent(player,pluginMediaElement,"progress");break;case 5:}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement;var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.isTracing=!1,fluid.registerNamespace("fluid.browser"),fluid.browser.nativeVideoSupport=function(){return!!document.createElement("video").canPlayType},fluid.defaults("fluid.modelRelay",{gradeNames:["fluid.eventedComponent","fluid.modelComponent","autoInit"],postInitFunction:"fluid.modelRelay.postInit",targets:{},rules:{},events:{},bindingTriggered:!1}),fluid.modelRelay.registerTarget=function(that,target){fluid.transform(that.options.rules,function(value,key){var listener=function(newModel,oldModel,changeList){var newValue=fluid.get(newModel,key);if("string"==typeof value)target.applier.requestChange(value,newValue);else{var fullargs=[newValue,key,target,changeList];if(value.lens){value.lens.transform.apply(null,[newValue,key]);target.applier.requestChange(value.targetPath,newValue)}else if(target!==that){var changes=value.func.apply(null,fullargs);fluid.requestChanges(target.applier,changes)}else fluid.requestChanges(that.pentApplier,changeList)}};return that.options.sourceApplier.modelChanged.addListener(key,listener),value.func?listener:null});target!==that&&fluid.each(that.options.rules,function(value,key){if(value.func){var newValue=fluid.get(that.pentModel,key),synthChange={type:"ADD",path:key,value:newValue},changes=value.func(newValue,key,target,[synthChange]);fluid.requestChanges(target.applier,changes)}})},fluid.modelRelay.processLookup=function(struct,member,relayType,key,expectedType){var func=struct[member];if(func||fluid.fail("Relay rule "+key+" requires a "+relayType+" to be specified"),"string"==typeof func){var funcval=fluid.getGlobalValue(func);typeof funcval!==expectedType&&fluid.fail("Relay func "+func+" could not be looked up to "+expectedType+" function for rule "+key),struct[member]=funcval}},fluid.modelRelay.postInit=function(that){that.targets={},that.pentModel={},that.pentApplier=fluid.makeChangeApplier(that.pentModel),that.addTarget=function(target){fluid.modelRelay.registerTarget(that,target),that.targets[target.id]=target},fluid.each(that.options.rules,function(value,key){"string"!=typeof value&&(value.targetPath?fluid.modelRelay.processLookup(value,"lens","lens",key,"object"):fluid.modelRelay.processLookup(value,"func","relay func",key,"function"))}),fluid.each(that.options.targets,function(target){fluid.modelRelay.registerTarget(that,target)}),fluid.modelRelay.registerTarget(that,that),that.events.bindingTrigger&&that.events.bindingTrigger.addListener(function(){that.options.bindingTriggered=!0})},fluid.defaults("fluid.lens",{gradeNames:["fluid.littleComponent"]}),fluid.defaults("fluid.scaleLens",{gradeNames:["fluid.lens","autoInit"],scaleFactor:1,postInitFunction:"fluid.scaleLens.postInit"}),fluid.scaleLens.postInit=function(that){that.transform=function(value){return value*that.options.scaleFactor},that.reverseTransform=function(value){return value/that.options.scaleFactor}},fluid.linearRangeGuard=function(min,max){return function(model,changeRequest,applier){var newValue=changeRequest.value;min>newValue?newValue=min:newValue>max&&(newValue=max),changeRequest.value=newValue}},fluid.defaults("fluid.videoPlayer.indirectReader",{gradeNames:["fluid.modelComponent","autoInit"],preInitFunction:"fluid.videoPlayer.makeIndirectReader"}),fluid.videoPlayer.makeIndirectReader=function(that){that.readIndirect=function(pathName){return fluid.get(that.model,fluid.get(that.options,pathName))},that.writeIndirect=function(pathName,value,source){fluid.fireSourcedChange(that.applier,fluid.get(that.options,pathName),value,source)}}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.videoPlayer.showHide",{gradeNames:["fluid.modelComponent","autoInit"],finalInit:"fluid.videoPlayer.showHide.finalInit",modelPrefix:"isShown",model:{isShown:{}},showHidePath:""}),fluid.videoPlayer.showHide.finalInit=function(that){fluid.each(that.options.selectors,function(selectorValue,selectorKey){var modelPath=fluid.pathUtil.composePath(fluid.pathUtil.composePath(that.options.modelPrefix,that.options.showHidePath),selectorKey);that.applier.modelChanged.addListener(modelPath,function(){var container=that.locate(selectorKey);if(container){var showFlag=fluid.get(that.model,modelPath);container[showFlag?"show":"hide"]()}})})}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.setLogging(!1),fluid.registerNamespace("fluid.videoPlayer"),fluid.videoPlayer.isSafari=function(){var ua=navigator.userAgent.toLowerCase();return ua.indexOf("safari")>0&&ua.indexOf("chrome")<0?fluid.typeTag("fluid.browser.safari"):void 0},fluid.enhance.check({"fluid.browser.safari":"fluid.videoPlayer.isSafari"}),fluid.videoPlayer.defaultKeys={play:{modifier:$.ui.keyCode.SHIFT,key:80},captions:{modifier:$.ui.keyCode.SHIFT,key:67},transcripts:{modifier:$.ui.keyCode.SHIFT,key:84},fullscreen:{modifier:$.ui.keyCode.SHIFT,key:70},volumePlus:{key:$.ui.keyCode.UP},volumeMinus:{key:$.ui.keyCode.DOWN},forward:{key:$.ui.keyCode.RIGHT},rewind:{key:$.ui.keyCode.LEFT},escape:{key:$.ui.keyCode.ESCAPE}},fluid.enhance.check({"fluid.browser.nativeVideoSupport":"fluid.browser.nativeVideoSupport"}),fluid.defaults("fluid.videoPlayer",{gradeNames:["fluid.viewComponent","autoInit"],components:{media:{type:"fluid.videoPlayer.media",container:"{videoPlayer}.dom.video",createOnEvent:"onCreateMediaReady",priority:"first",options:{model:"{videoPlayer}.model",applier:"{videoPlayer}.applier",events:{onLoadedMetadata:"{videoPlayer}.events.onLoadedMetadata"},listeners:{onExitFullScreen:{listener:"{videoPlayer}.applier.requestChange",args:["fullscreen",!1]},"{videoPlayer}.events.onFullscreenModelChanged":{listener:function(videoPlayer,media,model){model.fullscreen?media.requestFullScreen(videoPlayer.locate("videoPlayer")[0]):media.cancelFullScreen()},args:["{videoPlayer}","{media}","{arguments}.0"]},onReady:"{videoPlayer}.events.onMediaReady"},sources:"{videoPlayer}.options.video.sources"}},transcript:{type:"fluid.videoPlayer.transcript",container:"{videoPlayer}.dom.transcript",createOnEvent:"onIntervalEventsConductorReady",options:{model:"{videoPlayer}.model",applier:"{videoPlayer}.applier",transcripts:"{videoPlayer}.options.video.transcripts",events:{onCurrentTranscriptChanged:"{videoPlayer}.events.onCurrentTranscriptChanged",onTranscriptHide:"{videoPlayer}.events.onTranscriptHide",onTranscriptShow:"{videoPlayer}.events.onTranscriptShow",onTranscriptElementChange:"{videoPlayer}.events.onTranscriptElementChange",onTranscriptsLoaded:"{videoPlayer}.events.onTranscriptsLoaded"}}},intervalEventsConductor:{type:"fluid.videoPlayer.intervalEventsConductor",createOnEvent:"onMediaReady",options:{events:{onTimeUpdate:"{videoPlayer}.events.onTimeUpdate",onIntervalChange:"{transcript}.events.onIntervalChange"},listeners:{"{transcript}.events.onTranscriptsLoaded":"{intervalEventsConductor}.setIntervalList"}}},controllers:{type:"fluid.videoPlayer.controllers",container:"{videoPlayer}.dom.controllers",createOnEvent:"onTemplateReady",options:{model:"{videoPlayer}.model",applier:"{videoPlayer}.applier",captions:"{videoPlayer}.options.video.captions",transcripts:"{videoPlayer}.options.video.transcripts",events:{onStartScrub:"{videoPlayer}.events.onStartScrub",onScrub:"{videoPlayer}.events.onScrub",afterScrub:"{videoPlayer}.events.afterScrub",onTranscriptsReady:"{videoPlayer}.events.canBindTranscriptMenu",onCaptionsReady:"{videoPlayer}.events.canBindCaptionMenu"},listeners:{onReady:"{videoPlayer}.events.onControllersReady"},templates:{menuButton:"{videoPlayer}.options.templates.menuButton"}}},html5Captionator:{type:"fluid.videoPlayer.captionator",container:"{videoPlayer}.dom.videoPlayer",createOnEvent:"onMediaReady"}},preInitFunction:"fluid.videoPlayer.preInit",postInitFunction:"fluid.videoPlayer.postInit",finalInitFunction:"fluid.videoPlayer.finalInit",events:{onScrub:null,onTemplateReady:null,onLoadedMetadata:null,onMediaReady:null,onControllersReady:null,afterScrub:null,onStartScrub:null,onTemplateLoadError:null,onCurrentTranscriptChanged:null,onTranscriptHide:null,onTranscriptShow:null,onTranscriptElementChange:null,onFullscreenModelChanged:null,onReady:{events:{onTemplateReady:"onTemplateReady",onControllersReady:"onControllersReady",onCreate:"onCreate"},args:["{videoPlayer}"]},onTimeUpdate:null,onCreateMediaReady:null,onIntervalEventsConductorReady:null,onTranscriptsReady:null,onTranscriptsLoaded:null,onCaptionsReady:null,canBindTranscriptMenu:{events:{controllers:"onControllersReady",transcripts:"onTranscriptsLoaded"},args:["{arguments}.transcripts.1"]},canBindCaptionMenu:{events:{controllers:"onControllersReady",captions:"onCaptionsReady"},args:["{arguments}.captions.1"]}},selectors:{videoPlayer:".flc-videoPlayer-main",video:".flc-videoPlayer-video",videoOverlay:".flc-videoPlayer-video-overlay",videoContainer:".flc-videoPlayer-video-container",caption:".flc-videoPlayer-captionArea",controllers:".flc-videoPlayer-controller",transcript:".flc-videoPlayer-transcriptArea",overlay:".flc-videoPlayer-overlay"},strings:{captionsOff:"Captions OFF",turnCaptionsOff:"Turn Captions OFF",transcriptsOff:"Transcripts OFF",turnTranscriptsOff:"Turn Transcripts OFF",videoTitlePreface:"Video: "},styles:{playOverlay:"fl-videoPlayer-video-play"},selectorsToIgnore:["overlay","caption","videoPlayer","transcript","video","videoContainer","videoOverlay"],keyBindings:fluid.videoPlayer.defaultKeys,video:{sources:[],captions:[],transcripts:[]},defaultKinds:{captions:"subtitles",transcripts:"transcripts"},model:{currentTracks:{captions:[],transcripts:[]},currentTime:0,scrubTime:null,totalTime:0,bufferEnd:0,displayCaptions:!1,displayTranscripts:!1,fullscreen:!1,volume:60,muted:!1,canPlay:!1,play:!1},templates:{videoPlayer:{forceCache:!0,href:"../html/videoPlayer_template.html"}},videoTitle:"unnamed video",invokers:{showControllers:"fluid.videoPlayer.showControllers",hideControllers:"fluid.videoPlayer.hideControllers"}}),fluid.demands("fluid.videoPlayer.captionator",["fluid.videoPlayer"],{funcName:"fluid.emptySubcomponent"}),fluid.demands("fluid.videoPlayer.captionator",["fluid.videoPlayer","fluid.browser.nativeVideoSupport"],{funcName:"fluid.videoPlayer.html5Captionator",options:{model:"{videoPlayer}.model",applier:"{videoPlayer}.applier",captions:"{videoPlayer}.options.video.captions",events:{onReady:"{videoPlayer}.events.onCaptionsReady"}}});var bindKeyboardControl=function(that){var opts={additionalBindings:[{modifier:that.options.keyBindings.play.modifier,key:that.options.keyBindings.play.key,activateHandler:that.play},{modifier:that.options.keyBindings.fullscreen.modifier,key:that.options.keyBindings.fullscreen.key,activateHandler:that.toggleFullscreen},{modifier:that.options.keyBindings.captions.modifier,key:that.options.keyBindings.captions.key,activateHandler:function(){that.applier.fireChangeRequest({path:"displayCaptions",value:!that.model.displayCaptions})}},{modifier:that.options.keyBindings.transcripts.modifier,key:that.options.keyBindings.transcripts.key,activateHandler:function(){that.applier.fireChangeRequest({path:"displayTranscripts",value:!that.model.states.displayTranscripts})}},{modifier:that.options.keyBindings.volumePlus.modifier,key:that.options.keyBindings.volumePlus.key,activateHandler:function(){return that.applier.fireChangeRequest({path:"volume",value:that.model.volume+10}),!1}},{modifier:that.options.keyBindings.volumeMinus.modifier,key:that.options.keyBindings.volumeMinus.key,activateHandler:function(){return that.applier.fireChangeRequest({path:"volume",value:that.model.volume-10}),!1}},{modifier:that.options.keyBindings.forward.modifier,key:that.options.keyBindings.forward.key,activateHandler:that.incrTime},{modifier:that.options.keyBindings.rewind.modifier,key:that.options.keyBindings.rewind.key,activateHandler:that.decrTime}]},video=that.locate("video");video.fluid("tabbable"),video.fluid("activatable",[that.play,opts])};fluid.videoPlayer.showControllersSimple=function(that){that.locate("controllers").show()},fluid.videoPlayer.hideControllersSimple=function(that){that.locate("controllers").hide()},fluid.videoPlayer.showControllersAnimated=function(that){that.locate("controllers").stop(!1,!0).slideDown()},fluid.videoPlayer.hideControllersAnimated=function(that){that.locate("controllers").stop(!1,!0).delay(500).slideUp()},fluid.videoPlayer.togglePlayOverlay=function(that){var ol=that.locate("videoOverlay"),olstyle=that.options.styles.playOverlay;that.model.play?ol.removeClass(olstyle):ol.addClass(olstyle)};var bindVideoPlayerDOMEvents=function(that){var videoContainer=that.locate("videoContainer");fluid.tabindex(videoContainer,0),that.locate("overlay").mousedown(function(ev){that.play()}),that.locate("controllers").mousedown(function(ev){ev.stopPropagation()}),videoContainer.mousedown(function(ev){ev.preventDefault(),that.play()}),that.locate("videoPlayer").mouseenter(function(){that.showControllers(that)}),that.container.mouseleave(function(){that.hideControllers(that)}),videoContainer.focus(function(){that.showControllers(that)}),that.events.onLoadedMetadata.addListener(function(){bindKeyboardControl(that)})},bindVideoPlayerModel=function(that){that.applier.modelChanged.addListener("fullscreen",that.events.onFullscreenModelChanged.fire),that.applier.modelChanged.addListener("play",function(){fluid.videoPlayer.togglePlayOverlay(that)})};fluid.videoPlayer.addDefaultKind=function(tracks,defaultKind){fluid.each(tracks,function(track){track.kind||(track.kind=defaultKind)})},fluid.videoPlayer.preInit=function(that){fluid.each(that.options.defaultKinds,function(defaultKind,index){fluid.videoPlayer.addDefaultKind(fluid.get(that.options.video,index),defaultKind)}),fluid.each(that.options.video.captions,function(cap,index){cap.id=fluid.allocateSimpleId()}),that.toggleFullscreen=function(){that.applier.requestChange("fullscreen",!that.model.fullscreen)}},fluid.videoPlayer.postInit=function(that){that.applier.guards.addListener({path:"volume",transactional:!0},fluid.linearRangeGuard(0,100)),that.play=function(ev){that.applier.fireChangeRequest({path:"play",value:!that.model.play})},that.incrTime=function(){if(that.events.onStartScrub.fire(),that.model.currentTime<that.model.totalTime){var newVol=that.model.currentTime+.05*that.model.totalTime;that.events.onScrub.fire(newVol<=that.model.totalTime?newVol:that.model.totalTime)}that.events.afterScrub.fire()},that.decrTime=function(){if(that.events.onStartScrub.fire(),that.model.currentTime>0){var newVol=that.model.currentTime-.05*that.model.totalTime;that.events.onScrub.fire(newVol>=0?newVol:0)}that.events.afterScrub.fire()}},fluid.videoPlayer.finalInit=function(that){return that.container.attr("role","application"),fluid.fetchResources(that.options.templates,function(res){var fetchFailed=!1;for(var key in res)if(res[key].fetchError)fluid.log("couldn't fetch"+res[key].href),fluid.log("status: "+res[key].fetchError.status+", textStatus: "+res[key].fetchError.textStatus+", errorThrown: "+res[key].fetchError.errorThrown),that.events.onTemplateLoadError.fire(res[key].href),fetchFailed=!0;else if("videoPlayer"===key){that.container.append(res[key].resourceText);var video=that.locate("video");video.attr("width",video.css("width")),video.attr("height",video.css("height")),that.locate("videoContainer").attr("aria-label",that.options.strings.videoTitlePreface+that.options.videoTitle),bindVideoPlayerDOMEvents(that),bindVideoPlayerModel(that)}fetchFailed||(that.events.onTemplateReady.fire(),that.options.video.sources&&that.events.onCreateMediaReady.fire()),that.locate("controllers").hide(),fluid.videoPlayer.togglePlayOverlay(that),$("object",that.locate("video")).attr("tabindex","-1")}),that},fluid.videoPlayer.formatTime=function(time){var fullTime=Math.floor(time),sec=fullTime%60;sec=10>sec?"0"+sec:sec,fullTime=Math.floor(fullTime/60);var min=fullTime%60;fullTime=Math.floor(fullTime/60);var ret="";return 0!==fullTime&&(ret=fullTime+":"),ret+min+":"+sec},fluid.defaults("fluid.videoPlayer.eventBinder",{gradeNames:["fluid.eventedComponent","autoInit"]}),fluid.demands("mediaEventBinder",["fluid.videoPlayer.media","fluid.videoPlayer"],{options:{listeners:{"{videoPlayer}.events.onScrub":"{media}.setTime","{videoPlayer}.events.onTimeUpdate":"{media}.updateCurrentTime","{videoPlayer}.events.onTranscriptElementChange":"{media}.setTime"}}}),fluid.videoPlayer.millisToHmsm=function(millis){var seconds=parseFloat(millis)/1e3;seconds=0>seconds||isNaN(seconds)?0:seconds;var hours=parseInt(seconds/3600),minutes=parseInt(seconds/60)%60;return seconds=(seconds%60).toFixed(3),(10>hours?"0"+hours:hours)+":"+(10>minutes?"0"+minutes:minutes)+":"+(10>seconds?"0"+seconds:seconds)},fluid.videoPlayer.amaraJsonToVTT=function(json){for(var vtt="WEBVTT",i=0;i<json.length;i++){var startTime=fluid.videoPlayer.millisToHmsm(json[i].start),endTime=fluid.videoPlayer.millisToHmsm(json[i].end);vtt=vtt.concat("\n\n",startTime," --> ",endTime,"\n",json[i].text)}return vtt},fluid.videoPlayer.fetchAmaraJson=function(videoUrl,lang,callback){if(videoUrl&&callback){var url=encodeURI("http://amara.org/api/videos/?video_url="+videoUrl);$.getJSON(url,function(data){var captionUrl=encodeURI("http://amara.org/api/videos/"+data.objects[0].id+"/languages/"+lang+"/subtitles/");$.getJSON(captionUrl,callback)})}},fluid.demands("fluid.videoPlayer.showControllers",["fluid.videoPlayer"],{funcName:"fluid.videoPlayer.showControllersAnimated",args:["{videoPlayer}"]}),fluid.demands("fluid.videoPlayer.hideControllers",["fluid.videoPlayer"],{funcName:"fluid.videoPlayer.hideControllersAnimated",args:["{videoPlayer}"]}),fluid.demands("fluid.videoPlayer.showControllers",["fluid.browser.safari","fluid.videoPlayer"],{funcName:"fluid.videoPlayer.showControllersSimple",args:["{videoPlayer}"]}),fluid.demands("fluid.videoPlayer.hideControllers",["fluid.browser.safari","fluid.videoPlayer"],{funcName:"fluid.videoPlayer.hideControllersSimple",args:["{videoPlayer}"]}),fluid.demands("fluid.videoPlayer.media",["fluid.videoPlayer.intervalEventsConductor","fluid.videoPlayer"],{options:{events:{onTimeUpdate:"{intervalEventsConductor}.events.onTimeUpdate"}}})}(jQuery,fluid_1_5),function($,fluid){fluid.defaults("fluid.videoPlayer.html5Captionator",{gradeNames:["fluid.viewComponent","fluid.videoPlayer.indirectReader","autoInit"],finalInitFunction:"fluid.videoPlayer.html5Captionator.finalInit",preInitFunction:"fluid.videoPlayer.html5Captionator.preInit",model:{},captions:[],events:{afterTrackElCreated:null,onTracksReady:null,onReady:null},elPaths:{currentCaptions:"currentTracks.captions",displayCaptions:"displayCaptions"},selectors:{video:".flc-videoPlayer-video",caption:".flc-videoPlayer-captionArea"},listeners:{afterTrackElCreated:"fluid.videoPlayer.html5Captionator.waitForTracks",onTracksReady:"fluid.videoPlayer.html5Captionator.captionify"},createTrackFns:{"text/amarajson":"fluid.videoPlayer.html5Captionator.createAmaraTrack","text/vtt":"fluid.videoPlayer.html5Captionator.createVttTrack"}});var bindCaptionatorModel=function(that){var elPaths=that.options.elPaths;that.applier.modelChanged.addListener(elPaths.currentCaptions,that.refreshCaptions),that.applier.modelChanged.addListener(elPaths.displayCaptions,that.refreshCaptions)};fluid.videoPlayer.html5Captionator.hideAllTracks=function(tracks){fluid.each(tracks,function(trackEl){trackEl.track.mode="disabled"})},fluid.videoPlayer.html5Captionator.showCurrentTrack=function(currentCaptions,tracks,captionSources){fluid.videoPlayer.html5Captionator.hideAllTracks(tracks),fluid.each(currentCaptions,function(capIndex,index){var track=fluid.byId(captionSources[capIndex].id);track.track.mode="showing"})},fluid.videoPlayer.html5Captionator.preInit=function(that){that.createTrackFns=that.options.createTrackFns,that.refreshCaptions=function(){var tracks=$("track",that.locate("video")),display=that.readIndirect("elPaths.displayCaptions");display?fluid.videoPlayer.html5Captionator.showCurrentTrack(that.readIndirect("elPaths.currentCaptions"),tracks,that.options.captions):fluid.videoPlayer.html5Captionator.hideAllTracks(tracks)}},fluid.videoPlayer.html5Captionator.finalInit=function(that){var captions=that.options.captions;that.tracksToCreate=captions.length,fluid.each(captions,function(capOpt,key){fluid.invoke(that.createTrackFns[capOpt.type],[that,key,capOpt],that)})},fluid.videoPlayer.html5Captionator.createTrack=function(that,key,opts){var trackEl=$("<track />"),attrs=fluid.filterKeys(fluid.copy(opts),["id","kind","src","srclang","label"],!1);return-1!==$.inArray(key,that.readIndirect("elPaths.currentCaptions"))&&that.readIndirect("elPaths.displayCaptions")&&(attrs["default"]="true"),trackEl.attr(attrs),trackEl},fluid.videoPlayer.html5Captionator.createAmaraTrack=function(that,key,opts){var trackEl=fluid.videoPlayer.html5Captionator.createTrack(that,key,opts),afterFetch=function(data){if(data){var vtt=fluid.videoPlayer.amaraJsonToVTT(data.subtitles),dataUrl="data:text/vtt,"+encodeURIComponent(vtt);trackEl.attr("src",dataUrl),that.locate("video").append(trackEl),that.events.afterTrackElCreated.fire(that)}};fluid.videoPlayer.fetchAmaraJson(opts.src,opts.srclang,afterFetch)},fluid.videoPlayer.html5Captionator.createVttTrack=function(that,key,opts){var trackEl=fluid.videoPlayer.html5Captionator.createTrack(that,key,opts);that.locate("video").append(trackEl),that.events.afterTrackElCreated.fire(that)},fluid.videoPlayer.html5Captionator.waitForTracks=function(that){that.tracksToCreate--,0===that.tracksToCreate&&that.events.onTracksReady.fire(that)},fluid.videoPlayer.html5Captionator.captionify=function(that){captionator.captionify(that.locate("video")[0],null,{appendCueCanvasTo:that.locate("caption")[0],sizeCuesByTextBoundingBox:!0}),bindCaptionatorModel(that),that.events.onReady.fire(that,fluid.allocateSimpleId(that.locate("caption")))}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){var bindControllerModel=function(that){that.applier.modelChanged.addListener("canPlay",function(){that.locate("play").attr("disabled",!that.model.canPlay),that.locate("fullscreen").attr("disabled",!that.model.canPlay)})};fluid.registerNamespace("fluid.videoPlayer.controllers"),fluid.videoPlayer.controllers.supportFullscreen=function(){var fullscreenFnNames=["requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","oRequestFullScreen","msieRequestFullScreen"];return fluid.find(fullscreenFnNames,function(name){return!!$("<div></div>")[0][name]||void 0})},fluid.enhance.check({"fluid.browser.supportsFullScreen":"fluid.videoPlayer.controllers.supportFullscreen","fluid.browser.nativeVideoSupport":"fluid.browser.nativeVideoSupport"}),fluid.defaults("fluid.videoPlayer.controllers",{gradeNames:["fluid.viewComponent","autoInit"],components:{scrubber:{type:"fluid.videoPlayer.controllers.scrubber",container:"{controllers}.dom.scrubberContainer",createOnEvent:"afterTemplateLoaded",options:{model:"{controllers}.model",applier:"{controllers}.applier",events:{onScrub:"{controllers}.events.onScrub",afterScrub:"{controllers}.events.afterScrub",onStartScrub:"{controllers}.events.onStartScrub"},listeners:{onReady:"{controllers}.events.onScrubberReady"}}},volumeControl:{type:"fluid.videoPlayer.volumeControls",container:"{controllers}.dom.volumeContainer",createOnEvent:"afterTemplateLoaded",options:{model:"{controllers}.model",applier:"{controllers}.applier",listeners:{onReady:"{controllers}.events.onVolumeReady"}}},captionControls:{type:"fluid.emptyEventedSubcomponent",createOnEvent:"afterTemplateLoaded",options:{listeners:{onReady:"{controllers}.events.onCaptionControlsReady"}}},transcriptControls:{type:"fluid.videoPlayer.languageControls",container:"{controllers}.dom.transcriptControlsContainer",createOnEvent:"afterTemplateLoaded",options:{languages:"{controllers}.options.transcripts",model:"{controllers}.model",applier:"{controllers}.applier",showHidePath:"displayTranscripts",currentLanguagePath:"currentTracks.transcripts",styles:{button:"fl-videoPlayer-transcripts-button",buttonWithShowing:"fl-videoPlayer-transcripts-button-on"},strings:{showLanguage:"Show Transcripts",hideLanguage:"Hide Transcripts",press:"Transcripts",release:"Transcripts"},events:{onControlledElementReady:"{controllers}.events.onTranscriptsReady",onReady:"{controllers}.events.onTranscriptControlsReady"},templates:{menuButton:{href:"{controllers}.options.templates.menuButton.href"}}}},playButton:{type:"fluid.toggleButton",container:"{controllers}.container",createOnEvent:"afterTemplateLoaded",options:{selectors:{button:".flc-videoPlayer-play",label:".flc-videoPlayer-play-label"},styles:{init:"fl-videoPlayer-play",pressed:"fl-videoPlayer-playing"},strings:{press:"Play",release:"Pause"},model:"{controllers}.model",modelPath:"play",ownModel:!1,applier:"{controllers}.applier",listeners:{onReady:"{controllers}.events.onPlayReady"}}},fullScreenButton:{type:"fluid.emptyEventedSubcomponent",createOnEvent:"afterTemplateLoaded",options:{listeners:{onReady:"{controllers}.events.onFullScreenReady"}}}},finalInitFunction:"fluid.videoPlayer.controllers.finalInit",events:{afterTemplateLoaded:null,onStartTimeChange:null,afterTimeChange:null,onMarkupReady:null,onScrub:null,onStartScrub:null,afterScrub:null,onTranscriptsReady:null,onCaptionsReady:null,onPlayReady:null,onVolumeReady:null,onScrubberReady:null,onCaptionControlsReady:null,onTranscriptControlsReady:null,onFullScreenReady:null,onReady:{events:{templateLoaded:"afterTemplateLoaded",playReady:"onPlayReady",volumeReady:"onVolumeReady",scrubReady:"onScrubberReady",captionControlsReady:"onCaptionControlsReady",transcriptControlsReady:"onTranscriptControlsReady",fullScreenReady:"onFullScreenReady"},args:["{controllers}"]}},selectors:{play:".flc-videoPlayer-play",scrubberContainer:".flc-videoPlayer-scrubberContainer",volumeContainer:".flc-videoPlayer-volumeContainer",captionControlsContainer:".flc-videoPlayer-captionControls-container",transcriptControlsContainer:".flc-videoPlayer-transcriptControls-container",
fullscreen:".flc-videoPlayer-fullscreen"},styles:{fullscreenOn:"fl-videoPlayer-state-fullscreenOn",fullscreenOff:"fl-videoPlayer-state-fullscreenOff",fullscreenIcon:"ui-icon-extlink",captionIcon:"ui-icon-comment",transcriptIcon:"ui-icon-comment"},invokers:{showHideScrubberHandle:{funcName:"fluid.videoPlayer.controllers.showHideScrubberHandle",args:["{controllers}","{controllers}.model.totalTime"]}},templates:{controllers:{forceCache:!0,href:"../html/videoPlayer_controllers_template.html"}}});var fullScreenButtonOptions={selectors:{button:".flc-videoPlayer-fullscreen",label:".flc-videoPlayer-fullscreen-label"},styles:{init:"fl-videoPlayer-fullscreen",pressed:"fl-videoPlayer-fullscreen-on"},strings:{press:"Full screen",release:"Exit full screen mode"},model:"{controllers}.model",modelPath:"fullscreen",ownModel:!1,applier:"{controllers}.applier",listeners:{onReady:"{controllers}.events.onFullScreenReady"}},captionControlsOptions={languages:"{controllers}.options.captions",model:"{controllers}.model",applier:"{controllers}.applier",showHidePath:"displayCaptions",currentLanguagePath:"currentTracks.captions",styles:{button:"fl-videoPlayer-captions-button",buttonWithShowing:"fl-videoPlayer-captions-button-on"},strings:{showLanguage:"Show Captions",hideLanguage:"Hide Captions",press:"Captions",release:"Captions"},events:{onControlledElementReady:"{controllers}.events.onCaptionsReady"},templates:{menuButton:{href:"{controllers}.options.templates.menuButton.href"}}};fluid.demands("fullScreenButton",["fluid.browser.supportsFullScreen"],{funcName:"fluid.toggleButton",container:"{controllers}.container",options:fullScreenButtonOptions}),fluid.demands("captionControls",["fluid.browser.nativeVideoSupport"],{funcName:"fluid.videoPlayer.languageControls",container:"{controllers}.dom.captionControlsContainer",options:captionControlsOptions}),fluid.videoPlayer.controllers.showHideScrubberHandle=function(that,totalTime){that.applier.requestChange("isShown.scrubber.handle",!!totalTime)},fluid.videoPlayer.controllers.finalInit=function(that){var templates=that.options.templates;fluid.fetchResources(templates,function(){var resourceSpec=templates.controllers;resourceSpec.fetchError||(that.container.append(resourceSpec.resourceText),that.events.afterTemplateLoaded.fire(),bindControllerModel(that),that.showHideScrubberHandle())}),that.applier.modelChanged.addListener("totalTime",that.showHideScrubberHandle)};var updateTime=function(that,element){var time=that.locate(element);time.text(fluid.videoPlayer.formatTime(that.model[element]))},bindScrubberDOMEvents=function(that){var scrubber=that.locate("scrubber");scrubber.bind({slidestart:function(evt,ui){that.events.onStartScrub.fire(ui.value)},slide:function(evt,ui){that.events.onScrub.fire(ui.value)},slidestop:function(evt,ui){that.events.afterScrub.fire(ui.value)}})},bindScrubberModel=function(that){that.applier.modelChanged.addListener("startTime",that.updateMin),that.applier.modelChanged.addListener("totalTime",that.updateMax),that.applier.modelChanged.addListener("currentTime",that.updateCurrent),that.applier.modelChanged.addListener("bufferEnd",that.updateBuffered),that.applier.modelChanged.addListener("canPlay",that.syncState)},createScrubberMarkup=function(that){var scrubber=that.locate("scrubber");return scrubber.slider({unittext:"seconds",range:"min",disabled:!0}),that.locate("handle").attr({"aria-label":that.options.strings.scrubber,"aria-valuemin":0,"aria-valuemax":0,"aria-valuenow":0,"aria-valuetext":0,role:"slider"}),scrubber};fluid.defaults("fluid.videoPlayer.controllers.scrubber",{gradeNames:["fluid.viewComponent","fluid.videoPlayer.showHide","autoInit"],finalInitFunction:"fluid.videoPlayer.controllers.scrubber.finalInit",showHidePath:"scrubber",components:{bufferedProgress:{type:"fluid.progress",container:"{scrubber}.dom.bufferedProgress",options:{initiallyHidden:!1,minWidth:0,listeners:{onAttach:"{scrubber}.events.onProgressAttached"}}}},events:{afterScrub:null,onScrub:null,onStartScrub:null,onProgressAttached:null,onReady:{events:{onProgressAttached:"onProgressAttached",onCreate:"onCreate"},args:["{scrubber}"]}},invokers:{updateBuffered:{funcName:"fluid.videoPlayer.controllers.scrubber.updateBuffered",args:["{fluid.videoPlayer.controllers.scrubber}"]}},selectors:{totalTime:".flc-videoPlayer-total",currentTime:".flc-videoPlayer-current",scrubber:".flc-videoPlayer-scrubber",handle:".ui-slider-handle",bufferedProgress:".flc-videoPlayer-buffered-progress",bufferedProgressBar:".flc-progress-bar"},strings:{scrubber:"Time scrub"}});var bufferCompleted=!1;fluid.videoPlayer.controllers.scrubber.updateBuffered=function(that){var lastBufferedTime=that.model.bufferEnd,totalTime=that.model.totalTime;if(lastBufferedTime!==totalTime&&(bufferCompleted=!1),totalTime&&lastBufferedTime&&!bufferCompleted){var percent=Math.round(lastBufferedTime/totalTime*100);that.locate("bufferedProgressBar").width(that.model.videoWidth),that.bufferedProgress.update(percent),lastBufferedTime===totalTime&&(bufferCompleted=!0)}},fluid.videoPlayer.controllers.scrubber.postInit=function(that){that.updateMin=function(){var startTime=that.model.startTime||0,scrubber=that.locate("scrubber");scrubber.slider("option","min",startTime+that.model.currentTime),that.locate("handle").attr({"aria-valuemin":startTime+that.model.currentTime})},that.updateMax=function(){updateTime(that,"totalTime");var scrubber=that.locate("scrubber");scrubber.slider("option","max",that.model.totalTime),that.locate("handle").attr({"aria-valuemax":that.model.totalTime})},that.updateCurrent=function(){updateTime(that,"currentTime");var scrubber=that.locate("scrubber");scrubber.slider("value",that.model.currentTime),that.locate("handle").attr({"aria-valuenow":that.model.currentTime,"aria-valuetext":fluid.videoPlayer.formatTime(that.model.currentTime)+" of "+fluid.videoPlayer.formatTime(that.model.totalTime)})},that.syncState=function(){var scrubber=that.locate("scrubber");that.model.canPlay===!0?scrubber.slider("enable"):scrubber.slider("disable")},that.refresh=function(){that.updateMin(),that.updateMax(),that.updateCurrent(),that.syncState()}},fluid.videoPlayer.controllers.scrubber.finalInit=function(that){createScrubberMarkup(that),bindScrubberDOMEvents(that),bindScrubberModel(that),that.refresh()},fluid.registerNamespace("fluid.videoPlayer.volumeControls"),fluid.videoPlayer.volumeControls.bindDOMEvents=function(that){var volumeControl=that.locate("volumeControl"),muteButton=that.muteButton,tooltip=muteButton.tooltip;fluid.each(["slide","slidechange"],function(value){volumeControl.bind(value,function(evt,ui){fluid.fireSourcedChange(that.applier,"volume",ui.value,"slider")})}),volumeControl.mouseenter(function(){tooltip.updateContent(that.options.strings.volume)}),volumeControl.mouseleave(function(){tooltip.updateContent(muteButton.tooltipContentFunction)})},fluid.videoPlayer.updateMuteStatus=function(that){return function(newModel,oldModel){that.applier.hasChangeSource("mute")||(0===that.model.volume?(that.oldVolume=oldModel.volume,fluid.fireSourcedChange(that.applier,"muted",!0,"volume")):that.model.muted&&fluid.fireSourcedChange(that.applier,"muted",!1,"volume"))}},fluid.videoPlayer.volumeControls.bindModel=function(that){fluid.addSourceGuardedListener(that.applier,"volume","slider",that.updateSlider),that.applier.modelChanged.addListener("volume",fluid.videoPlayer.updateMuteStatus(that)),that.applier.modelChanged.addListener("canPlay",function(){that.locate("mute").attr("disabled",!that.model.canPlay)}),that.applier.modelChanged.addListener("muted",function(newModel,oldModel){oldModel.volume>0&&(that.oldVolume=oldModel.volume);var fromVolume=that.applier.hasChangeSource("volume");if(!fromVolume){var isMuting=newModel.muted;isMuting?fluid.fireSourcedChange(that.applier,"volume",0,"mute"):fluid.fireSourcedChange(that.applier,"volume",that.oldVolume,"mute")}})},fluid.videoPlayer.volumeControls.init=function(that){var volumeControl=that.locate("volumeControl"),mute=that.locate("mute");volumeControl.addClass(that.options.styles.volumeControl),volumeControl.slider({orientation:"vertical",range:"min",min:that.model.minVolume,max:that.model.maxVolume,value:that.model.volume});var handle=that.locate("handle");handle.attr({"aria-label":that.options.strings.volume,"aria-valuemin":that.model.minVolume,"aria-valuemax":that.model.maxVolume,"aria-valuenow":that.model.volume,"aria-valuetext":that.model.volume+"%",role:"slider"}),fluid.tabindex(that.container,0),fluid.tabindex(mute,-1),fluid.tabindex(volumeControl,-1),fluid.tabindex(handle,-1),fluid.activatable(that.container,function(evt){that.muteButton.press()},{additionalBindings:[{key:$.ui.keyCode.UP,activateHandler:function(){return volumeControl.slider("value",volumeControl.slider("value")+1),!1}},{key:$.ui.keyCode.DOWN,activateHandler:function(){return volumeControl.slider("value",volumeControl.slider("value")-1),!1}}]}),that.container.attr("aria-label",that.options.strings.instructions),mute.attr("title",that.options.strings.instructions)},fluid.defaults("fluid.videoPlayer.volumeControls",{gradeNames:["fluid.viewComponent","autoInit"],postInitFunction:"fluid.videoPlayer.volumeControls.postInit",finalInitFunction:"fluid.videoPlayer.volumeControls.finalInit",events:{muteButtonReady:null,onReady:{events:{muteButtonReady:"muteButtonReady",onCreate:"onCreate"},args:["{volumeControls}"]}},model:{muted:!1,volume:50,minVolume:0,maxVolume:100},unmuteVolume:10,selectors:{mute:".flc-videoPlayer-mute",volumeControl:".flc-videoPlayer-volumeControl",handle:".ui-slider-handle"},styles:{mute:"fl-videoPlayer-mute",volumeControl:"fl-videoPlayer-volumeControl",buttonIcon:"ui-icon-signal"},strings:{volume:"Volume",instructions:"Volume controls. Use up and down arrows to adjust volume, space or enter to mute."},components:{muteButton:{type:"fluid.toggleButton",options:{selectors:{button:".flc-videoPlayer-mute"},styles:{init:"fl-videoPlayer-mute",pressed:"fl-videoPlayer-muted"},strings:{press:"Mute",release:"Un-mute"},model:"{volumeControls}.model",applier:"{volumeControls}.applier",modelPath:"muted",components:{tooltip:{container:"{volumeControls}.container"}},listeners:{onReady:"{volumeControls}.events.muteButtonReady"}}}}}),fluid.videoPlayer.volumeControls.postInit=function(that){that.options.components.muteButton.container=that.container,that.oldVolume=that.options.unmuteVolume,that.updateSlider=function(){var volume=that.model.volume,volumeControl=that.locate("volumeControl");volumeControl.slider("value",volume),that.locate("handle").attr({"aria-valuenow":volume,"aria-valuetext":Math.round(volume)+"%"})}},fluid.videoPlayer.volumeControls.finalInit=function(that){var volumeControls=fluid.videoPlayer.volumeControls;volumeControls.init(that),volumeControls.bindDOMEvents(that),volumeControls.bindModel(that)},fluid.defaults("fluid.emptyEventedSubcomponent",{gradeNames:["fluid.eventedComponent","autoInit"],events:{onReady:{events:{onCreate:"onCreate"},args:["{emptyEventedSubcomponent}"]}}})}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.toggleButton",{gradeNames:["fluid.viewComponent","fluid.videoPlayer.indirectReader","autoInit"],postInitFunction:"fluid.toggleButton.postInit",finalInitFunction:"fluid.toggleButton.finalInit",events:{onPress:null,onTooltipAttached:null,onReady:{events:{onCreate:"onCreate",tooltip:"onTooltipAttached"},args:["{toggleButton}"]}},selectors:{button:".flc-videoPlayer-button",label:".flc-videoPlayer-button-label"},styles:{init:"fl-videoPlayer-button-init",pressed:"fl-videoPlayer-button-pressed",tooltip:"fl-videoPlayer-tooltip"},ownModel:!0,model:{},modelPath:"pressed",strings:{press:"Press",release:"Release"},invokers:{tooltipContentFunction:{funcName:"fluid.toggleButton.tooltipContentFunction",args:"{toggleButton}"}},components:{tooltip:{type:"fluid.tooltip",container:"{toggleButton}.dom.button",options:{styles:{tooltip:"{toggleButton}.options.styles.tooltip"},listeners:{onAttach:"{toggleButton}.events.onTooltipAttached"}}}}}),fluid.toggleButton.postInit=function(that){(that.options.ownModel||void 0===that.readIndirect("modelPath"))&&that.writeIndirect("modelPath",!1),that.requestStateChange=function(){that.writeIndirect("modelPath",!that.readIndirect("modelPath"))},that.refreshView=function(){var button=that.locate("button"),pressed=that.readIndirect("modelPath"),styles=that.options.styles;styles.init===styles.pressed?button.addClass(styles.init):(button.toggleClass(styles.init,!pressed),button.toggleClass(styles.pressed,pressed)),button.attr("aria-pressed",pressed);var labelText=that.tooltipContentFunction(that);that.locate("button").attr("aria-label",labelText),that.tooltip.updateContent(labelText)},that.press=function(){return that.requestStateChange(),that.events.onPress.fire(that),!1}},fluid.toggleButton.tooltipContentFunction=function(that){return that.options.strings[that.readIndirect("modelPath")?"release":"press"]},fluid.toggleButton.setUpToggleButton=function(that){that.locate("button").attr("role","button"),that.refreshView()},fluid.toggleButton.bindToggleButtonEvents=function(that){var button=that.locate("button");button.click(that.press),that.applier.modelChanged.addListener(that.options.modelPath,function(){that.refreshView()})},fluid.toggleButton.finalInit=function(that){fluid.toggleButton.setUpToggleButton(that),fluid.toggleButton.bindToggleButtonEvents(that)}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.videoPlayer.languageMenu",{gradeNames:["fluid.rendererComponent","fluid.videoPlayer.indirectReader","autoInit"],renderOnInit:!0,preInitFunction:"fluid.videoPlayer.languageMenu.preInit",postInitFunction:"fluid.videoPlayer.languageMenu.postInit",finalInitFunction:"fluid.videoPlayer.languageMenu.finalInit",produceTree:"fluid.videoPlayer.languageMenu.produceTree",languages:[],currentLanguagePath:"activeLanguages",showHidePath:"showLanguage",model:{},events:{onReady:{events:{onCreate:"onCreate",afterRender:"afterRender"},args:["{languageMenu}"]},activated:null,hiddenByKeyboard:null,onControlledElementReady:null},listeners:{onControlledElementReady:{listener:"fluid.videoPlayer.languageMenu.setAriaControlsAttr",args:["{languageMenu}","{arguments}.0"]}},selectors:{menuItem:".flc-videoPlayer-menuItem",language:".flc-videoPlayer-language",showHide:".flc-videoPlayer-languageNone"},repeatingSelectors:["language"],strings:{showLanguage:"Show Language",hideLanguage:"Hide Language"},styles:{selected:"fl-videoPlayer-menuItem-selected",active:"fl-videoPlayer-menuItem-active"},invokers:{updateTracks:{funcName:"fluid.videoPlayer.languageMenu.updateTracks",args:["{languageMenu}"]},updateShowHide:{funcName:"fluid.videoPlayer.languageMenu.updateShowHide",args:["{languageMenu}"]}},hideOnInit:!0}),fluid.videoPlayer.languageMenu.produceTree=function(that){that.model.languages=that.options.languages;var tree={expander:{type:"fluid.renderer.repeat",repeatID:"language",controlledBy:"languages",pathAs:"lang",tree:{value:"${{lang}.label}",decorators:{type:"attrs",attributes:{role:"menuitemradio","aria-checked":"false","aria-selected":"false"}}}},showHide:{value:that.options.strings[that.readIndirect("showHidePath")?"hideLanguage":"showLanguage"],decorators:{type:"attrs",attributes:{role:"menuitemcheckbox","aria-checked":"false","aria-selected":"false"}}}};return tree},fluid.videoPlayer.languageMenu.setUpKeyboardA11y=function(that){that.container.fluid("tabbable"),that.container.fluid("selectable",{direction:fluid.a11y.orientation.VERTICAL,selectableSelector:that.options.selectors.menuItem,onSelect:function(el){$(el).addClass(that.options.styles.selected)},onUnselect:function(el){$(el).removeClass(that.options.styles.selected)},rememberSelectionState:!1,autoSelectFirstItem:!1,noWrap:!1}),that.locate("language").fluid("activatable",function(evt){return that.activate(that.locate("language").index(evt.currentTarget)),that.events.hiddenByKeyboard.fire(),!1}),that.locate("showHide").fluid("activatable",function(evt){return that.showHide(),that.events.hiddenByKeyboard.fire(),!1})},fluid.videoPlayer.languageMenu.bindEventListeners=function(that){var langList=that.locate("language");langList.click(function(evt){that.activate(langList.index(evt.currentTarget))}),that.locate("showHide").click(function(evt){that.showHide()}),that.applier.modelChanged.addListener(that.options.showHidePath,that.updateShowHide),that.applier.modelChanged.addListener(that.options.currentLanguagePath,that.updateTracks)},fluid.videoPlayer.languageMenu.updateTracks=function(that){var menuItems=that.locate("menuItem");menuItems.removeClass(that.options.styles.selected).removeClass(that.options.styles.active),menuItems.attr("aria-checked","false").attr("aria-selected","false");var langIndex=that.readIndirect("currentLanguagePath")[0],selectedItem=$(menuItems[langIndex]);selectedItem.addClass(that.options.styles.active),selectedItem.attr("aria-checked","true").attr("aria-selected","true")},fluid.videoPlayer.languageMenu.updateShowHide=function(that){var showHide=that.readIndirect("showHidePath");that.locate("showHide").text(that.options.strings[showHide?"hideLanguage":"showLanguage"])},fluid.videoPlayer.languageMenu.setAriaControlsAttr=function(that,controlledId){that.container.attr("aria-controls",controlledId),that.locate("menuItem").attr("aria-controls",controlledId)},fluid.videoPlayer.languageMenu.preInit=function(that){that.toggleView=function(){that.container.toggle(),that.container.attr("aria-hidden",!that.container.is(":visible"))}},fluid.videoPlayer.languageMenu.postInit=function(that){that.showMenu=function(){that.container.show(),that.container.attr("aria-hidden","false")},that.hideMenu=function(){that.container.hide(),that.container.attr("aria-hidden","true")},that.showAndSelect=function(){that.showMenu(),that.container.fluid("selectable.select",that.locate("menuItem").last())},that.activate=function(index){that.writeIndirect("currentLanguagePath",[index]),that.writeIndirect("showHidePath",!0),that.hideMenu()},that.showHide=function(){that.writeIndirect("showHidePath",!that.readIndirect("showHidePath"),"menuButton"),that.hideMenu()}},fluid.videoPlayer.languageMenu.finalInit=function(that){fluid.videoPlayer.languageMenu.bindEventListeners(that),fluid.videoPlayer.languageMenu.setUpKeyboardA11y(that),that.container.attr("role","menu"),that.container.css("z-index",9999),that.hideMenu(),that.updateTracks(),that.updateShowHide()},fluid.defaults("fluid.videoPlayer.languageControls",{gradeNames:["fluid.viewComponent","fluid.videoPlayer.indirectReader","autoInit"],finalInitFunction:"fluid.videoPlayer.languageControls.finalInit",selectors:{button:".flc-menuButton-button",label:".flc-menuButton-label",menu:".flc-menuButton-languageMenu"},events:{onReady:null,onRenderingComplete:null,onControlledElementReady:null,afterFetchResources:null},listeners:{afterFetchResources:{listener:"fluid.videoPlayer.languageControls.setUpControls",priority:"last"}},languages:[],currentLanguagePath:"",showHidePath:"",strings:{showLanguage:"Show Language",hideLanguage:"Hide Language"},styles:{button:"fl-videoPlayer-button",buttonWithShowing:"fl-videoPlayer-buttonWithShowing"},components:{button:{type:"fluid.toggleButton",createOnEvent:"afterFetchResources",container:"{languageControls}.container",options:{styles:{init:"{languageControls}.options.styles.button",pressed:"{languageControls}.options.styles.button"},selectors:{button:"{languageControls}.options.selectors.button",label:"{languageControls}.options.selectors.label"},strings:"{languageControls}.options.strings"}},menu:{type:"fluid.videoPlayer.languageMenu",createOnEvent:"afterFetchResources",container:"{languageControls}.dom.menu",options:{model:"{languageControls}.model",languages:"{languageControls}.options.languages",applier:"{languageControls}.applier",showHidePath:"{languageControls}.options.showHidePath",currentLanguagePath:"{languageControls}.options.currentLanguagePath",strings:"{languageControls}.options.strings",events:{onControlledElementReady:"{languageControls}.events.onControlledElementReady"}}},eventBinder:{type:"fluid.videoPlayer.languageControls.eventBinder",createOnEvent:"onRenderingComplete"}},templates:{menuButton:{forceCache:!0,href:"../html/menuButton_template.html"}},invokers:{refreshButtonClass:{funcName:"fluid.videoPlayer.languageControls.refreshButtonClass",args:["{languageControls}"]}}}),fluid.videoPlayer.languageControls.setUpKeyboardA11y=function(that){fluid.tabindex(that.locate("menu"),-1);var button=that.locate("button");button.fluid("activatable",[fluid.identity,{additionalBindings:[{key:$.ui.keyCode.UP,activateHandler:function(){return that.menu.showAndSelect(),!1}}]}]),that.container.fluid("activatable",[fluid.identity,{additionalBindings:[{key:$.ui.keyCode.ESCAPE,activateHandler:function(){that.menu.hideMenu(),button.focus()}}]}]),that.menu.events.hiddenByKeyboard.addListener(function(){button.focus()}),fluid.deadMansBlur(that.container,{exclusions:[that.menu.options.selectors.menuItem,that.options.selectors.button],handler:function(){that.menu.hideMenu()}})},fluid.videoPlayer.languageControls.setUpAria=function(that){var containerID=fluid.allocateSimpleId(that.menu.container);that.button.locate("button").attr({"aria-owns":containerID,"aria-controls":containerID,"aria-haspopup":"true"})},fluid.videoPlayer.languageControls.refreshButtonClass=function(that){var showHide=that.readIndirect("showHidePath");that.button.locate("button").toggleClass(that.options.styles.buttonWithShowing,showHide)},fluid.videoPlayer.languageControls.setUpControls=function(that){that.container.show(),that.events.onRenderingComplete.fire(that),fluid.videoPlayer.languageControls.setUpKeyboardA11y(that),fluid.videoPlayer.languageControls.setUpAria(that),that.applier.modelChanged.addListener(that.options.showHidePath,that.refreshButtonClass),that.refreshButtonClass(),that.events.onReady.fire(that)},fluid.videoPlayer.languageControls.finalInit=function(that){fluid.fetchResources(that.options.templates,function(resourceSpec){that.container.append(that.options.templates.menuButton.resourceText),that.events.afterFetchResources.fire(that)})},fluid.defaults("fluid.videoPlayer.languageControls.eventBinder",{gradeNames:["fluid.eventedComponent","autoInit"],listeners:{"{button}.events.onPress":"{menu}.toggleView"}})}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.videoPlayer.media",{gradeNames:["fluid.viewComponent","autoInit"],components:{mediaEventBinder:{type:"fluid.videoPlayer.eventBinder",createOnEvent:"onEventBindingReady"}},finalInitFunction:"fluid.videoPlayer.media.finalInit",preInitFunction:"fluid.videoPlayer.media.preInit",events:{onEventBindingReady:null,onTimeUpdate:null,onReady:{events:{eventBindingReady:"onEventBindingReady",created:"onCreate"}},onMediaElementCanPlay:null,onMediaElementCanPlayThrough:null,onMediaElementLoadedMetadata:null,onMediaElementLoadedData:null,onMediaElementVolumeChange:null,onMediaElementEnded:null,onMediaElementTimeUpdate:null,onFullScreen:null,onExitFullScreen:null,onLoadedMetadata:null},invokers:{renderSources:{funcName:"fluid.videoPlayer.media.renderSources",args:["{media}"]},bindMediaModel:{funcName:"fluid.videoPlayer.media.bindMediaModel",args:["{media}"]},bindMediaDOMEvents:{funcName:"fluid.videoPlayer.media.bindMediaDOMEvents",args:["{media}"]}},mediaEventBindings:{canplay:"onMediaElementCanPlay",canplaythrough:"onMediaElementCanPlayThrough",loadeddata:"onMediaElementLoadedData",loadedmetadata:"onMediaElementLoadedMetadata",volumechange:"onMediaElementVolumeChange",ended:"onMediaElementEnded",timeupdate:"onMediaElementTimeUpdate"},listeners:{onMediaElementCanPlay:[{listener:"{media}.applier.fireChangeRequest",args:{path:"canPlay",value:!0}},"{media}.refresh"],onMediaElementLoadedMetadata:[{listener:"{media}.applier.fireChangeRequest",args:[{path:"totalTime",value:"{media}.model.mediaElementVideo.duration"}]},{listener:"{media}.applier.fireChangeRequest",args:[{path:"currentTime",value:"{media}.model.mediaElementVideo.currentTime"}]},{listener:"fluid.videoPlayer.media.updateStartTime",args:["{media}"]},{listener:"{media}.events.onLoadedMetadata.fire"}],onMediaElementVolumeChange:"fluid.videoPlayer.media.handleVolumeChange",onMediaElementEnded:[{listener:"{media}.applier.fireChangeRequest",args:[{path:"play",value:!1}]},{listener:"{media}.applier.fireChangeRequest",args:[{path:"currentTime",value:0}]}],onMediaElementTimeUpdate:"fluid.videoPlayer.media.handleTimeUpdate"},sourceRenderers:{"video/mp4":"fluid.videoPlayer.media.createSourceMarkup.html5SourceTag","video/webm":"fluid.videoPlayer.media.createSourceMarkup.html5SourceTag","video/ogg":"fluid.videoPlayer.media.createSourceMarkup.html5SourceTag","video/ogv":"fluid.videoPlayer.media.createSourceMarkup.html5SourceTag","video/youtube":"fluid.videoPlayer.media.createSourceMarkup.html5SourceTag"},sources:[]}),fluid.videoPlayer.media.createSourceMarkup={html5SourceTag:function(videoPlayer,mediaSource){var sourceTag=$("<source />");return sourceTag.attr(mediaSource),videoPlayer.container.append(sourceTag),sourceTag}},fluid.videoPlayer.media.renderSources=function(that){$.each(that.options.sources,function(idx,source){var renderer=that.options.sourceRenderers[source.type];$.isFunction(renderer)?renderer.apply(null,[that,source]):fluid.invokeGlobalFunction(renderer,[that,source])})},fluid.videoPlayer.media.bindMediaModel=function(that){that.applier.modelChanged.addListener("play",that.play),that.applier.modelChanged.addListener("muted",that.mute),fluid.addSourceGuardedListener(that.applier,"volume","media",that.updateVolume)},fluid.videoPlayer.media.handleVolumeChange=function(that,evt){var mediaVolume=100*that.model.mediaElementVideo.volume;that.model.muted&&0===mediaVolume||fluid.fireSourcedChange(that.applier,"volume",mediaVolume,"media")},fluid.videoPlayer.media.handleTimeUpdate=function(that,evt){0===that.model.totalTime&&that.applier.requestChange("totalTime",that.model.mediaElementVideo.duration);var currentTime=evt.currentTime||that.model.mediaElementVideo.currentTime||0;that.model.mediaElementVideo.paused&&that.model.scrubTime&&(that.model.scrubTime!==currentTime?currentTime=that.model.scrubTime:currentTime>=that.model.scrubTime&&that.applier.requestChange("scrubTime",null));var buffered=that.model.mediaElementVideo.buffered||0;that.events.onTimeUpdate.fire(currentTime,buffered)},fluid.videoPlayer.media.updateStartTime=function(that){var newStartTime=that.model.mediaElementVideo.startTime||0;that.applier.requestChange("startTime",newStartTime)},fluid.videoPlayer.media.bindMediaDOMEvents=function(that){MediaElement(that.container[0],{success:function(mediaElementVideo){that.model.mediaElementVideo=mediaElementVideo,mediaElementVideo.play(),fluid.each(that.options.mediaEventBindings,function(localEvtName,mediaElEvtName){mediaElementVideo.addEventListener(mediaElEvtName,function(evt){that.events[localEvtName].fire(that,evt)})});var fullScreenEventName=fluid.get(mejs,"MediaFeatures.fullScreenEventName");fullScreenEventName&&document.addEventListener(fullScreenEventName,function(evt){that.events[mejs.MediaFeatures.isFullScreen()?"onFullScreen":"onExitFullScreen"].fire(that,evt)}),that.events.onEventBindingReady.fire(that)}})},fluid.videoPlayer.media.preInit=function(that){that.updateCurrentTime=function(currentTime,buffered){var bufferEnd=buffered&&buffered.length>0?buffered.end(buffered.length-1):0;that.applier.fireChangeRequest({path:"currentTime",value:currentTime}),that.applier.fireChangeRequest({path:"bufferEnd",value:bufferEnd})},that.setTime=function(time){that.model.mediaElementVideo&&(that.applier.requestChange("scrubTime",time),that.model.mediaElementVideo.setCurrentTime(time))},that.updateVolume=function(){that.model.mediaElementVideo&&that.model.mediaElementVideo.setVolume(that.model.volume/100)},that.play=function(){that.model.mediaElementVideo&&(that.model.play===!0?that.model.mediaElementVideo.play():that.model.mediaElementVideo.pause())},that.mute=function(){that.model.mediaElementVideo&&that.model.mediaElementVideo.setMuted(that.model.muted)},that.refresh=function(){that.updateVolume(),that.play()},that.requestFullScreen=function(elm){mejs.MediaFeatures.requestFullScreen(elm||that.model.mediaElementVideo)},that.cancelFullScreen=function(){mejs.MediaFeatures.cancelFullScreen()}},fluid.videoPlayer.media.finalInit=function(that){that.renderSources(),that.bindMediaModel(),that.bindMediaDOMEvents()}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.videoPlayer.transcript",{gradeNames:["fluid.rendererComponent","autoInit"],renderOnInit:!0,rendererOptions:{autoBind:!0},preInitFunction:"fluid.videoPlayer.transcript.preInit",finalInitFunction:"fluid.videoPlayer.transcript.finalInit",produceTree:"fluid.videoPlayer.transcript.produceTree",events:{onTranscriptsLoaded:null,onLoadTranscriptError:null,onIntervalChange:null,onCurrentTranscriptChanged:null,onTranscriptHide:null,onTranscriptShow:null,onTranscriptElementChange:null,onReady:null},model:{displayTranscripts:!1,selection:void 0,choices:[],labels:[],transcriptIntervalId:null},transcripts:[],invokers:{convertToMilli:{funcName:"fluid.videoPlayer.transcript.convertToMilli",args:["{arguments}.0"]},convertSecsToMilli:{funcName:"fluid.videoPlayer.transcript.convertSecsToMilli",args:["{arguments}.0"]}},selectors:{languageDropdown:".flc-videoPlayer-transcripts-language-dropdown",closeButton:".flc-videoPlayer-transcripts-close-button",transcriptText:".flc-videoPlayer-transcript-text"},selectorsToIgnore:["closeButton","transcriptText"],styles:{element:"fl-videoPlayer-transcript-element",highlight:"fl-videoPlayer-transcript-element-highlight",selected:"fl-videoPlayer-transcript-element-selected"},transcriptElementIdPrefix:"flc-videoPlayer-transcript-element"}),fluid.videoPlayer.transcript.showTranscriptArea=function(that){that.container.show()},fluid.videoPlayer.transcript.hideTranscriptArea=function(that){that.container.hide()},fluid.videoPlayer.transcript.switchTranscriptArea=function(that){that.model.displayTranscripts?(fluid.videoPlayer.transcript.showTranscriptArea(that),that.events.onTranscriptShow.fire()):(fluid.videoPlayer.transcript.hideTranscriptArea(that),that.events.onTranscriptHide.fire())},fluid.videoPlayer.transcript.convertToMilli=function(time){if(!time||!time.match(/^(\d{1,}:)?\d{2}:\d{2}\.\d{1,3}$/))return null;var hourStr,minStr,secWithMilliSecStr,splitTime=time.split(":");2===splitTime.length?(hourStr="0",minStr=splitTime[0],secWithMilliSecStr=splitTime[1]):(hourStr=splitTime[0],minStr=splitTime[1],secWithMilliSecStr=splitTime[2]);var splitSec=secWithMilliSecStr.split("."),hours=parseFloat(hourStr),mins=parseFloat(minStr)+60*hours,secs=parseFloat(splitSec[0])+60*mins;return Math.round(1e3*secs+parseInt(splitSec[1],10))},fluid.videoPlayer.transcript.convertSecsToMilli=function(time){return Math.round(1e3*time)},fluid.videoPlayer.transcript.getTranscriptElementId=function(transcriptElementIdPrefix,transcriptIndex){return transcriptElementIdPrefix+"-"+transcriptIndex},fluid.videoPlayer.transcript.getTranscriptElement=function(transcriptElementContent,idName,tClass){return'<span id="'+idName+'" class="'+tClass+'">'+transcriptElementContent+"</span>"},fluid.videoPlayer.transcript.scrubToTranscriptElement=function(evt,that){var inTimeMillis,elementId=evt.currentTarget.id,trackId=parseInt(elementId.substring(that.options.transcriptElementIdPrefix.length+1),10),transcriptIndex=that.model.currentTracks.transcripts[0],track=that.options.transcripts[transcriptIndex].tracks[trackId];inTimeMillis=track.text?track.start_time:that.convertToMilli(track.inTime),that.events.onTranscriptElementChange.fire((1+inTimeMillis)/1e3,track)},fluid.videoPlayer.transcript.displayTranscript=function(that,transcriptText){that.locate("transcriptText").html(transcriptText),that.updateTranscriptHighlight(),$('span[id|="'+that.options.transcriptElementIdPrefix+'"]').click(function(evt){fluid.videoPlayer.transcript.scrubToTranscriptElement(evt,that);
}),fluid.videoPlayer.transcript.setUpKeyboardA11y(that)},fluid.videoPlayer.transcript.highlightTranscriptElement=function(that,currentTrackId){if(that.locate("transcriptText").children().removeClass(that.options.styles.highlight),null!==currentTrackId){var currentTranscriptElementId=fluid.videoPlayer.transcript.getTranscriptElementId(that.options.transcriptElementIdPrefix,currentTrackId),element=fluid.jById(currentTranscriptElementId);element.addClass(that.options.styles.highlight);var scrollToOffset=that.locate("transcriptText").height()/3*-1;that.locate("transcriptText").scrollTo(element,1e3,{offset:scrollToOffset})}},fluid.videoPlayer.transcript.parseTranscriptFile=function(that,transcripts,currentIndex,convertToMilliFunc,textPath,startTimePath,endTimePath){transcripts="string"==typeof transcripts?JSON.parse(transcripts):transcripts,transcripts.transcriptCollection&&(transcripts=transcripts.transcriptCollection),that.options.transcripts[currentIndex].tracks=transcripts;for(var transcriptText="",i=0;i<transcripts.length;i++)transcriptText=transcriptText+fluid.videoPlayer.transcript.getTranscriptElement(fluid.get(transcripts[i],textPath),fluid.videoPlayer.transcript.getTranscriptElementId(that.options.transcriptElementIdPrefix,i),that.options.styles.element)+"&nbsp;";that.options.transcripts[currentIndex].transcriptText=transcriptText,fluid.videoPlayer.transcript.displayTranscript(that,transcriptText);var intervalList=[];fluid.each(transcripts,function(value,key){intervalList[key]={begin:convertToMilliFunc(fluid.get(value,startTimePath)),end:convertToMilliFunc(fluid.get(value,endTimePath))}}),that.events.onTranscriptsLoaded.fire(intervalList,that.transcriptTextId(),that)},fluid.videoPlayer.transcript.loadTranscript=function(that,currentIndex){var transcriptSource=that.options.transcripts[currentIndex];if(transcriptSource)if("text/amarajson"===transcriptSource.type)fluid.videoPlayer.fetchAmaraJson(transcriptSource.src,transcriptSource.srclang,function(data){fluid.videoPlayer.transcript.parseTranscriptFile(that,data.subtitles,currentIndex,fluid.identity,"text","start","end")});else{var opts={type:"GET",dataType:"text",success:function(data){fluid.videoPlayer.transcript.parseTranscriptFile(that,data,currentIndex,that.convertToMilli,"transcript","inTime","outTime")},error:function(){fluid.log("Error loading transcript: "+transcriptSource.src+". Are you sure this file exists?"),that.events.onLoadTranscriptError.fire(transcriptSource)}};"JSONcc"!==transcriptSource.type?(opts.url=that.model.conversionServiceUrl,opts.data={cc_result:0,cc_url:transcriptSource.src,cc_target:"JSONcc",cc_name:"__no_name"}):opts.url=transcriptSource.src,$.ajax(opts)}},fluid.videoPlayer.transcript.prepareTranscript=function(that){if(0===that.model.currentTracks.transcripts.length)return!0;var currentTranscriptIndex=parseInt(that.model.currentTracks.transcripts[0],10),currentTranscript=that.options.transcripts[currentTranscriptIndex];return 0!==that.options.transcripts.length&&currentTranscript?void(currentTranscript.transcriptText?fluid.videoPlayer.transcript.displayTranscript(that,currentTranscript.transcriptText):fluid.videoPlayer.transcript.loadTranscript(that,currentTranscriptIndex)):!0},fluid.videoPlayer.transcript.bindTranscriptDOMEvents=function(that){that.locate("closeButton").click(function(){that.applier.requestChange("displayTranscripts",!1)})},fluid.videoPlayer.transcript.setUpKeyboardA11y=function(that){var transcriptElementSelector="[id^="+that.options.transcriptElementIdPrefix+"]",transcriptList=$(transcriptElementSelector,that.container),transcriptText=that.locate("transcriptText");transcriptText.fluid("tabbable"),transcriptText.fluid("selectable",{direction:fluid.a11y.orientation.VERTICAL,selectableSelector:transcriptElementSelector,onSelect:function(el){$(el).addClass(that.options.styles.selected)},onUnselect:function(el){$(el).removeClass(that.options.styles.selected)},rememberSelectionState:!1}),transcriptList.fluid("activatable",function(evt){return fluid.videoPlayer.transcript.scrubToTranscriptElement(evt,that),!1}),transcriptList.first().focus(function(){that.model.transcriptIntervalId&&transcriptText.fluid("selectable.select",$("[id^="+that.options.transcriptElementIdPrefix+"-"+that.model.transcriptIntervalId+"]"))})},fluid.videoPlayer.transcript.bindTranscriptModel=function(that){that.applier.modelChanged.addListener("displayTranscripts",function(){fluid.videoPlayer.transcript.switchTranscriptArea(that)}),that.applier.modelChanged.addListener("currentTracks.transcripts",function(model,oldModel){if(model.currentTracks.transcripts[0]!==oldModel.currentTracks.transcripts[0]){fluid.videoPlayer.transcript.prepareTranscript(that);var currentTranscriptIndex=parseInt(that.model.currentTracks.transcripts[0],10);that.locate("languageDropdown").find("option:selected").removeAttr("selected"),that.locate("languageDropdown").find("option[value='"+currentTranscriptIndex+"']").attr("selected","selected"),that.updateTranscriptHighlight(),that.events.onCurrentTranscriptChanged.fire(currentTranscriptIndex)}}),that.events.onIntervalChange.addListener(function(currentInterval,previousInterval){currentInterval!==that.model.transcriptIntervalId&&that.applier.requestChange("transcriptIntervalId",currentInterval)}),that.applier.modelChanged.addListener("transcriptIntervalId",that.updateTranscriptHighlight)},fluid.videoPlayer.transcript.preInit=function(that){fluid.each(that.options.transcripts,function(value,key){that.model.choices.push(key.toString()),that.model.labels.push(value.label)}),that.options.transcriptElementIdPrefix=that.options.transcriptElementIdPrefix+"-"+that.id,that.updateTranscriptHighlight=function(previousInterval){fluid.videoPlayer.transcript.highlightTranscriptElement(that,that.model.transcriptIntervalId,previousInterval)}},fluid.videoPlayer.transcript.produceTree=function(that){return 0===that.model.choices.length||0===that.model.labels.length?{}:{languageDropdown:{selection:"${currentTracks.transcripts.0}",optionlist:"${choices}",optionnames:"${labels}"}}},fluid.videoPlayer.transcript.finalInit=function(that){fluid.videoPlayer.transcript.bindTranscriptDOMEvents(that),fluid.videoPlayer.transcript.bindTranscriptModel(that),fluid.videoPlayer.transcript.prepareTranscript(that),fluid.videoPlayer.transcript.switchTranscriptArea(that),that.transcriptTextId=function(){return fluid.allocateSimpleId(that.locate("transcriptText"))},that.locate("languageDropdown").attr("aria-controls",that.transcriptTextId()),that.events.onReady.fire(that)}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.videoPlayer.intervalEventsConductor",{gradeNames:["fluid.eventedComponent","fluid.modelComponent","autoInit"],events:{onTimeUpdate:null,onIntervalChange:null,onReady:{events:{onCreate:"onCreate"},args:["{intervalEventsConductor}"]}},listeners:{onTimeUpdate:{listener:"fluid.videoPlayer.intervalEventsConductor.handleTimeUpdate",args:["{fluid.videoPlayer.intervalEventsConductor}","{arguments}.0","{arguments}.1"]}},invokers:{setIntervalList:{funcName:"fluid.videoPlayer.intervalEventsConductor.setIntervalList",args:["{fluid.videoPlayer.intervalEventsConductor}","{arguments}.0"]}},preInitFunction:"fluid.videoPlayer.intervalEventsConductor.preInit",intervalList:[],model:{previousIntervalId:null}}),fluid.videoPlayer.intervalEventsConductor.preInit=function(that){that.setIntervalList=function(intervalList){that.setIntervalList(intervalList)}},fluid.videoPlayer.intervalEventsConductor.setIntervalList=function(that,intervalList){that.options.intervalList=intervalList},fluid.videoPlayer.intervalEventsConductor.inInterval=function(currentTimeInMillis,interval){return interval.begin<=currentTimeInMillis&&interval.end>=currentTimeInMillis},fluid.videoPlayer.intervalEventsConductor.findCurrentInterval=function(currentTime,intervalList,previousInterval){var currentTimeInMillis=Math.round(1e3*currentTime);return previousInterval&&fluid.videoPlayer.intervalEventsConductor.inInterval(currentTimeInMillis,intervalList[previousInterval])?previousInterval:fluid.find(intervalList,function(interval,intervalId){return fluid.videoPlayer.intervalEventsConductor.inInterval(currentTimeInMillis,interval)?intervalId:void 0},null)},fluid.videoPlayer.intervalEventsConductor.handleTimeUpdate=function(that,currentTime,buffered){if(that.options.intervalList){var previousInterval=that.options.model.previousIntervalId,currentInterval=fluid.videoPlayer.intervalEventsConductor.findCurrentInterval(currentTime,that.options.intervalList,previousInterval);currentInterval!==previousInterval&&(that.applier.requestChange("previousIntervalId",currentInterval),that.events.onIntervalChange.fire(currentInterval,previousInterval))}}}(jQuery,fluid_1_5);var fluid_1_5=fluid_1_5||{};!function($,fluid){fluid.defaults("fluid.uiOptions.withMediaPanel",{uiOptionsTransform:{config:{"*.uiOptionsLoader.*.uiOptions.*.mediaControls":"mediaControls"}},components:{templateLoader:{options:{templates:{mediaControls:"%prefix/UIOptionsTemplate-media.html"}}},uiOptionsLoader:{options:{components:{uiOptions:{options:{components:{mediaControls:{type:"fluid.uiOptions.mediaControls",container:"{uiOptions}.dom.mediaControls",createOnEvent:"onUIOptionsMarkupReady",options:{model:"{uiOptions}.model",applier:"{uiOptions}.applier",rendererOptions:"{uiOptions}.options.rendererOptions",events:{onUIOptionsRefresh:"{uiOptions}.events.onUIOptionsRefresh"}}}},selectors:{mediaControls:".flc-uiOptions-media-controls"}}}}}}}}),fluid.defaults("fluid.uiOptions.fatPanel.withMediaPanel",{gradeNames:["fluid.uiOptions.fatPanel","fluid.uiOptions.withMediaPanel"]}),fluid.uiOptions.inline.makeCreator("fluid.uiOptions.fatPanel.withMediaPanel",fluid.uiOptions.fatPanel.optionsProcessor),fluid.defaults("fluid.uiOptions.mediaControls",{gradeNames:["fluid.uiOptions.ant","autoInit"],strings:{language:["English","French"]},controlValues:{language:["en","fr"]},volume:{min:0,max:100,sliderOptions:{orientation:"horizontal",step:10}},selectors:{volume:".flc-uiOptions-volume",captions:".flc-uiOptions-captions",transcripts:".flc-uiOptions-transcripts",language:".flc-uiOptions-language"},defaultModel:{captions:!1,transcripts:!1,language:"en",volume:50},produceTree:"fluid.uiOptions.mediaControls.produceTree",resources:{template:"{templateLoader}.resources.mediaControls"}}),fluid.uiOptions.mediaControls.produceTree=function(that){var tree={};for(var item in that.model.selections)"captions"===item||"transcripts"===item?tree[item]="${selections."+item+"}":"language"===item?tree[item]={optionnames:"${labelMap."+item+".names}",optionlist:"${labelMap."+item+".values}",selection:"${selections.language}"}:"volume"===item&&(tree[item]=fluid.uiOptions.createSliderNode(that,item,"fluid.textfieldSlider.slider"));return tree},fluid.videoPlayer.transformVolumeChange=fluid.scaleLens({scaleFactor:.01}),fluid.videoPlayer.matchLanguageRecord=function(language){return function(record,index){return record.srclang===language?index:void 0}},fluid.videoPlayer.transformLanguageChange=function(value,valuePath,videoPlayer){function pushRecord(sourcePath,targetPath){var index=fluid.find(fluid.get(videoPlayer,sourcePath),ml);void 0!==index&&togo.push({type:"ADD",path:targetPath,value:[index]})}var ml=fluid.videoPlayer.matchLanguageRecord(value),togo=[];return pushRecord("options.video.captions","currentTracks.captions"),pushRecord("options.video.transcripts","currentTracks.transcripts"),togo},fluid.defaults("fluid.videoPlayer.relay",{gradeNames:["fluid.modelRelay","autoInit"],sourceApplier:"{fatPanel}.applier",events:{bindingTrigger:"{fatPanel}.events.onReady"},rules:{"selections.captions":"displayCaptions","selections.transcripts":"displayTranscripts","selections.volume":"volume","selections.language":{func:"fluid.videoPlayer.transformLanguageChange"}}}),fluid.videoPlayer.defaultModel={model:{currentTracks:{captions:[0],transcripts:[0]}}},fluid.videoPlayer.makeEnhancedInstances=function(instances,relay,callback){callback=callback||fluid.identity,instances=fluid.makeArray(instances);var listener=function(){var players=fluid.transform(instances,function(instance){var mergedOptions=$.extend(!0,{},fluid.videoPlayer.defaultModel,{model:relay.model},instance.options),player=fluid.videoPlayer(instance.container,mergedOptions);return relay.addTarget(player),player});callback(players)},lateListener=function(){setTimeout(listener,1)};relay.events.bindingTrigger&&!relay.options.bindingTriggered?relay.events.bindingTrigger.addListener(lateListener):lateListener()}}(jQuery,fluid_1_5);